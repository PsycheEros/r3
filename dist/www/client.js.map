{"version":3,"sources":["webpack:///./src/client/font-awesome.ts","webpack:///./src/client/app.module.ts.pre-build-optimizer.js","webpack:///./src/client/r3.component.ts","webpack:///./src/client/modal/header.component.ts","webpack:///./src/client/modal/header.component.ngfactory.js.pre-build-optimizer.js","webpack:///./src/client/modal/header.component.scss.shim.ngstyle.js.pre-build-optimizer.js","webpack:///./src/client/modal/header.component.html","webpack:///./src/client/modal/create-room.component.ts","webpack:///./src/client/room.service.ts","webpack:///./src/client/modal/create-room.component.ngfactory.js.pre-build-optimizer.js","webpack:///./src/client/modal/create-room.component.scss.shim.ngstyle.js.pre-build-optimizer.js","webpack:///./src/client/modal/create-room.component.html","webpack:///./src/client/modal/join-room.component.ts","webpack:///./src/client/modal/join-room.component.ngfactory.js.pre-build-optimizer.js","webpack:///./src/client/modal/join-room.component.scss.shim.ngstyle.js.pre-build-optimizer.js","webpack:///./src/client/modal/join-room.component.html","webpack:///./src/client/lobby.component.ts","webpack:///./src/client/lobby.component.ngfactory.js.pre-build-optimizer.js","webpack:///./src/client/lobby.component.scss.shim.ngstyle.js.pre-build-optimizer.js","webpack:///./src/client/lobby.component.html","webpack:///./src/client/board.component.ts","webpack:///./src/client/canvas.ts.pre-build-optimizer.js","webpack:///./src/client/canvas.ts","webpack:///./src/client/board.component.ngfactory.js.pre-build-optimizer.js","webpack:///./src/client/board.component.scss.shim.ngstyle.js.pre-build-optimizer.js","webpack:///./src/client/board.component.html","webpack:///./src/grid.ts","webpack:///./src/bounds.ts.pre-build-optimizer.js","webpack:///./src/bounds.ts","webpack:///./src/square.ts.pre-build-optimizer.js","webpack:///./src/square.ts","webpack:///./src/board.ts","webpack:///./src/rule-sets.ts.pre-build-optimizer.js","webpack:///./src/rule-sets.ts","webpack:///./src/client/modal/new-game.component.ts","webpack:///./src/client/game.service.ts","webpack:///./src/client/modal/new-game.component.ngfactory.js.pre-build-optimizer.js","webpack:///./src/client/modal/new-game.component.scss.shim.ngstyle.js.pre-build-optimizer.js","webpack:///./src/client/modal/new-game.component.html","webpack:///./src/client/game.component.ts","webpack:///./src/client/game.component.ngfactory.js.pre-build-optimizer.js","webpack:///./src/client/game.component.scss.shim.ngstyle.js.pre-build-optimizer.js","webpack:///./src/client/game.component.html","webpack:///./src/client/chat.component.ts","webpack:///./src/client/chat.component.ngfactory.js.pre-build-optimizer.js","webpack:///./src/client/chat.component.scss.shim.ngstyle.js.pre-build-optimizer.js","webpack:///./src/client/chat.component.html","webpack:///./src/client/room.component.ts.pre-build-optimizer.js","webpack:///./src/client/room.component.ngfactory.js.pre-build-optimizer.js","webpack:///./src/client/room.component.html","webpack:///./src/client/navigation.component.ts","webpack:///./src/client/navigation.component.ngfactory.js.pre-build-optimizer.js","webpack:///./src/client/navigation.component.scss.shim.ngstyle.js.pre-build-optimizer.js","webpack:///./src/client/navigation.component.html","webpack:///./src/client/r3.component.ngfactory.js.pre-build-optimizer.js","webpack:///./src/client/r3.component.html","webpack:///./src/client/session.service.ts","webpack:///./src/client/modal/modal.module.ts.pre-build-optimizer.js","webpack:///./src/client/app.module.ngfactory.js.pre-build-optimizer.js","webpack:///./src/client/main.ts","webpack:///./$_lazy_route_resource lazy namespace object"],"names":["index_es","add","free_brands_svg_icons_index_es","free_regular_svg_icons_index_es","free_solid_svg_icons_index_es","AppModule","r3_component_R3Component","[object Object]","gameService","roomService","this","currentRoom","destroyed","Subject","getCurrentRoom","pipe","Object","takeUntil","subscribe","room","keys","codes","inputs","of","mergeMap","evtName","fromEvent","document","capture","filter","e","includes","key","code","activeElement","target","srcElement","body","documentElement","tagName","nodeName","disabled","readOnly","cancelBubble","returnValue","stopPropagation","preventDefault","next","complete","header_component_ModalHeaderComponent","showCloseButton","closeClick","core","styles_ModalHeaderComponent","RenderType_ModalHeaderComponent","encapsulation","styles","data","View_ModalHeaderComponent_1","_l","_v","en","$event","ad","_co","component","emit","angular_fontawesome_ngfactory","angular_fontawesome","platform_browser","iconProp","_ck","renderedIconHTML","View_ModalHeaderComponent_0","common","ngIf","ModalCreateRoomComponent","rooms","roomName","password","createRoomModal","show","hide","createRoom","room_service_RoomService","scheduler","sessionService","allMessages","ReplaySubject","allRooms","BehaviorSubject","joinedRoomIds","joinedRooms","getEvents","roomIds","combineLatest","r","roomId","getValue","j","message","observeOn","distinctUntilChanged","scan","arr","val","name","some","Error","styles_ModalCreateRoomComponent","RenderType_ModalCreateRoomComponent","View_ModalCreateRoomComponent_0","onClick","onEsc","focus","modal_directive","component_loader_factory","onShown","onHidden","onSubmit","onReset","fesm5_forms","ngSubmit","_handleInput","value","onTouched","_compositionStart","_compositionEnd","required","p0_0","model","update","ngClassUntouched","ngClassTouched","ngClassPristine","ngClassDirty","ngClassValid","ngClassInvalid","ngClassPending","form","valid","ModalJoinRoomComponent","zone","joinRoomModal","run","joinRoom","styles_ModalJoinRoomComponent","RenderType_ModalJoinRoomComponent","View_ModalJoinRoomComponent_0","lobby_component_LobbyComponent","getRooms","getJoinedRooms","take","toPromise","setRoom","hasPassword","styles_LobbyComponent","RenderType_LobbyComponent","View_LobbyComponent_1","parent","View_LobbyComponent_3","View_LobbyComponent_2","context","$implicit","View_LobbyComponent_0","ngForOf","length","toCartesian","x","y","center","fromCartesian","drawRect","c2d","width","height","r1","r2","r3","r4","ccw","moveTo","quadraticCurveTo","lineTo","board_component_BoardComponent","dirty","colors","lastMove","click","mousemove","canvas","canvasElementRef","nativeElement","getContext","animationFrame","render","board","lightSource","bounds","left","top","clearRect","squareGradient","createRadialGradient","Math","min","addColorStop","beginPath","closePath","save","assign","fillStyle","fill","restore","globalCompositeOperation","_ref","enabled","color","_ref$position","position","_ref$bounds","lightSourceCart","lightDirection","atan2","lightDistance","shadowCenter","cos","sin","lightCenter","PI","path","strokeStyle","stroke","clip","rect","radius","_colorDef$color","data_colors","hue","saturation","lightness","hsl","isDark","radialGradient","arc","shadowColor","shadowBlur","shadowOffsetX","shadowOffsetY","lineWidth","get","p","right","ellipse","emitter","clientX","clientY","screenPosition","canvasPosition","getBoundingClientRect","screenToCanvas","square","hitTest","boardPosition","screen","styles_BoardComponent","RenderType_BoardComponent","View_BoardComponent_0","handleEvent","touches","validate","grid","Number","isSafeInteger","boundsCheck","Grid","Map","JSON","stringify","set","Symbol","iterator","call","Bounds","bottom","n","ne","se","s","sw","w","nw","Square","empty","board_Board","squareSize","gutterSize","freeze","Array","from","map","sq","lodash","index","getData","mask","_ref2","game","gameState","reset","size","setData","setMask","pt","_objectSpread","i","arguments","source","ownKeys","getOwnPropertySymbols","concat","sym","getOwnPropertyDescriptor","enumerable","forEach","_defineProperty","obj","defineProperty","configurable","writable","directions","getAffectedSquares","direction","delta","squares","push","rule_sets_RulesStandard","ruleSet","boardSize","fromGame","score1","score2","points","_game$size","point","isValid","getValidMoves","prevTurn","turn","prevIndex","t","score","gameId","gameStates","getMask","rulesStandard","ruleSets","super","ruleSetMap","new_game_component_ModalNewGameComponent","newGameModal","newGame","game_service_GameService","allGames","prev","games","findIndex","g","splice","shareReplay","styles_ModalNewGameComponent","RenderType_ModalNewGameComponent","View_ModalNewGameComponent_1","onChange","p1_0","View_ModalNewGameComponent_0","rules","game_component_GameComponent","getGames","slice","c","displayName","style","cursor","isGameOver","makeMove","styles_GameComponent","RenderType_GameComponent","View_GameComponent_2","View_GameComponent_3","View_GameComponent_1","onMouseMove","View_GameComponent_0","chat_component_ChatComponent","messages","text","getMessages","sendMessage","styles_ChatComponent","RenderType_ChatComponent","View_ChatComponent_2","user","View_ChatComponent_1","View_ChatComponent_0","scrollHandler","ngx_auto_scroll_es5","RoomComponent","RenderType_RoomComponent","View_RoomComponent_0","zone_scheduler","navigation_component_NavigationComponent","leaveRoom","styles_NavigationComponent","RenderType_NavigationComponent","View_NavigationComponent_1","transform","View_NavigationComponent_0","RenderType_R3Component","View_R3Component_1","View_R3Component_2","View_R3Component_0","R3ComponentNgFactory","session_service_SessionService","socket","lib_default","a","connect","transports","upgrade","switchMap","console","log","bind","error","close","Promise","resolve","reject","result","ModalModule","AppModuleNgFactory","modal_backdrop_component_ngfactory","modal_container_component_ngfactory","p0_1","p0_2","p2_0","p2_1","p2_2","http","positioning_service","bs_modal_service","modal_module","zone_scheduler_module","location","hostname","bootstrapModuleFactory","webpackEmptyAsyncContext","req","then","module","exports","id"],"mappings":"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","file":"client.js","sourcesContent":["import { library } from '@fortawesome/fontawesome-svg-core';\nimport { fab } from '@fortawesome/free-brands-svg-icons';\nimport { far } from '@fortawesome/free-regular-svg-icons';\nimport { fas } from '@fortawesome/free-solid-svg-icons';\nlibrary.add( fab, far, fas );\n","export class AppModule {}","import { Component, AfterViewInit, OnInit, OnDestroy } from '@angular/core';\nimport { Subject, fromEvent, of } from 'rxjs';\nimport { filter, mergeMap, takeUntil } from 'rxjs/operators';\nimport { RoomService } from './room.service';\nimport { GameService } from './game.service';\n\n@Component( {\n\tselector: 'r3',\n\ttemplateUrl: './r3.component.html'\n} )\nexport class R3Component implements AfterViewInit, OnInit, OnDestroy {\n\tpublic constructor(\n\t\t// HACK: if we don't initialize this service before joining a room, there's a race condition\n\t\t//       where we may not be listening in time for the first update event.\n\t\tprivate readonly gameService: GameService,\n\t\tprivate readonly roomService: RoomService\n\t) {}\n\n\tpublic ngOnInit() {\n\t\tconst { destroyed, roomService } = this;\n\t\troomService.getCurrentRoom()\n\t\t.pipe( takeUntil( destroyed ) )\n\t\t.subscribe( room => {\n\t\t\tthis.currentRoom = room;\n\t\t} );\n\t}\n\n\tpublic ngAfterViewInit() {\n\t\tconst { destroyed } = this,\n\t\t\tkeys = [ 'Backspace', ' ' ],\n\t\t\tcodes = [ 'Backspace', 'Space' ],\n\t\t\tinputs = [ 'INPUT', 'TEXTAREA', 'SELECT' ];\n\n\t\tof( 'keydown', 'keypress' )\n\t\t.pipe(\n\t\t\tmergeMap( evtName => fromEvent<KeyboardEvent>( document, evtName, { capture: false } ) ),\n\t\t\tfilter<KeyboardEvent>( e => keys.includes( e.key ) || codes.includes( e.code ) ),\n\t\t\tfilter<KeyboardEvent>( e => {\n\t\t\t\tconst { activeElement } = document,\n\t\t\t\t\ttarget = ( e.srcElement || e.target ) as HTMLInputElement|void;\n\t\t\t\t\treturn activeElement === document.body\n\t\t\t\t\t|| activeElement === document.documentElement\n\t\t\t\t\t|| !target\n\t\t\t\t\t|| !inputs.includes( target.tagName || target.nodeName )\n\t\t\t\t\t|| target.disabled\n\t\t\t\t\t|| target.readOnly;\n\t\t\t} ),\n\t\t\ttakeUntil( destroyed )\n\t\t).subscribe( e => {\n\t\t\te.cancelBubble = true;\n\t\t\te.returnValue = false;\n\t\t\te.stopPropagation();\n\t\t\te.preventDefault();\n\t\t} );\n\t}\n\n\tpublic ngOnDestroy() {\n\t\tthis.destroyed.next( true );\n\t\tthis.destroyed.complete();\n\t}\n\n\tpublic currentRoom = null as Room|null;\n\tprivate readonly destroyed = new Subject<true>();\n}\n","import { Component, EventEmitter, Input, Output } from '@angular/core';\n\n@Component( {\n\tselector: 'modal-header',\n\ttemplateUrl: 'header.component.html',\n\tstyleUrls: [ './header.component.scss' ]\n} )\nexport class ModalHeaderComponent {\n\t@Input()\n\tpublic showCloseButton = true;\n\n\t@Output() closeClick = new EventEmitter<void>();\n}\n","/**\n * @fileoverview This file was generated by the Angular template compiler. Do not edit.\n *\n * @suppress {suspiciousCode,uselessCode,missingProperties,missingOverride,checkTypes}\n * tslint:disable\n */\nimport * as i0 from \"./header.component.scss.shim.ngstyle\";\nimport * as i1 from \"@angular/core\";\nimport * as i2 from \"../../../node_modules/@fortawesome/angular-fontawesome/angular-fontawesome.ngfactory\";\nimport * as i3 from \"@fortawesome/angular-fontawesome\";\nimport * as i4 from \"@angular/platform-browser\";\nimport * as i5 from \"@angular/common\";\nimport * as i6 from \"./header.component\";\nvar styles_ModalHeaderComponent = [i0.styles];\nvar RenderType_ModalHeaderComponent = i1.ɵcrt({\n  encapsulation: 0,\n  styles: styles_ModalHeaderComponent,\n  data: {}\n});\nexport { RenderType_ModalHeaderComponent };\n\nfunction View_ModalHeaderComponent_1(_l) {\n  return i1.ɵvid(0, [(_l()(), i1.ɵeld(0, 0, null, null, 3, \"button\", [[\"aria-label\", \"Close\"], [\"class\", \"close\"], [\"type\", \"button\"]], null, [[null, \"click\"]], function (_v, en, $event) {\n    var ad = true;\n    var _co = _v.component;\n\n    if (\"click\" === en) {\n      var pd_0 = _co.closeClick.emit() !== false;\n      ad = pd_0 && ad;\n    }\n\n    return ad;\n  }, null, null)), (_l()(), i1.ɵeld(1, 0, null, null, 2, \"span\", [[\"aria-hidden\", \"true\"]], null, null, null, null, null)), (_l()(), i1.ɵeld(2, 0, null, null, 1, \"fa-icon\", [[\"class\", \"ng-fa-icon\"], [\"icon\", \"times\"]], [[8, \"innerHTML\", 1]], null, null, i2.View_FaIconComponent_0, i2.RenderType_FaIconComponent)), i1.ɵdid(3, 573440, null, 0, i3.FaIconComponent, [i4.DomSanitizer], {\n    iconProp: [0, \"iconProp\"]\n  }, null)], function (_ck, _v) {\n    var currVal_1 = \"times\";\n\n    _ck(_v, 3, 0, currVal_1);\n  }, function (_ck, _v) {\n    var currVal_0 = i1.ɵnov(_v, 3).renderedIconHTML;\n\n    _ck(_v, 2, 0, currVal_0);\n  });\n}\n\nexport function View_ModalHeaderComponent_0(_l) {\n  return i1.ɵvid(0, [(_l()(), i1.ɵeld(0, 0, null, null, 4, \"div\", [[\"class\", \"modal-header\"]], null, null, null, null, null)), (_l()(), i1.ɵeld(1, 0, null, null, 1, \"h4\", [[\"class\", \"modal-title\"]], null, null, null, null, null)), i1.ɵncd(null, 0), (_l()(), i1.ɵand(16777216, null, null, 1, null, View_ModalHeaderComponent_1)), i1.ɵdid(4, 16384, null, 0, i5.NgIf, [i1.ViewContainerRef, i1.TemplateRef], {\n    ngIf: [0, \"ngIf\"]\n  }, null)], function (_ck, _v) {\n    var _co = _v.component;\n    var currVal_0 = _co.showCloseButton;\n\n    _ck(_v, 4, 0, currVal_0);\n  }, null);\n}\nexport function View_ModalHeaderComponent_Host_0(_l) {\n  return i1.ɵvid(0, [(_l()(), i1.ɵeld(0, 0, null, null, 1, \"modal-header\", [], null, null, null, View_ModalHeaderComponent_0, RenderType_ModalHeaderComponent)), i1.ɵdid(1, 49152, null, 0, i6.ModalHeaderComponent, [], null, null)], null, null);\n}\nvar ModalHeaderComponentNgFactory = i1.ɵccf(\"modal-header\", i6.ModalHeaderComponent, View_ModalHeaderComponent_Host_0, {\n  showCloseButton: \"showCloseButton\"\n}, {\n  closeClick: \"closeClick\"\n}, [\"*\"]);\nexport { ModalHeaderComponentNgFactory };","/**\n * @fileoverview This file was generated by the Angular template compiler. Do not edit.\n *\n * @suppress {suspiciousCode,uselessCode,missingProperties,missingOverride,checkTypes}\n * tslint:disable\n */\nvar styles = [\"\"];\nexport { styles };","<div class=\"modal-header\"> <h4 class=\"modal-title\"> <ng-content></ng-content> </h4> <button type=\"button\" class=\"close\" (click)=\"closeClick.emit()\" aria-label=\"Close\" *ngIf=\"showCloseButton\"> <span aria-hidden=\"true\"> <fa-icon icon=\"times\"></fa-icon> </span> </button> </div> ","import { Component, ViewChild } from '@angular/core';\nimport { RoomService } from 'client/room.service';\nimport { ModalDirective } from 'ngx-bootstrap';\n\n@Component( {\n\tselector: 'modal-create-room',\n\ttemplateUrl: 'create-room.component.html',\n\tstyleUrls: [ './create-room.component.scss' ]\n} )\nexport class ModalCreateRoomComponent {\n\tconstructor( private readonly roomService: RoomService ) {}\n\n\t@ViewChild( 'createRoomModal' )\n\tprotected createRoomModal: ModalDirective;\n\n\tpublic show() {\n\t\tconst { createRoomModal } = this;\n\t\tcreateRoomModal.show();\n\t}\n\n\tpublic hide() {\n\t\tconst { createRoomModal } = this;\n\t\tcreateRoomModal.hide();\n\t}\n\n\tpublic rooms = [] as Room[];\n\tpublic roomName = '';\n\tpublic password = '';\n\n\tpublic async createRoom() {\n\t\tconst { roomService, roomName, password } = this;\n\t\tif( !roomName ) { return; }\n\t\tthis.hide();\n\t\tawait roomService.createRoom( roomName, password );\n\t}\n}\n","import { Observable, BehaviorSubject, ReplaySubject, SchedulerLike, combineLatest } from 'rxjs';\nimport { distinctUntilChanged, observeOn, scan } from 'rxjs/operators';\nimport { tapLog } from 'src/operators';\nimport { ZoneScheduler } from 'ngx-zone-scheduler';\nimport { Inject, Injectable } from '@angular/core';\nimport { SessionService } from './session.service';\n\n@Injectable()\nexport class RoomService {\n\tconstructor(\n\t\t@Inject(ZoneScheduler)\n\t\tprivate readonly scheduler: SchedulerLike,\n\t\t@Inject(SessionService)\n\t\tprivate readonly sessionService: SessionService\n\t) {\n\t\tsessionService.getEvents<Room[]>( 'rooms' )\n\t\t.subscribe( rooms => {\n\t\t\tconst { allRooms } = this;\n\t\t\tallRooms.next( rooms );\n\t\t} );\n\n\t\tsessionService.getEvents<string[]>( 'joinedRooms' )\n\t\t.subscribe( roomIds => {\n\t\t\tconst { joinedRoomIds } = this;\n\t\t\tjoinedRoomIds.next( roomIds );\n\t\t} );\n\n\t\tcombineLatest( this.joinedRoomIds, this.allRooms, ( roomIds, rooms ) => {\n\t\t\tconst joinedRooms = rooms.filter( r => roomIds.includes( r.roomId ) ),\n\t\t\t\tcurrentRoom = this.currentRoom.getValue();\n\t\t\tif( currentRoom ) {\n\t\t\t\tthis.currentRoom.next( joinedRooms.filter( j => j.roomId === currentRoom.roomId )[ 0 ] || null );\n\t\t\t}\n\t\t\treturn joinedRooms;\n\t\t} )\n\t\t.subscribe( joinedRooms => {\n\t\t\tthis.joinedRooms.next( joinedRooms );\n\t\t} );\n\n\t\tsessionService.getEvents<Message>( 'message' )\n\t\t.subscribe( message => {\n\t\t\tconst { allMessages } = this;\n\t\t\tallMessages.next( message );\n\t\t} );\n\t}\n\n\tpublic getRooms() {\n\t\tconst { allRooms, scheduler } = this;\n\t\treturn allRooms.pipe( observeOn( scheduler ) ) as Observable<Room[]>;\n\t}\n\n\tpublic async sendMessage( roomId: string, message: string ) {\n\t\tconst { sessionService } = this;\n\t\tawait sessionService.emit( 'sendMessage', { roomId, message } );\n\t}\n\n\tpublic getMessages() {\n\t\tconst { allMessages, scheduler } = this;\n\t\treturn allMessages\n\t\t.pipe(\n\t\t\tdistinctUntilChanged(),\n\t\t\tscan<Message>( ( arr, val ) => ( [ ...arr, val ] ), [] ),\n\t\t\tobserveOn( scheduler )\n\t\t);\n\t}\n\n\tpublic getJoinedRooms() {\n\t\tconst { joinedRooms, scheduler } = this;\n\t\treturn joinedRooms.pipe(\n\t\t\tdistinctUntilChanged(),\n\t\t\tobserveOn( scheduler )\n\t\t);\n\t}\n\n\tpublic async joinRoom( room: Room, password: string ) {\n\t\tconst { sessionService, currentRoom } = this,\n\t\t\t{ roomId } = room;\n\t\tawait sessionService.emit<Room>( 'joinRoom', { roomId, password } );\n\t\tcurrentRoom.next( room );\n\t}\n\n\tpublic async leaveRoom( roomId: string ) {\n\t\tconst { sessionService } = this;\n\t\tawait sessionService.emit( 'leaveRoom', { roomId } );\n\t}\n\n\tpublic async createRoom( name: string, password: string ) {\n\t\tconst { currentRoom, sessionService } = this;\n\t\tconst room = await sessionService.emit<Room>( 'createRoom', { name, password } );\n\t\tcurrentRoom.next( room );\n\t\treturn room;\n\t}\n\n\tpublic async setRoom( room: Room|void ) {\n\t\tconst { currentRoom } = this;\n\t\tif( room ) {\n\t\t\tconst { roomId } = room,\n\t\t\t\tjoinedRooms = this.joinedRooms.getValue();\n\t\t\tif( !joinedRooms.some( r => r.roomId === roomId ) ) {\n\t\t\t\tthrow new Error( 'Room is not joined.' );\n\t\t\t}\n\t\t\tcurrentRoom.next( room );\n\t\t} else {\n\t\t\tcurrentRoom.next( null );\n\t\t}\n\t}\n\n\tpublic getCurrentRoom() {\n\t\tconst { currentRoom, scheduler } = this;\n\t\treturn currentRoom.pipe(\n\t\t\tdistinctUntilChanged(),\n\t\t\tobserveOn( scheduler )\n\t\t);\n\t}\n\n\tprivate readonly allMessages = new ReplaySubject<Message>( 10 );\n\tprivate readonly allRooms = new BehaviorSubject<Room[]>( [] );\n\tprivate readonly joinedRoomIds = new BehaviorSubject<string[]>( [] );\n\tprivate readonly joinedRooms = new BehaviorSubject<Room[]>( [] );\n\tprivate readonly currentRoom = new BehaviorSubject<Room|null>( null );\n}\n","/**\n * @fileoverview This file was generated by the Angular template compiler. Do not edit.\n *\n * @suppress {suspiciousCode,uselessCode,missingProperties,missingOverride,checkTypes}\n * tslint:disable\n */\nimport * as i0 from \"./create-room.component.scss.shim.ngstyle\";\nimport * as i1 from \"@angular/core\";\nimport * as i2 from \"ngx-bootstrap/modal/modal.directive\";\nimport * as i3 from \"ngx-bootstrap/component-loader/component-loader.factory\";\nimport * as i4 from \"./header.component.ngfactory\";\nimport * as i5 from \"./header.component\";\nimport * as i6 from \"@angular/forms\";\nimport * as i7 from \"../../../node_modules/@fortawesome/angular-fontawesome/angular-fontawesome.ngfactory\";\nimport * as i8 from \"@fortawesome/angular-fontawesome\";\nimport * as i9 from \"@angular/platform-browser\";\nimport * as i10 from \"./create-room.component\";\nimport * as i11 from \"../room.service\";\nvar styles_ModalCreateRoomComponent = [i0.styles];\nvar RenderType_ModalCreateRoomComponent = i1.ɵcrt({\n  encapsulation: 0,\n  styles: styles_ModalCreateRoomComponent,\n  data: {}\n});\nexport { RenderType_ModalCreateRoomComponent };\nexport function View_ModalCreateRoomComponent_0(_l) {\n  return i1.ɵvid(0, [i1.ɵqud(402653184, 1, {\n    createRoomModal: 0\n  }), (_l()(), i1.ɵeld(1, 16777216, null, null, 40, \"div\", [[\"aria-hidden\", \"true\"], [\"bsModal\", \"\"], [\"class\", \"modal fade\"], [\"role\", \"dialog\"], [\"tabindex\", \"-1\"]], null, [[null, \"onHidden\"], [null, \"onShown\"], [null, \"click\"], [null, \"keydown.esc\"]], function (_v, en, $event) {\n    var ad = true;\n    var _co = _v.component;\n\n    if (\"click\" === en) {\n      var pd_0 = i1.ɵnov(_v, 2).onClick($event) !== false;\n      ad = pd_0 && ad;\n    }\n\n    if (\"keydown.esc\" === en) {\n      var pd_1 = i1.ɵnov(_v, 2).onEsc($event) !== false;\n      ad = pd_1 && ad;\n    }\n\n    if (\"onHidden\" === en) {\n      _co.roomName = \"\";\n      var pd_2 = (_co.password = \"\") !== false;\n      ad = pd_2 && ad;\n    }\n\n    if (\"onShown\" === en) {\n      var pd_3 = i1.ɵnov(_v, 20).focus() !== false;\n      ad = pd_3 && ad;\n    }\n\n    return ad;\n  }, null, null)), i1.ɵdid(2, 212992, [[1, 4], [\"createRoomModal\", 4]], 0, i2.ModalDirective, [i1.ElementRef, i1.ViewContainerRef, i1.Renderer2, i3.ComponentLoaderFactory], null, {\n    onShown: \"onShown\",\n    onHidden: \"onHidden\"\n  }), (_l()(), i1.ɵeld(3, 0, null, null, 38, \"div\", [[\"class\", \"modal-dialog modal-lg\"]], null, null, null, null, null)), (_l()(), i1.ɵeld(4, 0, null, null, 37, \"div\", [[\"class\", \"modal-content\"]], null, null, null, null, null)), (_l()(), i1.ɵeld(5, 0, null, null, 2, \"modal-header\", [], null, [[null, \"closeClick\"]], function (_v, en, $event) {\n    var ad = true;\n\n    if (\"closeClick\" === en) {\n      var pd_0 = i1.ɵnov(_v, 2).hide() !== false;\n      ad = pd_0 && ad;\n    }\n\n    return ad;\n  }, i4.View_ModalHeaderComponent_0, i4.RenderType_ModalHeaderComponent)), i1.ɵdid(6, 49152, null, 0, i5.ModalHeaderComponent, [], null, {\n    closeClick: \"closeClick\"\n  }), (_l()(), i1.ɵted(-1, 0, [\" Create Room \"])), (_l()(), i1.ɵeld(8, 0, null, null, 33, \"div\", [[\"class\", \"modal-body\"]], null, null, null, null, null)), (_l()(), i1.ɵeld(9, 0, null, null, 32, \"form\", [[\"autocomplete\", \"off\"], [\"class\", \"clearfix\"], [\"novalidate\", \"\"]], [[2, \"ng-untouched\", null], [2, \"ng-touched\", null], [2, \"ng-pristine\", null], [2, \"ng-dirty\", null], [2, \"ng-valid\", null], [2, \"ng-invalid\", null], [2, \"ng-pending\", null]], [[null, \"ngSubmit\"], [null, \"submit\"], [null, \"reset\"]], function (_v, en, $event) {\n    var ad = true;\n    var _co = _v.component;\n\n    if (\"submit\" === en) {\n      var pd_0 = i1.ɵnov(_v, 11).onSubmit($event) !== false;\n      ad = pd_0 && ad;\n    }\n\n    if (\"reset\" === en) {\n      var pd_1 = i1.ɵnov(_v, 11).onReset() !== false;\n      ad = pd_1 && ad;\n    }\n\n    if (\"ngSubmit\" === en) {\n      var pd_2 = _co.createRoom() !== false;\n      ad = pd_2 && ad;\n    }\n\n    return ad;\n  }, null, null)), i1.ɵdid(10, 16384, null, 0, i6.ɵangular_packages_forms_forms_bg, [], null, null), i1.ɵdid(11, 4210688, [[\"createRoomForm\", 4]], 0, i6.NgForm, [[8, null], [8, null]], null, {\n    ngSubmit: \"ngSubmit\"\n  }), i1.ɵprd(2048, null, i6.ControlContainer, null, [i6.NgForm]), i1.ɵdid(13, 16384, null, 0, i6.NgControlStatusGroup, [[4, i6.ControlContainer]], null, null), (_l()(), i1.ɵeld(14, 0, null, null, 13, \"div\", [[\"class\", \"form-group\"]], null, null, null, null, null)), (_l()(), i1.ɵeld(15, 0, null, null, 12, \"div\", [[\"class\", \"input-group mb-2\"]], null, null, null, null, null)), (_l()(), i1.ɵeld(16, 0, null, null, 3, \"div\", [[\"class\", \"input-group-prepend\"]], null, null, null, null, null)), (_l()(), i1.ɵeld(17, 0, null, null, 2, \"div\", [[\"class\", \"input-group-text\"]], null, null, null, null, null)), (_l()(), i1.ɵeld(18, 0, null, null, 1, \"fa-icon\", [[\"class\", \"ng-fa-icon\"], [\"icon\", \"door-open\"]], [[8, \"innerHTML\", 1]], null, null, i7.View_FaIconComponent_0, i7.RenderType_FaIconComponent)), i1.ɵdid(19, 573440, null, 0, i8.FaIconComponent, [i9.DomSanitizer], {\n    iconProp: [0, \"iconProp\"]\n  }, null), (_l()(), i1.ɵeld(20, 0, [[\"roomNameText\", 1]], null, 7, \"input\", [[\"autocomplete\", \"off\"], [\"class\", \"form-control\"], [\"name\", \"room-name\"], [\"placeholder\", \"Room Name\"], [\"required\", \"required\"], [\"type\", \"text\"]], [[1, \"required\", 0], [2, \"ng-untouched\", null], [2, \"ng-touched\", null], [2, \"ng-pristine\", null], [2, \"ng-dirty\", null], [2, \"ng-valid\", null], [2, \"ng-invalid\", null], [2, \"ng-pending\", null]], [[null, \"ngModelChange\"], [null, \"input\"], [null, \"blur\"], [null, \"compositionstart\"], [null, \"compositionend\"]], function (_v, en, $event) {\n    var ad = true;\n    var _co = _v.component;\n\n    if (\"input\" === en) {\n      var pd_0 = i1.ɵnov(_v, 21)._handleInput($event.target.value) !== false;\n      ad = pd_0 && ad;\n    }\n\n    if (\"blur\" === en) {\n      var pd_1 = i1.ɵnov(_v, 21).onTouched() !== false;\n      ad = pd_1 && ad;\n    }\n\n    if (\"compositionstart\" === en) {\n      var pd_2 = i1.ɵnov(_v, 21)._compositionStart() !== false;\n      ad = pd_2 && ad;\n    }\n\n    if (\"compositionend\" === en) {\n      var pd_3 = i1.ɵnov(_v, 21)._compositionEnd($event.target.value) !== false;\n      ad = pd_3 && ad;\n    }\n\n    if (\"ngModelChange\" === en) {\n      var pd_4 = (_co.roomName = $event) !== false;\n      ad = pd_4 && ad;\n    }\n\n    return ad;\n  }, null, null)), i1.ɵdid(21, 16384, null, 0, i6.DefaultValueAccessor, [i1.Renderer2, i1.ElementRef, [2, i6.COMPOSITION_BUFFER_MODE]], null, null), i1.ɵdid(22, 16384, null, 0, i6.RequiredValidator, [], {\n    required: [0, \"required\"]\n  }, null), i1.ɵprd(1024, null, i6.NG_VALIDATORS, function (p0_0) {\n    return [p0_0];\n  }, [i6.RequiredValidator]), i1.ɵprd(1024, null, i6.NG_VALUE_ACCESSOR, function (p0_0) {\n    return [p0_0];\n  }, [i6.DefaultValueAccessor]), i1.ɵdid(25, 671744, null, 0, i6.NgModel, [[2, i6.ControlContainer], [6, i6.NG_VALIDATORS], [8, null], [6, i6.NG_VALUE_ACCESSOR]], {\n    name: [0, \"name\"],\n    model: [1, \"model\"]\n  }, {\n    update: \"ngModelChange\"\n  }), i1.ɵprd(2048, null, i6.NgControl, null, [i6.NgModel]), i1.ɵdid(27, 16384, null, 0, i6.NgControlStatus, [[4, i6.NgControl]], null, null), (_l()(), i1.ɵeld(28, 0, null, null, 11, \"div\", [[\"class\", \"form-group\"]], null, null, null, null, null)), (_l()(), i1.ɵeld(29, 0, null, null, 10, \"div\", [[\"class\", \"input-group mb-2\"]], null, null, null, null, null)), (_l()(), i1.ɵeld(30, 0, null, null, 3, \"div\", [[\"class\", \"input-group-prepend\"]], null, null, null, null, null)), (_l()(), i1.ɵeld(31, 0, null, null, 2, \"div\", [[\"class\", \"input-group-text\"]], null, null, null, null, null)), (_l()(), i1.ɵeld(32, 0, null, null, 1, \"fa-icon\", [[\"class\", \"ng-fa-icon\"], [\"icon\", \"lock\"]], [[8, \"innerHTML\", 1]], null, null, i7.View_FaIconComponent_0, i7.RenderType_FaIconComponent)), i1.ɵdid(33, 573440, null, 0, i8.FaIconComponent, [i9.DomSanitizer], {\n    iconProp: [0, \"iconProp\"]\n  }, null), (_l()(), i1.ɵeld(34, 0, null, null, 5, \"input\", [[\"autocomplete\", \"off\"], [\"class\", \"form-control\"], [\"name\", \"room-password\"], [\"placeholder\", \"Password (optional)\"], [\"type\", \"password\"]], [[2, \"ng-untouched\", null], [2, \"ng-touched\", null], [2, \"ng-pristine\", null], [2, \"ng-dirty\", null], [2, \"ng-valid\", null], [2, \"ng-invalid\", null], [2, \"ng-pending\", null]], [[null, \"ngModelChange\"], [null, \"input\"], [null, \"blur\"], [null, \"compositionstart\"], [null, \"compositionend\"]], function (_v, en, $event) {\n    var ad = true;\n    var _co = _v.component;\n\n    if (\"input\" === en) {\n      var pd_0 = i1.ɵnov(_v, 35)._handleInput($event.target.value) !== false;\n      ad = pd_0 && ad;\n    }\n\n    if (\"blur\" === en) {\n      var pd_1 = i1.ɵnov(_v, 35).onTouched() !== false;\n      ad = pd_1 && ad;\n    }\n\n    if (\"compositionstart\" === en) {\n      var pd_2 = i1.ɵnov(_v, 35)._compositionStart() !== false;\n      ad = pd_2 && ad;\n    }\n\n    if (\"compositionend\" === en) {\n      var pd_3 = i1.ɵnov(_v, 35)._compositionEnd($event.target.value) !== false;\n      ad = pd_3 && ad;\n    }\n\n    if (\"ngModelChange\" === en) {\n      var pd_4 = (_co.password = $event) !== false;\n      ad = pd_4 && ad;\n    }\n\n    return ad;\n  }, null, null)), i1.ɵdid(35, 16384, null, 0, i6.DefaultValueAccessor, [i1.Renderer2, i1.ElementRef, [2, i6.COMPOSITION_BUFFER_MODE]], null, null), i1.ɵprd(1024, null, i6.NG_VALUE_ACCESSOR, function (p0_0) {\n    return [p0_0];\n  }, [i6.DefaultValueAccessor]), i1.ɵdid(37, 671744, null, 0, i6.NgModel, [[2, i6.ControlContainer], [8, null], [8, null], [6, i6.NG_VALUE_ACCESSOR]], {\n    name: [0, \"name\"],\n    model: [1, \"model\"]\n  }, {\n    update: \"ngModelChange\"\n  }), i1.ɵprd(2048, null, i6.NgControl, null, [i6.NgModel]), i1.ɵdid(39, 16384, null, 0, i6.NgControlStatus, [[4, i6.NgControl]], null, null), (_l()(), i1.ɵeld(40, 0, null, null, 1, \"button\", [[\"class\", \"btn float-right\"]], [[8, \"disabled\", 0]], null, null, null, null)), (_l()(), i1.ɵted(-1, null, [\" Create \"]))], function (_ck, _v) {\n    var _co = _v.component;\n\n    _ck(_v, 2, 0);\n\n    var currVal_8 = \"door-open\";\n\n    _ck(_v, 19, 0, currVal_8);\n\n    var currVal_17 = \"required\";\n\n    _ck(_v, 22, 0, currVal_17);\n\n    var currVal_18 = \"room-name\";\n    var currVal_19 = _co.roomName;\n\n    _ck(_v, 25, 0, currVal_18, currVal_19);\n\n    var currVal_21 = \"lock\";\n\n    _ck(_v, 33, 0, currVal_21);\n\n    var currVal_29 = \"room-password\";\n    var currVal_30 = _co.password;\n\n    _ck(_v, 37, 0, currVal_29, currVal_30);\n  }, function (_ck, _v) {\n    var currVal_0 = i1.ɵnov(_v, 13).ngClassUntouched;\n    var currVal_1 = i1.ɵnov(_v, 13).ngClassTouched;\n    var currVal_2 = i1.ɵnov(_v, 13).ngClassPristine;\n    var currVal_3 = i1.ɵnov(_v, 13).ngClassDirty;\n    var currVal_4 = i1.ɵnov(_v, 13).ngClassValid;\n    var currVal_5 = i1.ɵnov(_v, 13).ngClassInvalid;\n    var currVal_6 = i1.ɵnov(_v, 13).ngClassPending;\n\n    _ck(_v, 9, 0, currVal_0, currVal_1, currVal_2, currVal_3, currVal_4, currVal_5, currVal_6);\n\n    var currVal_7 = i1.ɵnov(_v, 19).renderedIconHTML;\n\n    _ck(_v, 18, 0, currVal_7);\n\n    var currVal_9 = i1.ɵnov(_v, 22).required ? \"\" : null;\n    var currVal_10 = i1.ɵnov(_v, 27).ngClassUntouched;\n    var currVal_11 = i1.ɵnov(_v, 27).ngClassTouched;\n    var currVal_12 = i1.ɵnov(_v, 27).ngClassPristine;\n    var currVal_13 = i1.ɵnov(_v, 27).ngClassDirty;\n    var currVal_14 = i1.ɵnov(_v, 27).ngClassValid;\n    var currVal_15 = i1.ɵnov(_v, 27).ngClassInvalid;\n    var currVal_16 = i1.ɵnov(_v, 27).ngClassPending;\n\n    _ck(_v, 20, 0, currVal_9, currVal_10, currVal_11, currVal_12, currVal_13, currVal_14, currVal_15, currVal_16);\n\n    var currVal_20 = i1.ɵnov(_v, 33).renderedIconHTML;\n\n    _ck(_v, 32, 0, currVal_20);\n\n    var currVal_22 = i1.ɵnov(_v, 39).ngClassUntouched;\n    var currVal_23 = i1.ɵnov(_v, 39).ngClassTouched;\n    var currVal_24 = i1.ɵnov(_v, 39).ngClassPristine;\n    var currVal_25 = i1.ɵnov(_v, 39).ngClassDirty;\n    var currVal_26 = i1.ɵnov(_v, 39).ngClassValid;\n    var currVal_27 = i1.ɵnov(_v, 39).ngClassInvalid;\n    var currVal_28 = i1.ɵnov(_v, 39).ngClassPending;\n\n    _ck(_v, 34, 0, currVal_22, currVal_23, currVal_24, currVal_25, currVal_26, currVal_27, currVal_28);\n\n    var currVal_31 = !i1.ɵnov(_v, 11).form.valid;\n\n    _ck(_v, 40, 0, currVal_31);\n  });\n}\nexport function View_ModalCreateRoomComponent_Host_0(_l) {\n  return i1.ɵvid(0, [(_l()(), i1.ɵeld(0, 0, null, null, 1, \"modal-create-room\", [], null, null, null, View_ModalCreateRoomComponent_0, RenderType_ModalCreateRoomComponent)), i1.ɵdid(1, 49152, null, 0, i10.ModalCreateRoomComponent, [i11.RoomService], null, null)], null, null);\n}\nvar ModalCreateRoomComponentNgFactory = i1.ɵccf(\"modal-create-room\", i10.ModalCreateRoomComponent, View_ModalCreateRoomComponent_Host_0, {}, {}, []);\nexport { ModalCreateRoomComponentNgFactory };","/**\n * @fileoverview This file was generated by the Angular template compiler. Do not edit.\n *\n * @suppress {suspiciousCode,uselessCode,missingProperties,missingOverride,checkTypes}\n * tslint:disable\n */\nvar styles = [\"\"];\nexport { styles };","<div bsModal #createRoomModal=\"bs-modal\" (onHidden)=\"roomName = ''; password = '';\" (onShown)=\"roomNameText.focus();\" class=\"modal fade\" tabindex=\"-1\" role=\"dialog\" aria-hidden=\"true\"> <div class=\"modal-dialog modal-lg\"> <div class=\"modal-content\"> <modal-header (closeClick)=\"createRoomModal.hide()\"> Create Room </modal-header> <div class=\"modal-body\"> <form (ngSubmit)=\"createRoom()\" class=\"clearfix\" #createRoomForm=\"ngForm\" autocomplete=\"off\"> <div class=\"form-group\"> <div class=\"input-group mb-2\"> <div class=\"input-group-prepend\"> <div class=\"input-group-text\"> <fa-icon icon=\"door-open\"></fa-icon> </div> </div> <input type=\"text\" class=\"form-control\" placeholder=\"Room Name\" required=\"required\" [(ngModel)]=\"roomName\" #roomNameText name=\"room-name\" autocomplete=\"off\"/> </div> </div> <div class=\"form-group\"> <div class=\"input-group mb-2\"> <div class=\"input-group-prepend\"> <div class=\"input-group-text\"> <fa-icon icon=\"lock\"></fa-icon> </div> </div> <input type=\"password\" class=\"form-control\" placeholder=\"Password (optional)\" [(ngModel)]=\"password\" name=\"room-password\" autocomplete=\"off\"/> </div> </div> <button class=\"btn float-right\" [disabled]=\"!createRoomForm.form.valid\"> Create </button> </form> </div> </div> </div> </div> ","import { Component, NgZone, ViewChild } from '@angular/core';\nimport { RoomService } from 'client/room.service';\nimport { ModalDirective } from 'ngx-bootstrap';\n\n@Component( {\n\tselector: 'modal-join-room',\n\ttemplateUrl: 'join-room.component.html',\n\tstyleUrls: [ './join-room.component.scss' ]\n} )\nexport class ModalJoinRoomComponent {\n\tconstructor(\n\t\tprivate readonly roomService: RoomService,\n\t\tprivate readonly zone: NgZone\n\t) {}\n\n\t@ViewChild( 'joinRoomModal' )\n\tprotected joinRoomModal: ModalDirective;\n\n\tpublic show( room: Room ) {\n\t\tconst { joinRoomModal, zone } = this;\n\t\tzone.run( () => {\n\t\t\tthis.room = room;\n\t\t\tjoinRoomModal.show();\n\t\t} );\n\t}\n\n\tpublic hide() {\n\t\tconst { joinRoomModal, zone } = this;\n\t\tzone.run( () => {\n\t\t\tthis.room = null;\n\t\t\tjoinRoomModal.hide();\n\t\t} );\n\t}\n\n\tpublic room: Room|null;\n\tpublic password = '';\n\n\tpublic async joinRoom() {\n\t\tconst { roomService, room, password } = this;\n\t\tthis.hide();\n\t\tawait roomService.joinRoom( room, password );\n\t}\n}\n","/**\n * @fileoverview This file was generated by the Angular template compiler. Do not edit.\n *\n * @suppress {suspiciousCode,uselessCode,missingProperties,missingOverride,checkTypes}\n * tslint:disable\n */\nimport * as i0 from \"./join-room.component.scss.shim.ngstyle\";\nimport * as i1 from \"@angular/core\";\nimport * as i2 from \"ngx-bootstrap/modal/modal.directive\";\nimport * as i3 from \"ngx-bootstrap/component-loader/component-loader.factory\";\nimport * as i4 from \"./header.component.ngfactory\";\nimport * as i5 from \"./header.component\";\nimport * as i6 from \"@angular/forms\";\nimport * as i7 from \"../../../node_modules/@fortawesome/angular-fontawesome/angular-fontawesome.ngfactory\";\nimport * as i8 from \"@fortawesome/angular-fontawesome\";\nimport * as i9 from \"@angular/platform-browser\";\nimport * as i10 from \"./join-room.component\";\nimport * as i11 from \"../room.service\";\nvar styles_ModalJoinRoomComponent = [i0.styles];\nvar RenderType_ModalJoinRoomComponent = i1.ɵcrt({\n  encapsulation: 0,\n  styles: styles_ModalJoinRoomComponent,\n  data: {}\n});\nexport { RenderType_ModalJoinRoomComponent };\nexport function View_ModalJoinRoomComponent_0(_l) {\n  return i1.ɵvid(0, [i1.ɵqud(402653184, 1, {\n    joinRoomModal: 0\n  }), (_l()(), i1.ɵeld(1, 16777216, null, null, 40, \"div\", [[\"aria-hidden\", \"true\"], [\"bsModal\", \"\"], [\"class\", \"modal fade\"], [\"role\", \"dialog\"], [\"tabindex\", \"-1\"]], null, [[null, \"onHidden\"], [null, \"onShown\"], [null, \"click\"], [null, \"keydown.esc\"]], function (_v, en, $event) {\n    var ad = true;\n    var _co = _v.component;\n\n    if (\"click\" === en) {\n      var pd_0 = i1.ɵnov(_v, 2).onClick($event) !== false;\n      ad = pd_0 && ad;\n    }\n\n    if (\"keydown.esc\" === en) {\n      var pd_1 = i1.ɵnov(_v, 2).onEsc($event) !== false;\n      ad = pd_1 && ad;\n    }\n\n    if (\"onHidden\" === en) {\n      var pd_2 = (_co.password = \"\") !== false;\n      ad = pd_2 && ad;\n    }\n\n    if (\"onShown\" === en) {\n      var pd_3 = i1.ɵnov(_v, 32).focus() !== false;\n      ad = pd_3 && ad;\n    }\n\n    return ad;\n  }, null, null)), i1.ɵdid(2, 212992, [[1, 4], [\"joinRoomModal\", 4]], 0, i2.ModalDirective, [i1.ElementRef, i1.ViewContainerRef, i1.Renderer2, i3.ComponentLoaderFactory], null, {\n    onShown: \"onShown\",\n    onHidden: \"onHidden\"\n  }), (_l()(), i1.ɵeld(3, 0, null, null, 38, \"div\", [[\"class\", \"modal-dialog modal-lg\"]], null, null, null, null, null)), (_l()(), i1.ɵeld(4, 0, null, null, 37, \"div\", [[\"class\", \"modal-content\"]], null, null, null, null, null)), (_l()(), i1.ɵeld(5, 0, null, null, 2, \"modal-header\", [], null, [[null, \"closeClick\"]], function (_v, en, $event) {\n    var ad = true;\n\n    if (\"closeClick\" === en) {\n      var pd_0 = i1.ɵnov(_v, 2).hide() !== false;\n      ad = pd_0 && ad;\n    }\n\n    return ad;\n  }, i4.View_ModalHeaderComponent_0, i4.RenderType_ModalHeaderComponent)), i1.ɵdid(6, 49152, null, 0, i5.ModalHeaderComponent, [], null, {\n    closeClick: \"closeClick\"\n  }), (_l()(), i1.ɵted(-1, 0, [\" Join Room \"])), (_l()(), i1.ɵeld(8, 0, null, null, 33, \"div\", [[\"class\", \"modal-body\"]], null, null, null, null, null)), (_l()(), i1.ɵeld(9, 0, null, null, 32, \"form\", [[\"autocomplete\", \"off\"], [\"class\", \"clearfix\"], [\"novalidate\", \"\"]], [[2, \"ng-untouched\", null], [2, \"ng-touched\", null], [2, \"ng-pristine\", null], [2, \"ng-dirty\", null], [2, \"ng-valid\", null], [2, \"ng-invalid\", null], [2, \"ng-pending\", null]], [[null, \"ngSubmit\"], [null, \"submit\"], [null, \"reset\"]], function (_v, en, $event) {\n    var ad = true;\n    var _co = _v.component;\n\n    if (\"submit\" === en) {\n      var pd_0 = i1.ɵnov(_v, 11).onSubmit($event) !== false;\n      ad = pd_0 && ad;\n    }\n\n    if (\"reset\" === en) {\n      var pd_1 = i1.ɵnov(_v, 11).onReset() !== false;\n      ad = pd_1 && ad;\n    }\n\n    if (\"ngSubmit\" === en) {\n      var pd_2 = _co.joinRoom() !== false;\n      ad = pd_2 && ad;\n    }\n\n    return ad;\n  }, null, null)), i1.ɵdid(10, 16384, null, 0, i6.ɵangular_packages_forms_forms_bg, [], null, null), i1.ɵdid(11, 4210688, [[\"joinRoomForm\", 4]], 0, i6.NgForm, [[8, null], [8, null]], null, {\n    ngSubmit: \"ngSubmit\"\n  }), i1.ɵprd(2048, null, i6.ControlContainer, null, [i6.NgForm]), i1.ɵdid(13, 16384, null, 0, i6.NgControlStatusGroup, [[4, i6.ControlContainer]], null, null), (_l()(), i1.ɵeld(14, 0, null, null, 11, \"div\", [[\"class\", \"form-group\"]], null, null, null, null, null)), (_l()(), i1.ɵeld(15, 0, null, null, 10, \"div\", [[\"class\", \"input-group mb-2\"]], null, null, null, null, null)), (_l()(), i1.ɵeld(16, 0, null, null, 3, \"div\", [[\"class\", \"input-group-prepend\"]], null, null, null, null, null)), (_l()(), i1.ɵeld(17, 0, null, null, 2, \"div\", [[\"class\", \"input-group-text\"]], null, null, null, null, null)), (_l()(), i1.ɵeld(18, 0, null, null, 1, \"fa-icon\", [[\"class\", \"ng-fa-icon\"], [\"icon\", \"door-closed\"]], [[8, \"innerHTML\", 1]], null, null, i7.View_FaIconComponent_0, i7.RenderType_FaIconComponent)), i1.ɵdid(19, 573440, null, 0, i8.FaIconComponent, [i9.DomSanitizer], {\n    iconProp: [0, \"iconProp\"]\n  }, null), (_l()(), i1.ɵeld(20, 0, null, null, 5, \"input\", [[\"autocomplete\", \"off\"], [\"class\", \"form-control\"], [\"name\", \"room-name\"], [\"readonly\", \"readonly\"], [\"type\", \"text\"]], [[2, \"ng-untouched\", null], [2, \"ng-touched\", null], [2, \"ng-pristine\", null], [2, \"ng-dirty\", null], [2, \"ng-valid\", null], [2, \"ng-invalid\", null], [2, \"ng-pending\", null]], [[null, \"input\"], [null, \"blur\"], [null, \"compositionstart\"], [null, \"compositionend\"]], function (_v, en, $event) {\n    var ad = true;\n\n    if (\"input\" === en) {\n      var pd_0 = i1.ɵnov(_v, 21)._handleInput($event.target.value) !== false;\n      ad = pd_0 && ad;\n    }\n\n    if (\"blur\" === en) {\n      var pd_1 = i1.ɵnov(_v, 21).onTouched() !== false;\n      ad = pd_1 && ad;\n    }\n\n    if (\"compositionstart\" === en) {\n      var pd_2 = i1.ɵnov(_v, 21)._compositionStart() !== false;\n      ad = pd_2 && ad;\n    }\n\n    if (\"compositionend\" === en) {\n      var pd_3 = i1.ɵnov(_v, 21)._compositionEnd($event.target.value) !== false;\n      ad = pd_3 && ad;\n    }\n\n    return ad;\n  }, null, null)), i1.ɵdid(21, 16384, null, 0, i6.DefaultValueAccessor, [i1.Renderer2, i1.ElementRef, [2, i6.COMPOSITION_BUFFER_MODE]], null, null), i1.ɵprd(1024, null, i6.NG_VALUE_ACCESSOR, function (p0_0) {\n    return [p0_0];\n  }, [i6.DefaultValueAccessor]), i1.ɵdid(23, 671744, null, 0, i6.NgModel, [[2, i6.ControlContainer], [8, null], [8, null], [6, i6.NG_VALUE_ACCESSOR]], {\n    name: [0, \"name\"],\n    model: [1, \"model\"]\n  }, null), i1.ɵprd(2048, null, i6.NgControl, null, [i6.NgModel]), i1.ɵdid(25, 16384, null, 0, i6.NgControlStatus, [[4, i6.NgControl]], null, null), (_l()(), i1.ɵeld(26, 0, null, null, 13, \"div\", [[\"class\", \"form-group\"]], null, null, null, null, null)), (_l()(), i1.ɵeld(27, 0, null, null, 12, \"div\", [[\"class\", \"input-group mb-2\"]], null, null, null, null, null)), (_l()(), i1.ɵeld(28, 0, null, null, 3, \"div\", [[\"class\", \"input-group-prepend\"]], null, null, null, null, null)), (_l()(), i1.ɵeld(29, 0, null, null, 2, \"div\", [[\"class\", \"input-group-text\"]], null, null, null, null, null)), (_l()(), i1.ɵeld(30, 0, null, null, 1, \"fa-icon\", [[\"class\", \"ng-fa-icon\"], [\"icon\", \"key\"]], [[8, \"innerHTML\", 1]], null, null, i7.View_FaIconComponent_0, i7.RenderType_FaIconComponent)), i1.ɵdid(31, 573440, null, 0, i8.FaIconComponent, [i9.DomSanitizer], {\n    iconProp: [0, \"iconProp\"]\n  }, null), (_l()(), i1.ɵeld(32, 0, [[\"roomPasswordText\", 1]], null, 7, \"input\", [[\"autocomplete\", \"off\"], [\"class\", \"form-control\"], [\"name\", \"room-password\"], [\"placeholder\", \"Password\"], [\"required\", \"required\"], [\"type\", \"password\"]], [[1, \"required\", 0], [2, \"ng-untouched\", null], [2, \"ng-touched\", null], [2, \"ng-pristine\", null], [2, \"ng-dirty\", null], [2, \"ng-valid\", null], [2, \"ng-invalid\", null], [2, \"ng-pending\", null]], [[null, \"ngModelChange\"], [null, \"input\"], [null, \"blur\"], [null, \"compositionstart\"], [null, \"compositionend\"]], function (_v, en, $event) {\n    var ad = true;\n    var _co = _v.component;\n\n    if (\"input\" === en) {\n      var pd_0 = i1.ɵnov(_v, 33)._handleInput($event.target.value) !== false;\n      ad = pd_0 && ad;\n    }\n\n    if (\"blur\" === en) {\n      var pd_1 = i1.ɵnov(_v, 33).onTouched() !== false;\n      ad = pd_1 && ad;\n    }\n\n    if (\"compositionstart\" === en) {\n      var pd_2 = i1.ɵnov(_v, 33)._compositionStart() !== false;\n      ad = pd_2 && ad;\n    }\n\n    if (\"compositionend\" === en) {\n      var pd_3 = i1.ɵnov(_v, 33)._compositionEnd($event.target.value) !== false;\n      ad = pd_3 && ad;\n    }\n\n    if (\"ngModelChange\" === en) {\n      var pd_4 = (_co.password = $event) !== false;\n      ad = pd_4 && ad;\n    }\n\n    return ad;\n  }, null, null)), i1.ɵdid(33, 16384, null, 0, i6.DefaultValueAccessor, [i1.Renderer2, i1.ElementRef, [2, i6.COMPOSITION_BUFFER_MODE]], null, null), i1.ɵdid(34, 16384, null, 0, i6.RequiredValidator, [], {\n    required: [0, \"required\"]\n  }, null), i1.ɵprd(1024, null, i6.NG_VALIDATORS, function (p0_0) {\n    return [p0_0];\n  }, [i6.RequiredValidator]), i1.ɵprd(1024, null, i6.NG_VALUE_ACCESSOR, function (p0_0) {\n    return [p0_0];\n  }, [i6.DefaultValueAccessor]), i1.ɵdid(37, 671744, null, 0, i6.NgModel, [[2, i6.ControlContainer], [6, i6.NG_VALIDATORS], [8, null], [6, i6.NG_VALUE_ACCESSOR]], {\n    name: [0, \"name\"],\n    model: [1, \"model\"]\n  }, {\n    update: \"ngModelChange\"\n  }), i1.ɵprd(2048, null, i6.NgControl, null, [i6.NgModel]), i1.ɵdid(39, 16384, null, 0, i6.NgControlStatus, [[4, i6.NgControl]], null, null), (_l()(), i1.ɵeld(40, 0, null, null, 1, \"button\", [[\"class\", \"btn float-right\"]], [[8, \"disabled\", 0]], null, null, null, null)), (_l()(), i1.ɵted(-1, null, [\" Join \"]))], function (_ck, _v) {\n    var _co = _v.component;\n\n    _ck(_v, 2, 0);\n\n    var currVal_8 = \"door-closed\";\n\n    _ck(_v, 19, 0, currVal_8);\n\n    var currVal_16 = \"room-name\";\n    var currVal_17 = _co.room == null ? null : _co.room.name;\n\n    _ck(_v, 23, 0, currVal_16, currVal_17);\n\n    var currVal_19 = \"key\";\n\n    _ck(_v, 31, 0, currVal_19);\n\n    var currVal_28 = \"required\";\n\n    _ck(_v, 34, 0, currVal_28);\n\n    var currVal_29 = \"room-password\";\n    var currVal_30 = _co.password;\n\n    _ck(_v, 37, 0, currVal_29, currVal_30);\n  }, function (_ck, _v) {\n    var currVal_0 = i1.ɵnov(_v, 13).ngClassUntouched;\n    var currVal_1 = i1.ɵnov(_v, 13).ngClassTouched;\n    var currVal_2 = i1.ɵnov(_v, 13).ngClassPristine;\n    var currVal_3 = i1.ɵnov(_v, 13).ngClassDirty;\n    var currVal_4 = i1.ɵnov(_v, 13).ngClassValid;\n    var currVal_5 = i1.ɵnov(_v, 13).ngClassInvalid;\n    var currVal_6 = i1.ɵnov(_v, 13).ngClassPending;\n\n    _ck(_v, 9, 0, currVal_0, currVal_1, currVal_2, currVal_3, currVal_4, currVal_5, currVal_6);\n\n    var currVal_7 = i1.ɵnov(_v, 19).renderedIconHTML;\n\n    _ck(_v, 18, 0, currVal_7);\n\n    var currVal_9 = i1.ɵnov(_v, 25).ngClassUntouched;\n    var currVal_10 = i1.ɵnov(_v, 25).ngClassTouched;\n    var currVal_11 = i1.ɵnov(_v, 25).ngClassPristine;\n    var currVal_12 = i1.ɵnov(_v, 25).ngClassDirty;\n    var currVal_13 = i1.ɵnov(_v, 25).ngClassValid;\n    var currVal_14 = i1.ɵnov(_v, 25).ngClassInvalid;\n    var currVal_15 = i1.ɵnov(_v, 25).ngClassPending;\n\n    _ck(_v, 20, 0, currVal_9, currVal_10, currVal_11, currVal_12, currVal_13, currVal_14, currVal_15);\n\n    var currVal_18 = i1.ɵnov(_v, 31).renderedIconHTML;\n\n    _ck(_v, 30, 0, currVal_18);\n\n    var currVal_20 = i1.ɵnov(_v, 34).required ? \"\" : null;\n    var currVal_21 = i1.ɵnov(_v, 39).ngClassUntouched;\n    var currVal_22 = i1.ɵnov(_v, 39).ngClassTouched;\n    var currVal_23 = i1.ɵnov(_v, 39).ngClassPristine;\n    var currVal_24 = i1.ɵnov(_v, 39).ngClassDirty;\n    var currVal_25 = i1.ɵnov(_v, 39).ngClassValid;\n    var currVal_26 = i1.ɵnov(_v, 39).ngClassInvalid;\n    var currVal_27 = i1.ɵnov(_v, 39).ngClassPending;\n\n    _ck(_v, 32, 0, currVal_20, currVal_21, currVal_22, currVal_23, currVal_24, currVal_25, currVal_26, currVal_27);\n\n    var currVal_31 = !i1.ɵnov(_v, 11).form.valid;\n\n    _ck(_v, 40, 0, currVal_31);\n  });\n}\nexport function View_ModalJoinRoomComponent_Host_0(_l) {\n  return i1.ɵvid(0, [(_l()(), i1.ɵeld(0, 0, null, null, 1, \"modal-join-room\", [], null, null, null, View_ModalJoinRoomComponent_0, RenderType_ModalJoinRoomComponent)), i1.ɵdid(1, 49152, null, 0, i10.ModalJoinRoomComponent, [i11.RoomService, i1.NgZone], null, null)], null, null);\n}\nvar ModalJoinRoomComponentNgFactory = i1.ɵccf(\"modal-join-room\", i10.ModalJoinRoomComponent, View_ModalJoinRoomComponent_Host_0, {}, {}, []);\nexport { ModalJoinRoomComponentNgFactory };","/**\n * @fileoverview This file was generated by the Angular template compiler. Do not edit.\n *\n * @suppress {suspiciousCode,uselessCode,missingProperties,missingOverride,checkTypes}\n * tslint:disable\n */\nvar styles = [\"\"];\nexport { styles };","<div bsModal #joinRoomModal=\"bs-modal\" (onHidden)=\"password = '';\" (onShown)=\"roomPasswordText.focus();\" class=\"modal fade\" tabindex=\"-1\" role=\"dialog\" aria-hidden=\"true\"> <div class=\"modal-dialog modal-lg\"> <div class=\"modal-content\"> <modal-header (closeClick)=\"joinRoomModal.hide()\"> Join Room </modal-header> <div class=\"modal-body\"> <form (ngSubmit)=\"joinRoom()\" class=\"clearfix\" #joinRoomForm=\"ngForm\" autocomplete=\"off\"> <div class=\"form-group\"> <div class=\"input-group mb-2\"> <div class=\"input-group-prepend\"> <div class=\"input-group-text\"> <fa-icon icon=\"door-closed\"></fa-icon> </div> </div> <input type=\"text\" class=\"form-control\" [ngModel]=\"room?.name\" name=\"room-name\" readonly=\"readonly\" autocomplete=\"off\"/> </div> </div> <div class=\"form-group\"> <div class=\"input-group mb-2\"> <div class=\"input-group-prepend\"> <div class=\"input-group-text\"> <fa-icon icon=\"key\"></fa-icon> </div> </div> <input type=\"password\" class=\"form-control\" placeholder=\"Password\" required=\"required\" #roomPasswordText [(ngModel)]=\"password\" name=\"room-password\" autocomplete=\"off\"/> </div> </div> <button class=\"btn float-right\" [disabled]=\"!joinRoomForm.form.valid\"> Join </button> </form> </div> </div> </div> </div> ","import { Component, ViewChild, NgZone, OnInit, OnDestroy } from '@angular/core';\nimport { Subject } from 'rxjs';\nimport { take, takeUntil } from 'rxjs/operators';\nimport { RoomService } from './room.service';\nimport { ModalCreateRoomComponent } from './modal/create-room.component';\nimport { ModalJoinRoomComponent } from './modal/join-room.component';\n\n@Component( {\n\tselector: 'lobby',\n\ttemplateUrl: './lobby.component.html',\n\tstyleUrls: [ './lobby.component.scss' ]\n} )\nexport class LobbyComponent implements OnInit, OnDestroy {\n\tconstructor(\n\t\tprivate readonly roomService: RoomService\n\t) {}\n\n\t@ViewChild( 'createRoomModal' )\n\tpublic createRoomModal: ModalCreateRoomComponent;\n\n\t@ViewChild( 'joinRoomModal' )\n\tpublic joinRoomModal: ModalJoinRoomComponent;\n\n\tpublic ngOnInit() {\n\t\tconst { destroyed, roomService } = this;\n\t\troomService.getRooms()\n\t\t.pipe( takeUntil( destroyed ) )\n\t\t.subscribe( rooms => {\n\t\t\tthis.rooms = rooms;\n\t\t} );\n\t}\n\n\tpublic ngOnDestroy() {\n\t\tthis.destroyed.next( true );\n\t\tthis.destroyed.complete();\n\t}\n\n\tpublic rooms = [] as Room[];\n\n\tpublic async joinRoom( room: Room ) {\n\t\tconst { roomService } = this;\n\t\tconst joinedRooms = await roomService.getJoinedRooms().pipe( take( 1 ) ).toPromise();\n\t\tif( joinedRooms.some( r => r.roomId === room.roomId ) ) {\n\t\t\tawait roomService.setRoom( room );\n\t\t} else if( room.hasPassword ) {\n\t\t\tthis.joinRoomModal.show( room );\n\t\t} else {\n\t\t\tawait roomService.joinRoom( room, '' );\n\t\t}\n\t}\n\n\tprivate readonly destroyed = new Subject<true>();\n}\n","/**\n * @fileoverview This file was generated by the Angular template compiler. Do not edit.\n *\n * @suppress {suspiciousCode,uselessCode,missingProperties,missingOverride,checkTypes}\n * tslint:disable\n */\nimport * as i0 from \"./lobby.component.scss.shim.ngstyle\";\nimport * as i1 from \"@angular/core\";\nimport * as i2 from \"../../node_modules/@fortawesome/angular-fontawesome/angular-fontawesome.ngfactory\";\nimport * as i3 from \"@fortawesome/angular-fontawesome\";\nimport * as i4 from \"@angular/platform-browser\";\nimport * as i5 from \"@angular/common\";\nimport * as i6 from \"./modal/create-room.component.ngfactory\";\nimport * as i7 from \"./modal/create-room.component\";\nimport * as i8 from \"./room.service\";\nimport * as i9 from \"./modal/join-room.component.ngfactory\";\nimport * as i10 from \"./modal/join-room.component\";\nimport * as i11 from \"./lobby.component\";\nvar styles_LobbyComponent = [i0.styles];\nvar RenderType_LobbyComponent = i1.ɵcrt({\n  encapsulation: 0,\n  styles: styles_LobbyComponent,\n  data: {}\n});\nexport { RenderType_LobbyComponent };\n\nfunction View_LobbyComponent_1(_l) {\n  return i1.ɵvid(0, [(_l()(), i1.ɵeld(0, 0, null, null, 4, \"div\", [[\"class\", \"list-group-item\"]], null, null, null, null, null)), (_l()(), i1.ɵted(-1, null, [\" There are no rooms. Would you like to \"])), (_l()(), i1.ɵeld(2, 0, null, null, 1, \"a\", [[\"href\", \"javascript:\"]], null, [[null, \"click\"]], function (_v, en, $event) {\n    var ad = true;\n\n    if (\"click\" === en) {\n      var pd_0 = i1.ɵnov(_v.parent, 13).show() !== false;\n      ad = pd_0 && ad;\n    }\n\n    return ad;\n  }, null, null)), (_l()(), i1.ɵted(-1, null, [\"create one\"])), (_l()(), i1.ɵted(-1, null, [\"? \"]))], null, null);\n}\n\nfunction View_LobbyComponent_3(_l) {\n  return i1.ɵvid(0, [(_l()(), i1.ɵeld(0, 0, null, null, 1, \"fa-icon\", [[\"class\", \"mr-2 mt-1 ng-fa-icon\"], [\"icon\", \"lock\"]], [[8, \"innerHTML\", 1]], null, null, i2.View_FaIconComponent_0, i2.RenderType_FaIconComponent)), i1.ɵdid(1, 573440, null, 0, i3.FaIconComponent, [i4.DomSanitizer], {\n    iconProp: [0, \"iconProp\"]\n  }, null)], function (_ck, _v) {\n    var currVal_1 = \"lock\";\n\n    _ck(_v, 1, 0, currVal_1);\n  }, function (_ck, _v) {\n    var currVal_0 = i1.ɵnov(_v, 1).renderedIconHTML;\n\n    _ck(_v, 0, 0, currVal_0);\n  });\n}\n\nfunction View_LobbyComponent_2(_l) {\n  return i1.ɵvid(0, [(_l()(), i1.ɵeld(0, 0, null, null, 6, \"div\", [[\"class\", \"list-group-item d-flex\"]], null, null, null, null, null)), (_l()(), i1.ɵand(16777216, null, null, 1, null, View_LobbyComponent_3)), i1.ɵdid(2, 16384, null, 0, i5.NgIf, [i1.ViewContainerRef, i1.TemplateRef], {\n    ngIf: [0, \"ngIf\"]\n  }, null), (_l()(), i1.ɵeld(3, 0, null, null, 1, \"h4\", [], null, null, null, null, null)), (_l()(), i1.ɵted(4, null, [\"\", \"\"])), (_l()(), i1.ɵeld(5, 0, null, null, 1, \"button\", [[\"class\", \"btn ml-auto\"]], null, [[null, \"click\"]], function (_v, en, $event) {\n    var ad = true;\n    var _co = _v.component;\n\n    if (\"click\" === en) {\n      var pd_0 = _co.joinRoom(_v.context.$implicit) !== false;\n      ad = pd_0 && ad;\n    }\n\n    return ad;\n  }, null, null)), (_l()(), i1.ɵted(-1, null, [\" Join \"]))], function (_ck, _v) {\n    var currVal_0 = _v.context.$implicit.hasPassword;\n\n    _ck(_v, 2, 0, currVal_0);\n  }, function (_ck, _v) {\n    var currVal_1 = _v.context.$implicit.name;\n\n    _ck(_v, 4, 0, currVal_1);\n  });\n}\n\nexport function View_LobbyComponent_0(_l) {\n  return i1.ɵvid(0, [i1.ɵqud(402653184, 1, {\n    createRoomModal: 0\n  }), i1.ɵqud(402653184, 2, {\n    joinRoomModal: 0\n  }), (_l()(), i1.ɵeld(2, 0, null, null, 9, \"div\", [[\"class\", \"row\"]], null, null, null, null, null)), (_l()(), i1.ɵeld(3, 0, null, null, 5, \"div\", [[\"class\", \"col-12 mb-1\"]], null, null, null, null, null)), (_l()(), i1.ɵeld(4, 0, null, null, 4, \"div\", [[\"class\", \"list-group\"]], null, null, null, null, null)), (_l()(), i1.ɵand(16777216, null, null, 1, null, View_LobbyComponent_1)), i1.ɵdid(6, 16384, null, 0, i5.NgIf, [i1.ViewContainerRef, i1.TemplateRef], {\n    ngIf: [0, \"ngIf\"]\n  }, null), (_l()(), i1.ɵand(16777216, null, null, 1, null, View_LobbyComponent_2)), i1.ɵdid(8, 802816, null, 0, i5.NgForOf, [i1.ViewContainerRef, i1.TemplateRef, i1.IterableDiffers], {\n    ngForOf: [0, \"ngForOf\"]\n  }, null), (_l()(), i1.ɵeld(9, 0, null, null, 2, \"div\", [[\"class\", \"col-12 clearfix mt-1\"]], null, null, null, null, null)), (_l()(), i1.ɵeld(10, 0, null, null, 1, \"button\", [[\"class\", \"btn float-right mr-2\"]], null, [[null, \"click\"]], function (_v, en, $event) {\n    var ad = true;\n\n    if (\"click\" === en) {\n      var pd_0 = i1.ɵnov(_v, 13).show() !== false;\n      ad = pd_0 && ad;\n    }\n\n    return ad;\n  }, null, null)), (_l()(), i1.ɵted(-1, null, [\" Create Room \"])), (_l()(), i1.ɵeld(12, 0, null, null, 1, \"modal-create-room\", [], null, null, null, i6.View_ModalCreateRoomComponent_0, i6.RenderType_ModalCreateRoomComponent)), i1.ɵdid(13, 49152, [[1, 4], [\"createRoomModal\", 4]], 0, i7.ModalCreateRoomComponent, [i8.RoomService], null, null), (_l()(), i1.ɵeld(14, 0, null, null, 1, \"modal-join-room\", [], null, null, null, i9.View_ModalJoinRoomComponent_0, i9.RenderType_ModalJoinRoomComponent)), i1.ɵdid(15, 49152, [[2, 4], [\"joinRoomModal\", 4]], 0, i10.ModalJoinRoomComponent, [i8.RoomService, i1.NgZone], null, null)], function (_ck, _v) {\n    var _co = _v.component;\n    var currVal_0 = _co.rooms.length === 0;\n\n    _ck(_v, 6, 0, currVal_0);\n\n    var currVal_1 = _co.rooms;\n\n    _ck(_v, 8, 0, currVal_1);\n  }, null);\n}\nexport function View_LobbyComponent_Host_0(_l) {\n  return i1.ɵvid(0, [(_l()(), i1.ɵeld(0, 0, null, null, 1, \"lobby\", [], null, null, null, View_LobbyComponent_0, RenderType_LobbyComponent)), i1.ɵdid(1, 245760, null, 0, i11.LobbyComponent, [i8.RoomService], null, null)], function (_ck, _v) {\n    _ck(_v, 1, 0);\n  }, null);\n}\nvar LobbyComponentNgFactory = i1.ɵccf(\"lobby\", i11.LobbyComponent, View_LobbyComponent_Host_0, {}, {}, []);\nexport { LobbyComponentNgFactory };","/**\n * @fileoverview This file was generated by the Angular template compiler. Do not edit.\n *\n * @suppress {suspiciousCode,uselessCode,missingProperties,missingOverride,checkTypes}\n * tslint:disable\n */\nvar styles = [\"\"];\nexport { styles };","<div class=\"row\"> <div class=\"col-12 mb-1\"> <div class=\"list-group\"> <div class=\"list-group-item\" *ngIf=\"rooms.length === 0\"> There are no rooms. Would you like to <a href=\"javascript:\" (click)=\"createRoomModal.show()\">create one</a>? </div> <div class=\"list-group-item d-flex\" *ngFor=\"let room of rooms\"> <fa-icon class=\"mr-2 mt-1\" icon=\"lock\" *ngIf=\"room.hasPassword\"></fa-icon> <h4>{{room.name}}</h4> <button class=\"btn ml-auto\" (click)=\"joinRoom(room)\"> Join </button> </div> </div> </div> <div class=\"col-12 clearfix mt-1\"> <button class=\"btn float-right mr-2\" (click)=\"createRoomModal.show()\"> Create Room </button> </div> </div> <modal-create-room #createRoomModal></modal-create-room> <modal-join-room #joinRoomModal></modal-join-room> ","import { Board } from 'src/board';\nimport { AfterViewInit, Component, ViewChild, ElementRef, Input, Output, OnChanges, EventEmitter, OnDestroy, OnInit } from '@angular/core';\nimport { screenToCanvas } from './canvas';\nimport { Subject, animationFrameScheduler, range } from 'rxjs';\nimport { observeOn } from 'rxjs/operators';\nimport { colors } from 'data/colors.yaml';\n\nfunction toCartesian( { x, y }: Point, center: Point ) {\n\treturn { x: x - center.x, y: center.y - y };\n}\n\nfunction fromCartesian( { x, y }: Point, center: Point ) {\n\treturn { x: x + center.x, y: center.y - y };\n}\n\nfunction drawRect(\n\tc2d: CanvasRenderingContext2D,\n\tx: number,\n\ty: number,\n\twidth: number,\n\theight: number,\n\tr1: number,\n\tr2: number,\n\tr3: number,\n\tr4: number,\n\tccw = false\n) {\n\tc2d.moveTo( x + r4, y );\n\tif( ccw ) {\n\t\tc2d.quadraticCurveTo( x, y, x, y + r4 );\n\t\tc2d.lineTo( x, y + height - r3 );\n\t\tc2d.quadraticCurveTo( x, y + height, x + r3, y + height );\n\t\tc2d.lineTo( x + width - r2, y + height );\n\t\tc2d.quadraticCurveTo( x + width, y + height, x + width, y + height - r2 );\n\t\tc2d.lineTo( x + width, y + r1 );\n\t\tc2d.quadraticCurveTo( x + width, y, x + width - r1, y );\n\t\tc2d.lineTo( x + r4, y );\n\t} else {\n\t\tc2d.lineTo( x + width - r1, y );\n\t\tc2d.quadraticCurveTo( x + width, y, x + width, y + r1 );\n\t\tc2d.lineTo( x + width, y + height - r2 );\n\t\tc2d.quadraticCurveTo( x + width, y + height, x + width - r2, y + height );\n\t\tc2d.lineTo( x + r3, y + height );\n\t\tc2d.quadraticCurveTo( x, y + height, x, y + height - r3 );\n\t\tc2d.lineTo( x, y + r4 );\n\t\tc2d.quadraticCurveTo( x, y, x + r4, y );\n\t}\n}\n\n@Component( {\n\tselector: 'board',\n\ttemplateUrl: './board.component.html',\n\tstyleUrls: [ './board.component.scss' ]\n} )\nexport class BoardComponent implements AfterViewInit, OnChanges, OnDestroy, OnInit {\n\tpublic ngAfterViewInit() {\n\t\tconst canvas = this.canvas = this.canvasElementRef.nativeElement;\n\t\tthis.c2d = canvas.getContext( '2d' );\n\t\tthis.dirty.next( true );\n\t}\n\n\tpublic ngOnChanges() {\n\t\tthis.dirty.next( true );\n\t}\n\n\tpublic ngOnDestroy() {\n\t\tconst { dirty } = this;\n\t\tdirty.complete();\n\t}\n\n\tpublic ngOnInit() {\n\t\tthis.dirty\n\t\t.pipe( observeOn( animationFrameScheduler ) )\n\t\t.subscribe( () => { this.render(); } );\n\t}\n\n\t@ViewChild( 'canvasElement' )\n\tprivate canvasElementRef: ElementRef;\n\tprivate canvas: HTMLCanvasElement;\n\tprivate c2d: CanvasRenderingContext2D;\n\tprivate readonly dirty = new Subject<true>();\n\n\t@Input()\n\tpublic colors: string[] = [];\n\n\t@Input()\n\tpublic board: Board;\n\n\t@Input()\n\tpublic lastMove: null|Point = null;\n\n\t@Output()\n\tpublic click = new EventEmitter<BoardMouseEvent>();\n\n\t@Output()\n\tpublic mousemove = new EventEmitter<BoardMouseEvent>();\n\n\tprivate render() {\n\t\tconst { board } = this;\n\t\tif( !board ) return;\n\t\tconst { canvas, c2d } = this,\n\t\t\t{ width, height } = canvas,\n\t\t\tlightSource: Point = {\n\t\t\t\tx: board.bounds.left + board.bounds.width * .25,\n\t\t\t\ty: board.bounds.top + board.bounds.height * .25\n\t\t\t};\n\t\tc2d.clearRect( 0, 0, width, height );\n\n\t\tconst squareGradient = c2d.createRadialGradient(\n\t\t\tlightSource.x,\n\t\t\tlightSource.y,\n\t\t\t0,\n\t\t\tboard.bounds.center.x,\n\t\t\tboard.bounds.center.y,\n\t\t\tMath.min( board.bounds.width, board.bounds.height ) * .7\n\t\t);\n\t\tsquareGradient.addColorStop(  0, 'rgba(255,255,255,.2)' );\n\t\tsquareGradient.addColorStop( .4, 'rgba(255,255,255,0)' );\n\n\t\tc2d.beginPath();\n\t\tdrawRect( c2d, board.bounds.left, board.bounds.top, board.bounds.width, board.bounds.height, 20, 20, 20, 20 );\n\t\tc2d.closePath();\n\n\t\tc2d.save();\n\t\tObject.assign( c2d, {\n\t\t\tfillStyle: '#3a3'\n\t\t} );\n\t\tc2d.fill();\n\t\tc2d.restore();\n\n\t\tc2d.save();\n\t\tObject.assign( c2d, {\n\t\t\tglobalCompositeOperation: 'screen',\n\t\t\tfillStyle: squareGradient\n\t\t} );\n\t\tc2d.fill();\n\t\tc2d.restore();\n\t\tfor( const { enabled, color, position: { x, y }, bounds: { left, top, width, height, center } } of board ) {\n\t\t\tif( !enabled ) continue;\n\t\t\tconst lightSourceCart = toCartesian( lightSource, center ),\n\t\t\t\t\tlightDirection = Math.atan2( lightSourceCart.y, lightSourceCart.x ),\n\t\t\t\t\tlightDistance = 4,\n\t\t\t\t\tshadowCenter = fromCartesian( {\n\t\t\t\t\t\tx: Math.cos( lightDirection ) * lightDistance,\n\t\t\t\t\t\ty: Math.sin( lightDirection ) * lightDistance\n\t\t\t\t\t}, center ),\n\t\t\t\t\tlightCenter = fromCartesian( {\n\t\t\t\t\t\tx: Math.cos( lightDirection + Math.PI ) * lightDistance,\n\t\t\t\t\t\ty: Math.sin( lightDirection + Math.PI ) * lightDistance\n\t\t\t\t\t}, center ),\n\t\t\t\tpath = ccw => {\n\t\t\t\t\tdrawRect( c2d, left, top, width, height,\n\t\t\t\t\t\tx === board.width - 1 && y === 0                ? 16 : 4,\n\t\t\t\t\t\tx === board.width - 1 && y === board.height - 1 ? 16 : 4,\n\t\t\t\t\t\tx === 0               && y === board.height - 1 ? 16 : 4,\n\t\t\t\t\t\tx === 0               && y === 0                ? 16 : 4,\n\t\t\t\t\t\tccw\n\t\t\t\t\t);\n\t\t\t\t};\n\n\t\t\tc2d.beginPath();\n\t\t\tpath( false );\n\n\t\t\tc2d.save();\n\t\t\tObject.assign( c2d, {\n\t\t\t\tfillStyle: '#6c6',\n\t\t\t\tstrokeStyle: '#363'\n\t\t\t} );\n\t\t\tc2d.fill();\n\t\t\tc2d.stroke();\n\t\t\tc2d.restore();\n\n\t\t\tc2d.save();\n\t\t\tc2d.clip();\n\n\t\t\tc2d.save();\n\t\t\tObject.assign( c2d, {\n\t\t\t\tglobalCompositeOperation: 'screen',\n\t\t\t\tfillStyle: squareGradient\n\t\t\t} );\n\t\t\tc2d.fill();\n\t\t\tc2d.restore();\n\n\t\t\tc2d.save();\n\t\t\tc2d.beginPath();\n\t\t\tc2d.rect( board.bounds.left, board.bounds.top, board.bounds.width, board.bounds.height );\n\t\t\tpath( true );\n\t\t\tObject.assign( c2d, {\n\t\t\t\tfillStyle: '#000'\n\t\t\t\t// shadowColor: 'hsla(0,0%,0%,.4)',\n\t\t\t\t// shadowBlur: lightDistance,\n\t\t\t\t// shadowOffsetX: center.x - shadowCenter.x,\n\t\t\t\t// shadowOffsetY: center.y - shadowCenter.y\n\t\t\t} );\n\t\t\tc2d.fill();\n\t\t\tc2d.restore();\n\n\t\t\tconst radius = Math.min( width, height ) * .5;\n\t\t\tif( color !== null ) {\n\t\t\t\tconst colorDef = colors[ this.colors[ color ] ];\n\t\t\t\tconst [ hue, saturation, lightness ] = colorDef.color;\n\t\t\t\tconst hsl = `${hue},${saturation}%,${lightness}%`;\n\t\t\t\t// dark stones have highlights, light stones have shadows\n\t\t\t\tconst isDark = lightness < 50,\n\t\t\t\t\t// shadows are reversed from light (+pi radians)\n\t\t\t\t\tradialGradient = c2d.createRadialGradient(\n\t\t\t\t\t\tcenter.x, center.y, 0,\n\t\t\t\t\t\tisDark ? lightCenter.x : shadowCenter.x,\n\t\t\t\t\t\tisDark ? lightCenter.y : shadowCenter.y,\n\t\t\t\t\t\tradius\n\t\t\t\t\t);\n\t\t\t\tradialGradient.addColorStop( 0,   `hsla(${hue},${saturation}%,0%,0)` );\n\t\t\t\tradialGradient.addColorStop( .5,  `hsla(${hue},${saturation}%,0%,.1)` );\n\t\t\t\tradialGradient.addColorStop( .75, `hsla(${hue},${saturation}%,0%,0)` );\n\t\t\t\tradialGradient.addColorStop( 1,   `hsla(${hue},${saturation}%,0%,.75)` );\n\n\t\t\t\tc2d.beginPath();\n\t\t\t\tc2d.arc( center.x, center.y, radius * .8, 0, Math.PI * 2 );\n\n\t\t\t\tc2d.save();\n\t\t\t\tObject.assign( c2d, {\n\t\t\t\t\tfillStyle: `hsl(${hsl})`,\n\t\t\t\t\tshadowColor: 'hsla(0,0,0,.4)',\n\t\t\t\t\tshadowBlur: lightDistance,\n\t\t\t\t\tshadowOffsetX: center.x - shadowCenter.x,\n\t\t\t\t\tshadowOffsetY: center.y - shadowCenter.y\n\t\t\t\t} );\n\t\t\t\tc2d.fill();\n\t\t\t\tc2d.restore();\n\n\t\t\t\tc2d.save();\n\t\t\t\tObject.assign( c2d, {\n\t\t\t\t\tlineWidth: 1,\n\t\t\t\t\tstrokeStyle: 'hsla(0,0,0,.5)'\n\t\t\t\t} );\n\t\t\t\tc2d.stroke();\n\t\t\t\tc2d.restore();\n\n\t\t\t\tc2d.save();\n\t\t\t\tObject.assign( c2d, {\n\t\t\t\t\tglobalCompositeOperation: isDark ? 'screen' : 'multiply',\n\t\t\t\t\tfillStyle: radialGradient\n\t\t\t\t} );\n\t\t\t\tc2d.fill();\n\t\t\t\tc2d.restore();\n\t\t\t}\n\t\t\tc2d.restore();\n\t\t}\n\t\tconst { lastMove } = this;\n\t\tif( lastMove ) {\n\t\t\tconst { bounds } = board.get( lastMove );\n\t\t\tc2d.save();\n\t\t\tconst r = 5;\n\t\t\tconst p = 7;\n\t\t\tconst center = { x: bounds.right - r - p, y: bounds.top + r + p };\n\n\t\t\tconst radialGradient = c2d.createRadialGradient(\n\t\t\t\tcenter.x, center.y, 0,\n\t\t\t\tcenter.x, center.y, r\n\t\t\t);\n\t\t\tradialGradient.addColorStop( 0,   `hsl(180,0%,50%)` );\n\t\t\tradialGradient.addColorStop( .5,  `hsl(180,100%,50%)` );\n\t\t\tradialGradient.addColorStop( 1,   `hsl(180,0%,50%)` );\n\n\t\t\tc2d.fillStyle = radialGradient;\n\t\t\tc2d.beginPath();\n\t\t\tc2d.ellipse( bounds.right - r - p, bounds.top + r + p, r, r, 0, 0, Math.PI * 2 );\n\t\t\tc2d.fill();\n\t\t\tc2d.closePath();\n\t\t\tc2d.restore();\n\t\t}\n\t}\n\n\tpublic handleEvent( emitter: EventEmitter<BoardMouseEvent>, { clientX, clientY }: MouseEvent ) {\n\t\tconst { board, canvas } = this,\n\t\t\tscreenPosition = { x: clientX, y: clientY },\n\t\t\tcanvasPosition = screenToCanvas( canvas, { x: clientX, y: clientY } ),\n\t\t\tsquare = board.hitTest( canvasPosition ),\n\t\t\tboardPosition = square && square.position || null;\n\t\temitter.emit( {\n\t\t\tsquare,\n\t\t\tposition: {\n\t\t\t\tscreen: screenPosition,\n\t\t\t\tcanvas: canvasPosition,\n\t\t\t\tboard: boardPosition\n\t\t\t}\n\t\t} );\n\t}\n}\n","export function screenToCanvas(canvas, {\n  x,\n  y\n}) {\n  const width = canvas.width,\n        height = canvas.height,\n        rect = canvas.getBoundingClientRect();\n  return {\n    x: (x - rect.left) * (width / rect.width),\n    y: (y - rect.top) * (height / rect.height)\n  };\n}\nexport function canvasToScreen(canvas, {\n  x,\n  y\n}) {\n  const width = canvas.width,\n        height = canvas.height,\n        rect = canvas.getBoundingClientRect();\n  return {\n    x: x * (rect.width / width) + rect.left,\n    y: y * (rect.height / height) + rect.top\n  };\n}","export function screenToCanvas( canvas: HTMLCanvasElement, { x, y }: Point ): Point {\n\tconst { width, height } = canvas,\n\t\trect = canvas.getBoundingClientRect();\n\treturn { x: ( x - rect.left ) * ( width / rect.width ), y: ( y - rect.top ) * ( height / rect.height ) };\n}\n\nexport function canvasToScreen( canvas: HTMLCanvasElement, { x, y }: Point ): Point {\n\tconst { width, height } = canvas,\n\t\trect = canvas.getBoundingClientRect();\n\treturn { x: ( x * ( rect.width / width ) ) + rect.left, y: ( y * ( rect.height / height ) ) + rect.top };\n}\n","/**\n * @fileoverview This file was generated by the Angular template compiler. Do not edit.\n *\n * @suppress {suspiciousCode,uselessCode,missingProperties,missingOverride,checkTypes}\n * tslint:disable\n */\nimport * as i0 from \"./board.component.scss.shim.ngstyle\";\nimport * as i1 from \"@angular/core\";\nimport * as i2 from \"./board.component\";\nvar styles_BoardComponent = [i0.styles];\nvar RenderType_BoardComponent = i1.ɵcrt({\n  encapsulation: 0,\n  styles: styles_BoardComponent,\n  data: {}\n});\nexport { RenderType_BoardComponent };\nexport function View_BoardComponent_0(_l) {\n  return i1.ɵvid(0, [i1.ɵqud(402653184, 1, {\n    canvasElementRef: 0\n  }), (_l()(), i1.ɵeld(1, 0, null, null, 2, \"div\", [[\"class\", \"row\"]], null, null, null, null, null)), (_l()(), i1.ɵeld(2, 0, null, null, 1, \"div\", [[\"class\", \"col-12\"]], null, null, null, null, null)), (_l()(), i1.ɵeld(3, 0, [[1, 0], [\"canvasElement\", 1]], null, 0, \"canvas\", [], [[8, \"width\", 0], [8, \"height\", 0]], [[null, \"mousemove\"], [null, \"click\"], [null, \"touch\"]], function (_v, en, $event) {\n    var ad = true;\n    var _co = _v.component;\n\n    if (\"mousemove\" === en) {\n      var pd_0 = _co.handleEvent(_co.mousemove, $event) !== false;\n      ad = pd_0 && ad;\n    }\n\n    if (\"click\" === en) {\n      var pd_1 = _co.handleEvent(_co.click, $event) !== false;\n      ad = pd_1 && ad;\n    }\n\n    if (\"touch\" === en) {\n      var pd_2 = _co.handleEvent(_co.click, $event.touches[0]) !== false;\n      ad = pd_2 && ad;\n    }\n\n    return ad;\n  }, null, null))], null, function (_ck, _v) {\n    var _co = _v.component;\n    var currVal_0 = _co.board == null ? null : _co.board.bounds.width;\n    var currVal_1 = _co.board == null ? null : _co.board.bounds.height;\n\n    _ck(_v, 3, 0, currVal_0, currVal_1);\n  });\n}\nexport function View_BoardComponent_Host_0(_l) {\n  return i1.ɵvid(0, [(_l()(), i1.ɵeld(0, 0, null, null, 1, \"board\", [], null, null, null, View_BoardComponent_0, RenderType_BoardComponent)), i1.ɵdid(1, 4964352, null, 0, i2.BoardComponent, [], null, null)], function (_ck, _v) {\n    _ck(_v, 1, 0);\n  }, null);\n}\nvar BoardComponentNgFactory = i1.ɵccf(\"board\", i2.BoardComponent, View_BoardComponent_Host_0, {\n  colors: \"colors\",\n  board: \"board\",\n  lastMove: \"lastMove\"\n}, {\n  click: \"click\",\n  mousemove: \"mousemove\"\n}, []);\nexport { BoardComponentNgFactory };","/**\n * @fileoverview This file was generated by the Angular template compiler. Do not edit.\n *\n * @suppress {suspiciousCode,uselessCode,missingProperties,missingOverride,checkTypes}\n * tslint:disable\n */\nvar styles = [\"canvas[_ngcontent-%COMP%] { object-fit: contain; width: 100%; height: 100%; }\"];\nexport { styles };","<div class=\"row\"> <div class=\"col-12\"> <canvas [width]=\"board?.bounds.width\" [height]=\"board?.bounds.height\" (mousemove)=\"handleEvent(mousemove,$event)\" (click)=\"handleEvent(click,$event)\" (touch)=\"handleEvent(click,$event.touches[0])\" #canvasElement> </canvas> </div> </div> ","function validate<T>( grid: Grid<T>, { x, y }: Point ) {\n\tif( !Number.isSafeInteger( x ) || !Number.isSafeInteger( y ) ) {\n\t\tthrow new Error( `(${x}, ${y}) is not valid` );\n\t}\n\tif( !grid.boundsCheck( { x, y } ) ) {\n\t\tthrow new Error( `(${x}, ${y}) is out of bounds` );\n\t}\n}\n\nexport class Grid<T> {\n\tpublic constructor( public readonly width: number, public readonly height: number ) {}\n\n\tpublic boundsCheck( { x, y }: Point ) {\n\t\tconst { width, height } = this;\n\t\treturn x >= 0 && x < width && y >= 0 && y < height;\n\t}\n\n\tpublic get( { x, y }: Point ) {\n\t\tvalidate( this, { x, y } );\n\t\tconst key = JSON.stringify( { x, y } );\n\t\treturn this.data.get( key );\n\t}\n\n\tpublic set( { x, y }: Point, value: T ) {\n\t\tvalidate( this, { x, y } );\n\t\tconst key = JSON.stringify( { x, y } );\n\t\tthis.data.set( key, value );\n\t}\n\n\tpublic [Symbol.iterator]() {\n\t\tfunction *iterator( this: Grid<T> ) {\n\t\t\tconst { width, height } = this;\n\t\t\tfor( let x = 0; x < width; ++x ) {\n\t\t\tfor( let y = 0; y < height; ++ y ) {\n\t\t\t\tyield this.get( { x, y } );\n\t\t\t} }\n\t\t}\n\t\treturn iterator.call( this ) as IterableIterator<T|undefined>;\n\t}\n\n\tprivate data = new Map<string, T>();\n}\n","export class Bounds {\n  constructor(left, top, width, height) {\n    this.left = left;\n    this.top = top;\n    this.width = width;\n    this.height = height;\n  }\n\n  get bottom() {\n    const top = this.top,\n          height = this.height;\n    return top + height;\n  }\n\n  get right() {\n    const left = this.left,\n          width = this.width;\n    return left + width;\n  }\n\n  get center() {\n    const left = this.left,\n          top = this.top,\n          width = this.width,\n          height = this.height,\n          x = left + width * .5,\n          y = top + height * .5;\n    return {\n      x,\n      y\n    };\n  }\n\n  get n() {\n    const left = this.left,\n          top = this.top,\n          width = this.width,\n          x = left + width * .5,\n          y = top;\n    return {\n      x,\n      y\n    };\n  }\n\n  get ne() {\n    const left = this.left,\n          top = this.top,\n          width = this.width,\n          x = left + width,\n          y = top;\n    return {\n      x,\n      y\n    };\n  }\n\n  get e() {\n    const left = this.left,\n          top = this.top,\n          width = this.width,\n          height = this.height,\n          x = left + width,\n          y = top + height * .5;\n    return {\n      x,\n      y\n    };\n  }\n\n  get se() {\n    const left = this.left,\n          top = this.top,\n          width = this.width,\n          height = this.height,\n          x = left + width,\n          y = top + height;\n    return {\n      x,\n      y\n    };\n  }\n\n  get s() {\n    const left = this.left,\n          top = this.top,\n          width = this.width,\n          height = this.height,\n          x = left + width * .5,\n          y = top + height;\n    return {\n      x,\n      y\n    };\n  }\n\n  get sw() {\n    const left = this.left,\n          top = this.top,\n          height = this.height,\n          x = left,\n          y = top + height;\n    return {\n      x,\n      y\n    };\n  }\n\n  get w() {\n    const left = this.left,\n          top = this.top,\n          height = this.height,\n          x = left,\n          y = top + height * .5;\n    return {\n      x,\n      y\n    };\n  }\n\n  get nw() {\n    const left = this.left,\n          top = this.top,\n          x = left,\n          y = top;\n    return {\n      x,\n      y\n    };\n  }\n\n  hitTest({\n    x,\n    y\n  }) {\n    const top = this.top,\n          right = this.right,\n          bottom = this.bottom,\n          left = this.left;\n    return x >= left && x <= right && y >= top && y <= bottom;\n  }\n\n}","export class Bounds {\n\tpublic constructor(\n\t\tpublic readonly left: number,\n\t\tpublic readonly top: number,\n\t\tpublic readonly width: number,\n\t\tpublic readonly height: number\n\t) {}\n\n\tpublic get bottom() {\n\t\tconst { top, height } = this;\n\t\treturn top + height;\n\t}\n\n\tpublic get right() {\n\t\tconst { left, width } = this;\n\t\treturn left + width;\n\t}\n\n\tpublic get center() {\n\t\tconst { left, top, width, height } = this,\n\t\t\tx = left + width * .5,\n\t\t\ty = top + height * .5;\n\t\treturn { x, y };\n\t}\n\n\tpublic get n() {\n\t\tconst { left, top, width } = this,\n\t\t\tx = left + width * .5,\n\t\t\ty = top;\n\t\treturn { x, y };\n\t}\n\n\tpublic get ne() {\n\t\tconst { left, top, width } = this,\n\t\t\tx = left + width,\n\t\t\ty = top;\n\t\treturn { x, y };\n\t}\n\n\tpublic get e() {\n\t\tconst { left, top, width, height } = this,\n\t\t\tx = left + width,\n\t\t\ty = top + height * .5;\n\t\treturn { x, y };\n\t}\n\n\tpublic get se() {\n\t\tconst { left, top, width, height } = this,\n\t\t\tx = left + width,\n\t\t\ty = top + height;\n\t\treturn { x, y };\n\t}\n\n\tpublic get s() {\n\t\tconst { left, top, width, height } = this,\n\t\t\tx = left + width * .5,\n\t\t\ty = top + height;\n\t\treturn { x, y };\n\t}\n\n\tpublic get sw() {\n\t\tconst { left, top, height } = this,\n\t\t\tx = left,\n\t\t\ty = top + height;\n\t\treturn { x, y };\n\t}\n\n\tpublic get w() {\n\t\tconst { left, top, height } = this,\n\t\t\tx = left,\n\t\t\ty = top + height * .5;\n\t\treturn { x, y };\n\t}\n\n\tpublic get nw() {\n\t\tconst { left, top } = this,\n\t\t\tx = left,\n\t\t\ty = top;\n\t\treturn { x, y };\n\t}\n\n\tpublic hitTest( { x, y }: Point ) {\n\t\tconst { top, right, bottom, left } = this;\n\t\treturn x >= left && x <= right\n\t\t\t&& y >= top && y <= bottom;\n\t}\n}\n","export class Square {\n  constructor(position, bounds) {\n    this.position = position;\n    this.bounds = bounds;\n    this.enabled = true;\n    this.color = null;\n  }\n\n  get empty() {\n    return this.color === null;\n  }\n\n}","import { Bounds } from 'src/bounds';\n\nexport class Square {\n\tpublic constructor(\n\t\tpublic readonly position: Point,\n\t\tpublic readonly bounds: Bounds\n\t) {}\n\n\tpublic enabled = true;\n\tpublic color: number|null = null;\n\n\tpublic get empty() { return this.color === null; }\n}\n","import { Grid } from 'src/grid';\nimport { Bounds } from 'src/bounds';\nimport { Square } from 'src/square';\nimport { zip } from 'lodash';\n\nexport class Board {\n\tpublic reset( { width, height }: Readonly<Size> ) {\n\t\tconst grid = new Grid<Square>( width, height ),\n\t\t\tsquareSize: Size = { width: 64, height: 64 },\n\t\t\tgutterSize: Size = { width: 6, height: 6 },\n\t\t\tbounds = new Bounds(\n\t\t\t\t0.5,\n\t\t\t\t0.5,\n\t\t\t\t1 + width * ( squareSize.width + gutterSize.width ) + gutterSize.width,\n\t\t\t\t1 + height * ( squareSize.height + gutterSize.height ) + gutterSize.height\n\t\t\t);\n\t\tfor( let x = 0; x < width; ++x ) {\n\t\tfor( let y = 0; y < height; ++y ) {\n\t\t\tconst position = { x, y },\n\t\t\t\tbounds = new Bounds(\n\t\t\t\t\t0.5 + x * ( squareSize.width + gutterSize.width ) + gutterSize.width,\n\t\t\t\t\t0.5 + y * ( squareSize.height + gutterSize.height ) + gutterSize.height,\n\t\t\t\t\t0.5 + squareSize.width,\n\t\t\t\t\t0.5 + squareSize.height\n\t\t\t\t);\n\t\t\tgrid.set( { x, y }, new Square( position, bounds ) );\n\t\t} }\n\t\tObject.assign( this, { grid, bounds } );\n\t}\n\n\tpublic get width() {\n\t\tconst { grid: { width } } = this;\n\t\treturn width;\n\t}\n\n\tpublic get height() {\n\t\tconst { grid: { height } } = this;\n\t\treturn height;\n\t}\n\n\tpublic get( { x, y }: Point ) {\n\t\tconst { grid } = this;\n\t\treturn grid.get( { x, y } )!;\n\t}\n\n\tpublic boundsCheck( { x, y }: Point ) {\n\t\tconst { grid } = this;\n\t\treturn grid.boundsCheck( { x, y } )!;\n\t}\n\n\tpublic getData() {\n\t\treturn Object.freeze( Array.from( this.grid ).map( sq => sq.empty ? null : sq.color ) );\n\t}\n\n\tpublic setData( data: ReadonlyArray<number> ) {\n\t\tfor( const [ color, square ] of zip( data, Array.from( this.grid ) ) ) {\n\t\t\tsquare.color = color;\n\t\t}\n\t}\n\n\tpublic getGameState( index: number ) {\n\t\treturn {\n\t\t\tindex,\n\n\t\t\tdata: this.getData()\n\t\t} as GameState;\n\t}\n\n\tpublic getMask() {\n\t\treturn Object.freeze( Array.from( this.grid ).map( sq => sq.enabled ) );\n\t}\n\n\tpublic setMask( mask: ReadonlyArray<boolean> ) {\n\t\tfor( const [ enabled, square ] of zip( mask, Array.from( this.grid ) ) ) {\n\t\t\tsquare.enabled = enabled;\n\t\t}\n\t}\n\n\tpublic static fromGame( game: Game, gameState: GameState ) {\n\t\tconst board = new Board;\n\t\tboard.reset( game.size );\n\t\tboard.setData( gameState.data );\n\t\tboard.setMask( game.mask );\n\t\treturn board;\n\t}\n\n\tpublic [Symbol.iterator]() {\n\t\tconst { grid } = this;\n\t\treturn grid[ Symbol.iterator ]() as IterableIterator<Square>;\n\t}\n\n\tpublic hitTest( pt: Point ): Square|null {\n\t\tfor( const square of this ) {\n\t\t\tif( square.bounds.hitTest( pt ) ) {\n\t\t\t\treturn square;\n\t\t\t}\n\t\t}\n\t\treturn null;\n\t}\n\n\tpublic bounds = new Bounds( 0, 0, 0, 0 );\n\tprivate grid = new Grid<Square>( 0, 0 );\n}\n","import \"core-js/modules/web.dom.iterable\";\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; var ownKeys = Object.keys(source); if (typeof Object.getOwnPropertySymbols === 'function') { ownKeys = ownKeys.concat(Object.getOwnPropertySymbols(source).filter(function (sym) { return Object.getOwnPropertyDescriptor(source, sym).enumerable; })); } ownKeys.forEach(function (key) { _defineProperty(target, key, source[key]); }); } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nimport { Board } from './board';\nconst directions = [{\n  x: 0,\n  y: -1\n}, {\n  x: 1,\n  y: -1\n}, {\n  x: 1,\n  y: 0\n}, {\n  x: 1,\n  y: 1\n}, {\n  x: 0,\n  y: 1\n}, {\n  x: -1,\n  y: 1\n}, {\n  x: -1,\n  y: 0\n}, {\n  x: -1,\n  y: -1\n}];\n\nfunction getAffectedSquares(board, position, color) {\n  if (!board.boundsCheck(position)) {\n    return [];\n  }\n\n  const square = board.get(position);\n\n  if (!square || !square.empty || !square.enabled) {\n    return [];\n  }\n\n  function direction({\n    x,\n    y\n  }, delta) {\n    const squares = [];\n\n    for (;;) {\n      x += delta.x;\n      y += delta.y;\n\n      if (!board.boundsCheck({\n        x,\n        y\n      })) {\n        return [];\n      }\n\n      const square = board.get({\n        x,\n        y\n      });\n\n      if (!square || square.empty || !square.enabled) {\n        return [];\n      }\n\n      if (square.color === color) {\n        return squares;\n      }\n\n      squares.push(square);\n    }\n  }\n\n  let squares = [square];\n\n  for (const delta of directions) {\n    squares = [...squares, ...direction(position, delta)];\n  }\n\n  if (squares.length <= 1) {\n    return [];\n  }\n\n  return squares;\n}\n\nclass RulesStandard {\n  constructor() {\n    this.name = 'Standard';\n    this.ruleSet = \"standard\"\n    /* standard */\n    ;\n    this.colors = 2;\n    this.boardSize = Object.freeze({\n      width: 8,\n      height: 8\n    });\n  }\n\n  isValid(game, gameState, position, color) {\n    return getAffectedSquares(Board.fromGame(game, gameState), position, color).length > 0;\n  }\n\n  compareScores(score1, score2) {\n    return score1 - score2;\n  }\n\n  getValidMoves(game, gameState, color) {\n    const points = [];\n    const _game$size = game.size,\n          width = _game$size.width,\n          height = _game$size.height;\n\n    for (let x = 0; x < width; ++x) {\n      for (let y = 0; y < height; ++y) {\n        const point = {\n          x,\n          y\n        };\n        if (this.isValid(game, gameState, point, color)) points.push(point);\n      }\n    }\n\n    return points;\n  }\n\n  isGameOver(game, gameState) {\n    const colors = this.colors;\n\n    for (let color = 0; color < colors; ++color) {\n      if (this.getValidMoves(game, gameState, color).length > 0) return false;\n    }\n\n    return true;\n  }\n\n  makeMove(game, gameState, position) {\n    const prevTurn = gameState.turn,\n          prevIndex = gameState.index;\n    const board = Board.fromGame(game, gameState);\n    const squares = getAffectedSquares(board, position, prevTurn);\n    if (squares.length === 0) return null;\n\n    for (const square of squares) {\n      square.color = prevTurn;\n    }\n\n    const index = prevIndex + 1;\n    const lastMove = Object.freeze(_objectSpread({}, position));\n    const data = board.getData();\n    const colors = this.colors;\n    let turn = null;\n\n    for (let i = 0; i < colors; ++i) {\n      const t = (prevTurn + 1 + i) % colors;\n\n      if (this.getValidMoves(game, {\n        turn: t,\n        index,\n        data,\n        lastMove\n      }, t).length > 0) {\n        turn = t;\n        break;\n      }\n    }\n\n    return {\n      turn,\n      index,\n      data,\n      lastMove\n    };\n  }\n\n  getScore(game, gameState, color) {\n    const board = Board.fromGame(game, gameState);\n    let score = 0;\n\n    for (const square of board) {\n      if (square && square.enabled && square.color === color) {\n        ++score;\n      }\n    }\n\n    return score;\n  }\n\n  newGame(gameId) {\n    const boardSize = this.boardSize;\n    const board = new Board();\n    board.reset(boardSize); // TODO: center? gets ugly with an odd dimension\n\n    board.get({\n      x: 3,\n      y: 3\n    }).color = 0;\n    board.get({\n      x: 4,\n      y: 3\n    }).color = 1;\n    board.get({\n      x: 3,\n      y: 4\n    }).color = 1;\n    board.get({\n      x: 4,\n      y: 4\n    }).color = 0;\n    const gameStates = [{\n      turn: 0,\n      index: 0,\n      data: board.getData(),\n      lastMove: null\n    }];\n    return {\n      gameId,\n      ruleSet: this.ruleSet,\n      mask: board.getMask(),\n      colors: Object.freeze(['black', 'white']),\n      size: Object.freeze(_objectSpread({}, boardSize)),\n      gameStates: Object.freeze(gameStates)\n    };\n  }\n\n}\n\nclass RulesReversed extends RulesStandard {\n  constructor() {\n    super(...arguments);\n    this.name = 'Reversed';\n    this.ruleSet = \"reversed\"\n    /* reversed */\n    ;\n  }\n\n  compareScores(score1, score2) {\n    return score2 - score1;\n  }\n\n}\n\nexport const rulesStandard = new RulesStandard();\nexport const rulesReversed = new RulesReversed();\nexport const ruleSets = [rulesStandard, rulesReversed];\nexport const ruleSetMap = new Map();\n\nfor (const ruleSet of ruleSets) {\n  ruleSetMap.set(ruleSet.ruleSet, ruleSet);\n}","import { Board } from './board';\nimport { Square } from './square';\n\nconst directions: ReadonlyArray<Point> = [\n\t{ x:  0, y: -1 },\n\t{ x:  1, y: -1 },\n\t{ x:  1, y:  0 },\n\t{ x:  1, y:  1 },\n\t{ x:  0, y:  1 },\n\t{ x: -1, y:  1 },\n\t{ x: -1, y:  0 },\n\t{ x: -1, y: -1 }\n];\n\nfunction getAffectedSquares( board: Board, position: Point, color: number ): Square[] {\n\tif( !board.boundsCheck( position ) ) { return []; }\n\tconst square = board.get( position );\n\tif( !square || !square.empty || !square.enabled ) { return []; }\n\tfunction direction( { x, y }: Point, delta: Point ): Square[] {\n\t\tconst squares = [] as Square[];\n\t\tfor( ; ; ) {\n\t\t\tx += delta.x;\n\t\t\ty += delta.y;\n\t\t\tif( !board.boundsCheck( { x, y } ) ) { return []; }\n\t\t\tconst square = board.get( { x, y } );\n\t\t\tif( !square || square.empty || !square.enabled ) { return []; }\n\t\t\tif( square.color === color ) { return squares; }\n\t\t\tsquares.push( square );\n\t\t}\n\t}\n\tlet squares = [ square ];\n\tfor( const delta of directions ) {\n\t\tsquares = [ ...squares, ...direction( position, delta ) ];\n\t}\n\tif( squares.length <= 1 ) { return []; }\n\treturn squares;\n}\n\nclass RulesStandard implements Rules {\n\tpublic readonly name: string = 'Standard';\n\tpublic readonly ruleSet: RuleSet = RuleSet.standard;\n\tpublic readonly colors: number = 2;\n\tpublic readonly boardSize: Readonly<Size> = Object.freeze( { width: 8, height: 8 } );\n\n\tpublic isValid( game: Game, gameState: GameState, position: Point, color: number ) {\n\t\treturn getAffectedSquares( Board.fromGame( game, gameState ), position, color ).length > 0;\n\t}\n\n\tpublic compareScores( score1: number, score2: number ) {\n\t\treturn score1 - score2;\n\t}\n\n\tpublic getValidMoves( game: Game, gameState: GameState, color: number ) {\n\t\tconst points = [] as Point[];\n\t\tconst { size: { width, height } } = game;\n\t\tfor( let x = 0; x < width; ++x ) {\n\t\tfor( let y = 0; y < height; ++y ) {\n\t\t\tconst point = { x, y };\n\t\t\tif( this.isValid( game, gameState, point, color ) ) points.push( point );\n\t\t}\n\t\t}\n\t\treturn points;\n\t}\n\n\tpublic isGameOver( game: Game, gameState: GameState ) {\n\t\tconst { colors } = this;\n\t\tfor( let color = 0; color < colors; ++color ) {\n\t\t\tif( this.getValidMoves( game, gameState, color ).length > 0 ) return false;\n\t\t}\n\t\treturn true;\n\t}\n\n\tpublic makeMove( game: Game, gameState: GameState, position: Readonly<Point> ) {\n\t\tconst { turn: prevTurn, index: prevIndex } = gameState;\n\t\tconst board = Board.fromGame( game, gameState );\n\t\tconst squares = getAffectedSquares( board, position, prevTurn );\n\t\tif( squares.length === 0 ) return null;\n\t\tfor( const square of squares ) {\n\t\t\tsquare.color = prevTurn;\n\t\t}\n\t\tconst index = prevIndex + 1;\n\t\tconst lastMove = Object.freeze( { ...position } );\n\t\tconst data = board.getData();\n\t\tconst { colors } = this;\n\t\tlet turn: number|null = null;\n\t\tfor( let i = 0; i < colors; ++i ) {\n\t\t\tconst t = ( prevTurn + 1 + i ) % colors;\n\t\t\tif( this.getValidMoves( game, { turn: t, index, data, lastMove }, t ).length > 0 ) {\n\t\t\t\tturn = t;\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t\treturn { turn, index, data, lastMove };\n\t}\n\n\tpublic getScore( game: Game, gameState: GameState, color: number ) {\n\t\tconst board = Board.fromGame( game, gameState );\n\t\tlet score = 0;\n\t\tfor( const square of board ) {\n\t\t\tif( square && square.enabled && square.color === color ) {\n\t\t\t\t++score;\n\t\t\t}\n\t\t}\n\t\treturn score;\n\t}\n\n\tpublic newGame( gameId: string ) {\n\t\tconst { boardSize } = this;\n\n\t\tconst board = new Board;\n\t\tboard.reset( boardSize );\n\t\t// TODO: center? gets ugly with an odd dimension\n\t\tboard.get( { x: 3, y: 3 } ).color = 0;\n\t\tboard.get( { x: 4, y: 3 } ).color = 1;\n\t\tboard.get( { x: 3, y: 4 } ).color = 1;\n\t\tboard.get( { x: 4, y: 4 } ).color = 0;\n\t\tconst gameStates = [ {\n\t\t\tturn: 0,\n\t\t\tindex: 0,\n\t\t\tdata: board.getData(),\n\t\t\tlastMove: null\n\t\t} as GameState ];\n\t\treturn {\n\t\t\tgameId,\n\t\t\truleSet: this.ruleSet,\n\t\t\tmask: board.getMask(),\n\t\t\tcolors: Object.freeze( [ 'black', 'white' ] ),\n\t\t\tsize: Object.freeze( { ...boardSize } ),\n\t\t\tgameStates: Object.freeze( gameStates )\n\t\t};\n\t}\n}\n\nclass RulesReversed extends RulesStandard {\n\tpublic readonly name: string = 'Reversed';\n\tpublic readonly ruleSet: RuleSet = RuleSet.reversed;\n\n\tpublic compareScores( score1: number, score2: number ) {\n\t\treturn score2 - score1;\n\t}\n}\n\nexport const rulesStandard = new RulesStandard;\nexport const rulesReversed = new RulesReversed;\nexport const ruleSets = [ rulesStandard, rulesReversed ] as Rules[];\nexport const ruleSetMap = new Map<RuleSet, Rules>();\nfor( const ruleSet of ruleSets ) {\n\truleSetMap.set( ruleSet.ruleSet, ruleSet );\n}\n","import { Component, NgZone, ViewChild } from '@angular/core';\nimport { GameService } from 'client/game.service';\nimport { ModalDirective } from 'ngx-bootstrap';\nimport { ruleSets } from 'src/rule-sets';\n\n@Component( {\n\tselector: 'modal-new-game',\n\ttemplateUrl: 'new-game.component.html',\n\tstyleUrls: [ './new-game.component.scss' ]\n} )\nexport class ModalNewGameComponent {\n\tconstructor(\n\t\tprivate readonly gameService: GameService,\n\t\tprivate readonly zone: NgZone\n\t) {}\n\n\t@ViewChild( 'newGameModal' )\n\tprotected newGameModal: ModalDirective;\n\n\tpublic show( room: Room ) {\n\t\tconst { newGameModal, zone } = this;\n\t\tzone.run( () => {\n\t\t\tthis.roomId = room.roomId;\n\t\t\tnewGameModal.show();\n\t\t} );\n\t}\n\n\tpublic hide() {\n\t\tconst { newGameModal, zone } = this;\n\t\tzone.run( () => {\n\t\t\tthis.roomId = null;\n\t\t\tnewGameModal.hide();\n\t\t} );\n\t}\n\n\tpublic roomId: string|null;\n\tpublic ruleSet: RuleSet;\n\tpublic readonly ruleSets = ruleSets;\n\n\tpublic async newGame() {\n\t\tconst { gameService, roomId, ruleSet } = this;\n\t\tthis.hide();\n\t\tawait gameService.newGame( roomId, ruleSet );\n\t}\n}\n","import { SchedulerLike, Observable, Subject } from 'rxjs';\nimport { ZoneScheduler } from 'ngx-zone-scheduler';\nimport { Inject, Injectable, OnDestroy } from '@angular/core';\nimport { SessionService } from './session.service';\nimport { observeOn, shareReplay, scan, takeUntil } from 'rxjs/operators';\nimport { tapLog } from 'src/operators';\n\n@Injectable()\nexport class GameService implements OnDestroy {\n\tconstructor(\n\t\t@Inject(ZoneScheduler)\n\t\tprivate readonly scheduler: SchedulerLike,\n\t\t@Inject(SessionService)\n\t\tprivate readonly sessionService: SessionService\n\t) {\n\t\tthis.allGames =\n\t\tsessionService.getEvents<Game>( 'update' )\n\t\t.pipe(\n\t\t\ttakeUntil( this.destroyed ),\n\t\t\tscan<Game, Game[]>( ( prev, game ) => {\n\t\t\t\tconst games = [ ...prev ];\n\t\t\t\tconst index = games.findIndex( g => g.gameId === game.gameId );\n\t\t\t\tif( index >= 0 ) {\n\t\t\t\t\tgames.splice( index, 1, game );\n\t\t\t\t} else {\n\t\t\t\t\tgames.push( game );\n\t\t\t\t}\n\t\t\t\treturn games;\n\t\t\t}, [] as Game[] ),\n\t\t\tshareReplay( 1 )\n\t\t);\n\t}\n\n\tpublic ngOnDestroy() {\n\t\tthis.destroyed.next( true );\n\t\tthis.destroyed.complete();\n\t}\n\n\tpublic getGames() {\n\t\tconst { allGames, scheduler } = this;\n\t\treturn allGames.pipe( observeOn( scheduler ) );\n\t}\n\n\tpublic async newGame( roomId: string, ruleSet: RuleSet ) {\n\t\tconst { sessionService } = this;\n\t\treturn await sessionService.emit<Game>( 'newGame', { roomId, ruleSet } );\n\t}\n\n\tpublic async makeMove( roomId: string, position: Point ) {\n\t\tconst { sessionService } = this;\n\t\tawait sessionService.emit( 'makeMove', { roomId, position } );\n\t}\n\n\tprivate readonly destroyed = new Subject<true>();\n\tprivate readonly allGames: Observable<Game[]>;\n}\n","/**\n * @fileoverview This file was generated by the Angular template compiler. Do not edit.\n *\n * @suppress {suspiciousCode,uselessCode,missingProperties,missingOverride,checkTypes}\n * tslint:disable\n */\nimport * as i0 from \"./new-game.component.scss.shim.ngstyle\";\nimport * as i1 from \"@angular/core\";\nimport * as i2 from \"@angular/forms\";\nimport * as i3 from \"ngx-bootstrap/modal/modal.directive\";\nimport * as i4 from \"ngx-bootstrap/component-loader/component-loader.factory\";\nimport * as i5 from \"./header.component.ngfactory\";\nimport * as i6 from \"./header.component\";\nimport * as i7 from \"@angular/common\";\nimport * as i8 from \"./new-game.component\";\nimport * as i9 from \"../game.service\";\nvar styles_ModalNewGameComponent = [i0.styles];\nvar RenderType_ModalNewGameComponent = i1.ɵcrt({\n  encapsulation: 0,\n  styles: styles_ModalNewGameComponent,\n  data: {}\n});\nexport { RenderType_ModalNewGameComponent };\n\nfunction View_ModalNewGameComponent_1(_l) {\n  return i1.ɵvid(0, [(_l()(), i1.ɵeld(0, 0, null, null, 11, \"div\", [[\"class\", \"form-check-inline\"]], null, null, null, null, null)), (_l()(), i1.ɵeld(1, 0, null, null, 10, \"label\", [[\"class\", \"form-check-label\"]], null, null, null, null, null)), (_l()(), i1.ɵeld(2, 0, null, null, 8, \"input\", [[\"class\", \"form-check-input\"], [\"name\", \"ruleSet\"], [\"required\", \"required\"], [\"type\", \"radio\"]], [[1, \"required\", 0], [2, \"ng-untouched\", null], [2, \"ng-touched\", null], [2, \"ng-pristine\", null], [2, \"ng-dirty\", null], [2, \"ng-valid\", null], [2, \"ng-invalid\", null], [2, \"ng-pending\", null]], [[null, \"ngModelChange\"], [null, \"input\"], [null, \"blur\"], [null, \"compositionstart\"], [null, \"compositionend\"], [null, \"change\"]], function (_v, en, $event) {\n    var ad = true;\n    var _co = _v.component;\n\n    if (\"input\" === en) {\n      var pd_0 = i1.ɵnov(_v, 3)._handleInput($event.target.value) !== false;\n      ad = pd_0 && ad;\n    }\n\n    if (\"blur\" === en) {\n      var pd_1 = i1.ɵnov(_v, 3).onTouched() !== false;\n      ad = pd_1 && ad;\n    }\n\n    if (\"compositionstart\" === en) {\n      var pd_2 = i1.ɵnov(_v, 3)._compositionStart() !== false;\n      ad = pd_2 && ad;\n    }\n\n    if (\"compositionend\" === en) {\n      var pd_3 = i1.ɵnov(_v, 3)._compositionEnd($event.target.value) !== false;\n      ad = pd_3 && ad;\n    }\n\n    if (\"change\" === en) {\n      var pd_4 = i1.ɵnov(_v, 4).onChange() !== false;\n      ad = pd_4 && ad;\n    }\n\n    if (\"blur\" === en) {\n      var pd_5 = i1.ɵnov(_v, 4).onTouched() !== false;\n      ad = pd_5 && ad;\n    }\n\n    if (\"ngModelChange\" === en) {\n      var pd_6 = (_co.ruleSet = $event) !== false;\n      ad = pd_6 && ad;\n    }\n\n    return ad;\n  }, null, null)), i1.ɵdid(3, 16384, null, 0, i2.DefaultValueAccessor, [i1.Renderer2, i1.ElementRef, [2, i2.COMPOSITION_BUFFER_MODE]], null, null), i1.ɵdid(4, 212992, null, 0, i2.RadioControlValueAccessor, [i1.Renderer2, i1.ElementRef, i2.ɵangular_packages_forms_forms_i, i1.Injector], {\n    name: [0, \"name\"],\n    value: [1, \"value\"]\n  }, null), i1.ɵdid(5, 16384, null, 0, i2.RequiredValidator, [], {\n    required: [0, \"required\"]\n  }, null), i1.ɵprd(1024, null, i2.NG_VALIDATORS, function (p0_0) {\n    return [p0_0];\n  }, [i2.RequiredValidator]), i1.ɵprd(1024, null, i2.NG_VALUE_ACCESSOR, function (p0_0, p1_0) {\n    return [p0_0, p1_0];\n  }, [i2.DefaultValueAccessor, i2.RadioControlValueAccessor]), i1.ɵdid(8, 671744, null, 0, i2.NgModel, [[2, i2.ControlContainer], [6, i2.NG_VALIDATORS], [8, null], [6, i2.NG_VALUE_ACCESSOR]], {\n    name: [0, \"name\"],\n    model: [1, \"model\"]\n  }, {\n    update: \"ngModelChange\"\n  }), i1.ɵprd(2048, null, i2.NgControl, null, [i2.NgModel]), i1.ɵdid(10, 16384, null, 0, i2.NgControlStatus, [[4, i2.NgControl]], null, null), (_l()(), i1.ɵted(11, null, [\" \", \" \"]))], function (_ck, _v) {\n    var _co = _v.component;\n    var currVal_8 = \"ruleSet\";\n    var currVal_9 = _v.context.$implicit.ruleSet;\n\n    _ck(_v, 4, 0, currVal_8, currVal_9);\n\n    var currVal_10 = \"required\";\n\n    _ck(_v, 5, 0, currVal_10);\n\n    var currVal_11 = \"ruleSet\";\n    var currVal_12 = _co.ruleSet;\n\n    _ck(_v, 8, 0, currVal_11, currVal_12);\n  }, function (_ck, _v) {\n    var currVal_0 = i1.ɵnov(_v, 5).required ? \"\" : null;\n    var currVal_1 = i1.ɵnov(_v, 10).ngClassUntouched;\n    var currVal_2 = i1.ɵnov(_v, 10).ngClassTouched;\n    var currVal_3 = i1.ɵnov(_v, 10).ngClassPristine;\n    var currVal_4 = i1.ɵnov(_v, 10).ngClassDirty;\n    var currVal_5 = i1.ɵnov(_v, 10).ngClassValid;\n    var currVal_6 = i1.ɵnov(_v, 10).ngClassInvalid;\n    var currVal_7 = i1.ɵnov(_v, 10).ngClassPending;\n\n    _ck(_v, 2, 0, currVal_0, currVal_1, currVal_2, currVal_3, currVal_4, currVal_5, currVal_6, currVal_7);\n\n    var currVal_13 = _v.context.$implicit.name;\n\n    _ck(_v, 11, 0, currVal_13);\n  });\n}\n\nexport function View_ModalNewGameComponent_0(_l) {\n  return i1.ɵvid(0, [i1.ɵqud(402653184, 1, {\n    newGameModal: 0\n  }), (_l()(), i1.ɵeld(1, 16777216, null, null, 19, \"div\", [[\"aria-hidden\", \"true\"], [\"bsModal\", \"\"], [\"class\", \"modal fade\"], [\"role\", \"dialog\"], [\"tabindex\", \"-1\"]], null, [[null, \"click\"], [null, \"keydown.esc\"]], function (_v, en, $event) {\n    var ad = true;\n\n    if (\"click\" === en) {\n      var pd_0 = i1.ɵnov(_v, 2).onClick($event) !== false;\n      ad = pd_0 && ad;\n    }\n\n    if (\"keydown.esc\" === en) {\n      var pd_1 = i1.ɵnov(_v, 2).onEsc($event) !== false;\n      ad = pd_1 && ad;\n    }\n\n    return ad;\n  }, null, null)), i1.ɵdid(2, 212992, [[1, 4], [\"newGameModal\", 4]], 0, i3.ModalDirective, [i1.ElementRef, i1.ViewContainerRef, i1.Renderer2, i4.ComponentLoaderFactory], null, null), (_l()(), i1.ɵeld(3, 0, null, null, 17, \"div\", [[\"class\", \"modal-dialog modal-lg\"]], null, null, null, null, null)), (_l()(), i1.ɵeld(4, 0, null, null, 16, \"div\", [[\"class\", \"modal-content\"]], null, null, null, null, null)), (_l()(), i1.ɵeld(5, 0, null, null, 2, \"modal-header\", [], null, [[null, \"closeClick\"]], function (_v, en, $event) {\n    var ad = true;\n\n    if (\"closeClick\" === en) {\n      var pd_0 = i1.ɵnov(_v, 2).hide() !== false;\n      ad = pd_0 && ad;\n    }\n\n    return ad;\n  }, i5.View_ModalHeaderComponent_0, i5.RenderType_ModalHeaderComponent)), i1.ɵdid(6, 49152, null, 0, i6.ModalHeaderComponent, [], null, {\n    closeClick: \"closeClick\"\n  }), (_l()(), i1.ɵted(-1, 0, [\" New Game \"])), (_l()(), i1.ɵeld(8, 0, null, null, 12, \"div\", [[\"class\", \"modal-body\"]], null, null, null, null, null)), (_l()(), i1.ɵeld(9, 0, null, null, 11, \"form\", [[\"autocomplete\", \"off\"], [\"class\", \"clearfix\"], [\"novalidate\", \"\"]], [[2, \"ng-untouched\", null], [2, \"ng-touched\", null], [2, \"ng-pristine\", null], [2, \"ng-dirty\", null], [2, \"ng-valid\", null], [2, \"ng-invalid\", null], [2, \"ng-pending\", null]], [[null, \"ngSubmit\"], [null, \"submit\"], [null, \"reset\"]], function (_v, en, $event) {\n    var ad = true;\n    var _co = _v.component;\n\n    if (\"submit\" === en) {\n      var pd_0 = i1.ɵnov(_v, 11).onSubmit($event) !== false;\n      ad = pd_0 && ad;\n    }\n\n    if (\"reset\" === en) {\n      var pd_1 = i1.ɵnov(_v, 11).onReset() !== false;\n      ad = pd_1 && ad;\n    }\n\n    if (\"ngSubmit\" === en) {\n      var pd_2 = _co.newGame() !== false;\n      ad = pd_2 && ad;\n    }\n\n    return ad;\n  }, null, null)), i1.ɵdid(10, 16384, null, 0, i2.ɵangular_packages_forms_forms_bg, [], null, null), i1.ɵdid(11, 4210688, [[\"newGameForm\", 4]], 0, i2.NgForm, [[8, null], [8, null]], null, {\n    ngSubmit: \"ngSubmit\"\n  }), i1.ɵprd(2048, null, i2.ControlContainer, null, [i2.NgForm]), i1.ɵdid(13, 16384, null, 0, i2.NgControlStatusGroup, [[4, i2.ControlContainer]], null, null), (_l()(), i1.ɵeld(14, 0, null, null, 4, \"fieldset\", [[\"class\", \"form-group\"]], null, null, null, null, null)), (_l()(), i1.ɵeld(15, 0, null, null, 1, \"legend\", [], null, null, null, null, null)), (_l()(), i1.ɵted(-1, null, [\"Rule Set\"])), (_l()(), i1.ɵand(16777216, null, null, 1, null, View_ModalNewGameComponent_1)), i1.ɵdid(18, 802816, null, 0, i7.NgForOf, [i1.ViewContainerRef, i1.TemplateRef, i1.IterableDiffers], {\n    ngForOf: [0, \"ngForOf\"]\n  }, null), (_l()(), i1.ɵeld(19, 0, null, null, 1, \"button\", [[\"class\", \"btn float-right\"]], [[8, \"disabled\", 0]], null, null, null, null)), (_l()(), i1.ɵted(-1, null, [\" Start \"]))], function (_ck, _v) {\n    var _co = _v.component;\n\n    _ck(_v, 2, 0);\n\n    var currVal_7 = _co.ruleSets;\n\n    _ck(_v, 18, 0, currVal_7);\n  }, function (_ck, _v) {\n    var currVal_0 = i1.ɵnov(_v, 13).ngClassUntouched;\n    var currVal_1 = i1.ɵnov(_v, 13).ngClassTouched;\n    var currVal_2 = i1.ɵnov(_v, 13).ngClassPristine;\n    var currVal_3 = i1.ɵnov(_v, 13).ngClassDirty;\n    var currVal_4 = i1.ɵnov(_v, 13).ngClassValid;\n    var currVal_5 = i1.ɵnov(_v, 13).ngClassInvalid;\n    var currVal_6 = i1.ɵnov(_v, 13).ngClassPending;\n\n    _ck(_v, 9, 0, currVal_0, currVal_1, currVal_2, currVal_3, currVal_4, currVal_5, currVal_6);\n\n    var currVal_8 = !i1.ɵnov(_v, 11).form.valid;\n\n    _ck(_v, 19, 0, currVal_8);\n  });\n}\nexport function View_ModalNewGameComponent_Host_0(_l) {\n  return i1.ɵvid(0, [(_l()(), i1.ɵeld(0, 0, null, null, 1, \"modal-new-game\", [], null, null, null, View_ModalNewGameComponent_0, RenderType_ModalNewGameComponent)), i1.ɵdid(1, 49152, null, 0, i8.ModalNewGameComponent, [i9.GameService, i1.NgZone], null, null)], null, null);\n}\nvar ModalNewGameComponentNgFactory = i1.ɵccf(\"modal-new-game\", i8.ModalNewGameComponent, View_ModalNewGameComponent_Host_0, {}, {}, []);\nexport { ModalNewGameComponentNgFactory };","/**\n * @fileoverview This file was generated by the Angular template compiler. Do not edit.\n *\n * @suppress {suspiciousCode,uselessCode,missingProperties,missingOverride,checkTypes}\n * tslint:disable\n */\nvar styles = [\"\"];\nexport { styles };","<div bsModal #newGameModal=\"bs-modal\" class=\"modal fade\" tabindex=\"-1\" role=\"dialog\" aria-hidden=\"true\"> <div class=\"modal-dialog modal-lg\"> <div class=\"modal-content\"> <modal-header (closeClick)=\"newGameModal.hide()\"> New Game </modal-header> <div class=\"modal-body\"> <form (ngSubmit)=\"newGame()\" class=\"clearfix\" #newGameForm=\"ngForm\" autocomplete=\"off\"> <fieldset class=\"form-group\"> <legend>Rule Set</legend> <div class=\"form-check-inline\" *ngFor=\"let rs of ruleSets\"> <label class=\"form-check-label\"> <input type=\"radio\" class=\"form-check-input\" name=\"ruleSet\" [value]=\"rs.ruleSet\" [(ngModel)]=\"ruleSet\" required=\"required\"> {{rs.name}} </label> </div> </fieldset> <button class=\"btn float-right\" [disabled]=\"!newGameForm.form.valid\"> Start </button> </form> </div> </div> </div> </div> ","import { rulesStandard } from 'src/rule-sets';\n\nimport { combineLatest, SchedulerLike, Subject } from 'rxjs';\n\nimport { Component, Inject, OnInit, ViewChild, OnDestroy } from '@angular/core';\n\nimport { GameService } from './game.service';\nimport { RoomService } from './room.service';\nimport { ZoneScheduler } from 'ngx-zone-scheduler';\nimport { observeOn, takeUntil } from 'rxjs/operators';\nimport { ModalNewGameComponent } from './modal/new-game.component';\nimport { Board } from 'src/board';\nimport { colors } from 'data/colors.yaml';\n\nconst rules = rulesStandard;\n\n@Component( {\n\tselector: 'game',\n\ttemplateUrl: './game.component.html',\n\tstyleUrls: [ './game.component.scss' ]\n} )\nexport class GameComponent implements OnInit, OnDestroy {\n\tconstructor(\n\t\tprivate readonly gameService: GameService,\n\t\tprivate readonly roomService: RoomService,\n\t\t@Inject(ZoneScheduler)\n\t\tprivate readonly scheduler: SchedulerLike\n\t) {}\n\n\t@ViewChild( 'newGameModal' )\n\tpublic newGameModal: ModalNewGameComponent;\n\n\tpublic ngOnInit() {\n\t\tconst { gameService, roomService, destroyed, scheduler } = this;\n\t\tconst currentRoom = roomService.getCurrentRoom();\n\t\tcurrentRoom.subscribe( room => {\n\t\t\tthis.room = room || null;\n\t\t} );\n\t\tcombineLatest( gameService.getGames(), currentRoom,\n\t\t\t( games, room ) => room\n\t\t\t? games.filter( game => game.gameId === room.gameId )[ 0 ] || null\n\t\t\t: null\n\t\t)\n\t\t.pipe(\n\t\t\ttakeUntil( destroyed ),\n\t\t\tobserveOn( scheduler )\n\t\t)\n\t\t.subscribe( game => {\n\t\t\tthis.game = game;\n\t\t\tif( game ) {\n\t\t\t\tconst gameState = this.gameState = game.gameStates.slice( -1 )[ 0 ];\n\t\t\t\tthis.board = Board.fromGame( game, gameState );\n\t\t\t\tthis.lastMove = gameState.lastMove;\n\t\t\t\tconst c = this.colors = [ ...game.colors ];\n\t\t\t\tif( gameState.turn == null ) this.turn = null;\n\t\t\t\telse this.turn = colors[ c[ gameState.turn ] ].displayName;\n\t\t\t} else {\n\t\t\t\tthis.gameState = null;\n\t\t\t\tthis.board = null;\n\t\t\t\tthis.lastMove = null;\n\t\t\t\tthis.turn = null;\n\t\t\t}\n\t\t} );\n\t}\n\n\tpublic ngOnDestroy() {\n\t\tthis.destroyed.next( true );\n\t\tthis.destroyed.complete();\n\t}\n\n\tpublic colors = null as string[];\n\tpublic turn = null as string|null;\n\tpublic room = null as Room|null;\n\tpublic game = null as Game|null;\n\tpublic gameState = null as GameState|null;\n\tpublic lastMove = null as Point|null;\n\tpublic board = new Board;\n\tpublic rules = null as Rules|null;\n\n\tprivate readonly destroyed = new Subject<true>();\n\n\tpublic onMouseMove( { square }: BoardMouseEvent ) {\n\t\tif( !square ) return;\n\t\tconst { game, gameState } = this;\n\n\t\tdocument.documentElement.style.cursor =\n\t\t\t( rules.isGameOver( game, gameState )\n\t\t||\trules.isValid( game, gameState, square.position, gameState.turn ) )\n\t\t?   'pointer'\n\t\t\t: null;\n\t}\n\n\tpublic onClick( { square }: BoardMouseEvent ) {\n\t\tif( !square ) return;\n\t\tconst { room, game, gameState, gameService, newGameModal } = this;\n\t\tif( rules.isGameOver( game, gameState ) ) {\n\t\t\tnewGameModal.show( room );\n\t\t} else {\n\t\t\tgameService.makeMove( room.roomId, square.position );\n\t\t}\n\t}\n}\n","/**\n * @fileoverview This file was generated by the Angular template compiler. Do not edit.\n *\n * @suppress {suspiciousCode,uselessCode,missingProperties,missingOverride,checkTypes}\n * tslint:disable\n */\nimport * as i0 from \"./game.component.scss.shim.ngstyle\";\nimport * as i1 from \"@angular/core\";\nimport * as i2 from \"./board.component.ngfactory\";\nimport * as i3 from \"./board.component\";\nimport * as i4 from \"@angular/common\";\nimport * as i5 from \"./modal/new-game.component.ngfactory\";\nimport * as i6 from \"./modal/new-game.component\";\nimport * as i7 from \"./game.service\";\nimport * as i8 from \"./game.component\";\nimport * as i9 from \"./room.service\";\nimport * as i10 from \"ngx-zone-scheduler/dist/zone-scheduler\";\nvar styles_GameComponent = [i0.styles];\nvar RenderType_GameComponent = i1.ɵcrt({\n  encapsulation: 0,\n  styles: styles_GameComponent,\n  data: {}\n});\nexport { RenderType_GameComponent };\n\nfunction View_GameComponent_2(_l) {\n  return i1.ɵvid(0, [(_l()(), i1.ɵeld(0, 0, null, null, 1, \"div\", [[\"class\", \"card-body\"]], null, null, null, null, null)), (_l()(), i1.ɵted(-1, null, [\" Game Over \"]))], null, null);\n}\n\nfunction View_GameComponent_3(_l) {\n  return i1.ɵvid(0, [(_l()(), i1.ɵeld(0, 0, null, null, 1, \"div\", [[\"class\", \"card-body\"]], null, null, null, null, null)), (_l()(), i1.ɵted(1, null, [\" \", \"\\u2019s Turn \"]))], null, function (_ck, _v) {\n    var _co = _v.component;\n    var currVal_0 = _co.turn;\n\n    _ck(_v, 1, 0, currVal_0);\n  });\n}\n\nfunction View_GameComponent_1(_l) {\n  return i1.ɵvid(0, [(_l()(), i1.ɵeld(0, 0, null, null, 9, \"div\", [[\"class\", \"row\"]], null, null, null, null, null)), (_l()(), i1.ɵeld(1, 0, null, null, 2, \"div\", [[\"class\", \"col-12\"]], null, null, null, null, null)), (_l()(), i1.ɵeld(2, 0, null, null, 1, \"board\", [], null, [[null, \"click\"], [null, \"mousemove\"]], function (_v, en, $event) {\n    var ad = true;\n    var _co = _v.component;\n\n    if (\"click\" === en) {\n      var pd_0 = _co.onClick($event) !== false;\n      ad = pd_0 && ad;\n    }\n\n    if (\"mousemove\" === en) {\n      var pd_1 = _co.onMouseMove($event) !== false;\n      ad = pd_1 && ad;\n    }\n\n    return ad;\n  }, i2.View_BoardComponent_0, i2.RenderType_BoardComponent)), i1.ɵdid(3, 4964352, null, 0, i3.BoardComponent, [], {\n    colors: [0, \"colors\"],\n    board: [1, \"board\"],\n    lastMove: [2, \"lastMove\"]\n  }, {\n    click: \"click\",\n    mousemove: \"mousemove\"\n  }), (_l()(), i1.ɵeld(4, 0, null, null, 5, \"div\", [[\"class\", \"col-12\"]], null, null, null, null, null)), (_l()(), i1.ɵeld(5, 0, null, null, 4, \"div\", [[\"class\", \"card\"]], null, null, null, null, null)), (_l()(), i1.ɵand(16777216, null, null, 1, null, View_GameComponent_2)), i1.ɵdid(7, 16384, null, 0, i4.NgIf, [i1.ViewContainerRef, i1.TemplateRef], {\n    ngIf: [0, \"ngIf\"]\n  }, null), (_l()(), i1.ɵand(16777216, null, null, 1, null, View_GameComponent_3)), i1.ɵdid(9, 16384, null, 0, i4.NgIf, [i1.ViewContainerRef, i1.TemplateRef], {\n    ngIf: [0, \"ngIf\"]\n  }, null)], function (_ck, _v) {\n    var _co = _v.component;\n    var currVal_0 = _co.colors;\n    var currVal_1 = _co.board;\n    var currVal_2 = _co.lastMove;\n\n    _ck(_v, 3, 0, currVal_0, currVal_1, currVal_2);\n\n    var currVal_3 = _co.turn == null;\n\n    _ck(_v, 7, 0, currVal_3);\n\n    var currVal_4 = _co.turn != null;\n\n    _ck(_v, 9, 0, currVal_4);\n  }, null);\n}\n\nexport function View_GameComponent_0(_l) {\n  return i1.ɵvid(0, [i1.ɵqud(402653184, 1, {\n    newGameModal: 0\n  }), (_l()(), i1.ɵand(16777216, null, null, 1, null, View_GameComponent_1)), i1.ɵdid(2, 16384, null, 0, i4.NgIf, [i1.ViewContainerRef, i1.TemplateRef], {\n    ngIf: [0, \"ngIf\"]\n  }, null), (_l()(), i1.ɵeld(3, 0, null, null, 1, \"modal-new-game\", [], null, null, null, i5.View_ModalNewGameComponent_0, i5.RenderType_ModalNewGameComponent)), i1.ɵdid(4, 49152, [[1, 4], [\"newGameModal\", 4]], 0, i6.ModalNewGameComponent, [i7.GameService, i1.NgZone], null, null)], function (_ck, _v) {\n    var _co = _v.component;\n    var currVal_0 = _co.game;\n\n    _ck(_v, 2, 0, currVal_0);\n  }, null);\n}\nexport function View_GameComponent_Host_0(_l) {\n  return i1.ɵvid(0, [(_l()(), i1.ɵeld(0, 0, null, null, 1, \"game\", [], null, null, null, View_GameComponent_0, RenderType_GameComponent)), i1.ɵdid(1, 245760, null, 0, i8.GameComponent, [i7.GameService, i9.RoomService, i10.ZoneScheduler], null, null)], function (_ck, _v) {\n    _ck(_v, 1, 0);\n  }, null);\n}\nvar GameComponentNgFactory = i1.ɵccf(\"game\", i8.GameComponent, View_GameComponent_Host_0, {}, {}, []);\nexport { GameComponentNgFactory };","/**\n * @fileoverview This file was generated by the Angular template compiler. Do not edit.\n *\n * @suppress {suspiciousCode,uselessCode,missingProperties,missingOverride,checkTypes}\n * tslint:disable\n */\nvar styles = [\"canvas[_ngcontent-%COMP%] { max-width: 100%; }\"];\nexport { styles };","<div class=\"row\" *ngIf=\"game\"> <div class=\"col-12\"> <board [board]=\"board\" [colors]=\"colors\" [lastMove]=\"lastMove\" (click)=\"onClick($event)\" (mousemove)=\"onMouseMove($event)\"></board> </div> <div class=\"col-12\"> <div class=\"card\"> <div class=\"card-body\" *ngIf=\"turn == null\"> Game Over </div> <div class=\"card-body\" *ngIf=\"turn != null\"> {{turn}}’s Turn </div> </div> </div> </div> <modal-new-game #newGameModal></modal-new-game> ","import { combineLatest } from 'rxjs';\nimport { Component } from '@angular/core';\nimport { RoomService } from './room.service';\n\n@Component( {\n\tselector: 'chat',\n\ttemplateUrl: './chat.component.html',\n\tstyleUrls: [ './chat.component.scss' ]\n} )\nexport class ChatComponent {\n\tconstructor(\n\t\tprivate readonly roomService: RoomService\n\t) {}\n\n\tprotected ngOnInit() {\n\t\tconst { roomService } = this,\n\t\t\tcurrentRoom = roomService.getCurrentRoom(),\n\t\t\tallMessages = roomService.getMessages();\n\t\tcurrentRoom.subscribe( room => {\n\t\t\tthis.room = room;\n\t\t} );\n\t\tcombineLatest( currentRoom, allMessages, ( room, messages ) => {\n\t\t\tif( room ) {\n\t\t\t\treturn messages.filter( message => message.roomId === room.roomId );\n\t\t\t} else {\n\t\t\t\treturn [];\n\t\t\t}\n\t\t} ).subscribe( messages => {\n\t\t\tthis.messages = messages;\n\t\t} );\n\t}\n\n\tpublic room: Room|null;\n\n\tpublic messages = [] as Message[];\n\n\tpublic text = '';\n\n\tpublic async sendMessage() {\n\t\tconst { roomService, room, text: message } = this;\n\t\tif( !room || !message ) { return; }\n\t\tthis.text = '';\n\t\tawait roomService.sendMessage( room.roomId, message );\n\t}\n}\n","/**\n * @fileoverview This file was generated by the Angular template compiler. Do not edit.\n *\n * @suppress {suspiciousCode,uselessCode,missingProperties,missingOverride,checkTypes}\n * tslint:disable\n */\nimport * as i0 from \"./chat.component.scss.shim.ngstyle\";\nimport * as i1 from \"@angular/core\";\nimport * as i2 from \"@angular/common\";\nimport * as i3 from \"@angular/forms\";\nimport * as i4 from \"../../node_modules/@fortawesome/angular-fontawesome/angular-fontawesome.ngfactory\";\nimport * as i5 from \"@fortawesome/angular-fontawesome\";\nimport * as i6 from \"@angular/platform-browser\";\nimport * as i7 from \"ngx-auto-scroll\";\nimport * as i8 from \"./chat.component\";\nimport * as i9 from \"./room.service\";\nvar styles_ChatComponent = [i0.styles];\nvar RenderType_ChatComponent = i1.ɵcrt({\n  encapsulation: 0,\n  styles: styles_ChatComponent,\n  data: {}\n});\nexport { RenderType_ChatComponent };\n\nfunction View_ChatComponent_2(_l) {\n  return i1.ɵvid(0, [(_l()(), i1.ɵeld(0, 0, null, null, 1, \"h4\", [[\"class\", \"list-group-item-heading text-muted\"]], null, null, null, null, null)), (_l()(), i1.ɵted(1, null, [\"\", \"\"]))], null, function (_ck, _v) {\n    var currVal_0 = _v.parent.context.$implicit.user;\n\n    _ck(_v, 1, 0, currVal_0);\n  });\n}\n\nfunction View_ChatComponent_1(_l) {\n  return i1.ɵvid(0, [(_l()(), i1.ɵeld(0, 0, null, null, 4, \"div\", [[\"class\", \"list-group-item\"]], null, null, null, null, null)), (_l()(), i1.ɵand(16777216, null, null, 1, null, View_ChatComponent_2)), i1.ɵdid(2, 16384, null, 0, i2.NgIf, [i1.ViewContainerRef, i1.TemplateRef], {\n    ngIf: [0, \"ngIf\"]\n  }, null), (_l()(), i1.ɵeld(3, 0, null, null, 1, \"p\", [[\"class\", \"list-group-item-text mb-0\"]], null, null, null, null, null)), (_l()(), i1.ɵted(4, null, [\"\", \"\"]))], function (_ck, _v) {\n    var currVal_0 = _v.context.$implicit.user;\n\n    _ck(_v, 2, 0, currVal_0);\n  }, function (_ck, _v) {\n    var currVal_1 = _v.context.$implicit.message;\n\n    _ck(_v, 4, 0, currVal_1);\n  });\n}\n\nexport function View_ChatComponent_0(_l) {\n  return i1.ɵvid(0, [(_l()(), i1.ɵeld(0, 0, null, null, 26, \"div\", [[\"class\", \"row\"]], null, null, null, null, null)), (_l()(), i1.ɵeld(1, 0, null, null, 20, \"div\", [[\"class\", \"col-12\"]], null, null, null, null, null)), (_l()(), i1.ɵeld(2, 0, null, null, 19, \"form\", [[\"autocomplete\", \"off\"], [\"novalidate\", \"\"]], [[2, \"ng-untouched\", null], [2, \"ng-touched\", null], [2, \"ng-pristine\", null], [2, \"ng-dirty\", null], [2, \"ng-valid\", null], [2, \"ng-invalid\", null], [2, \"ng-pending\", null]], [[null, \"ngSubmit\"], [null, \"submit\"], [null, \"reset\"]], function (_v, en, $event) {\n    var ad = true;\n    var _co = _v.component;\n\n    if (\"submit\" === en) {\n      var pd_0 = i1.ɵnov(_v, 4).onSubmit($event) !== false;\n      ad = pd_0 && ad;\n    }\n\n    if (\"reset\" === en) {\n      var pd_1 = i1.ɵnov(_v, 4).onReset() !== false;\n      ad = pd_1 && ad;\n    }\n\n    if (\"ngSubmit\" === en) {\n      var pd_2 = _co.sendMessage() !== false;\n      ad = pd_2 && ad;\n    }\n\n    return ad;\n  }, null, null)), i1.ɵdid(3, 16384, null, 0, i3.ɵangular_packages_forms_forms_bg, [], null, null), i1.ɵdid(4, 4210688, [[\"messageForm\", 4]], 0, i3.NgForm, [[8, null], [8, null]], null, {\n    ngSubmit: \"ngSubmit\"\n  }), i1.ɵprd(2048, null, i3.ControlContainer, null, [i3.NgForm]), i1.ɵdid(6, 16384, null, 0, i3.NgControlStatusGroup, [[4, i3.ControlContainer]], null, null), (_l()(), i1.ɵeld(7, 0, null, null, 14, \"div\", [[\"class\", \"form-group\"]], null, null, null, null, null)), (_l()(), i1.ɵeld(8, 0, null, null, 13, \"div\", [[\"class\", \"input-group\"]], null, null, null, null, null)), (_l()(), i1.ɵeld(9, 0, null, null, 7, \"input\", [[\"autocomplete\", \"off\"], [\"class\", \"form-control\"], [\"name\", \"text\"], [\"placeholder\", \"Enter message\"], [\"required\", \"required\"], [\"type\", \"text\"]], [[1, \"required\", 0], [2, \"ng-untouched\", null], [2, \"ng-touched\", null], [2, \"ng-pristine\", null], [2, \"ng-dirty\", null], [2, \"ng-valid\", null], [2, \"ng-invalid\", null], [2, \"ng-pending\", null]], [[null, \"ngModelChange\"], [null, \"input\"], [null, \"blur\"], [null, \"compositionstart\"], [null, \"compositionend\"]], function (_v, en, $event) {\n    var ad = true;\n    var _co = _v.component;\n\n    if (\"input\" === en) {\n      var pd_0 = i1.ɵnov(_v, 10)._handleInput($event.target.value) !== false;\n      ad = pd_0 && ad;\n    }\n\n    if (\"blur\" === en) {\n      var pd_1 = i1.ɵnov(_v, 10).onTouched() !== false;\n      ad = pd_1 && ad;\n    }\n\n    if (\"compositionstart\" === en) {\n      var pd_2 = i1.ɵnov(_v, 10)._compositionStart() !== false;\n      ad = pd_2 && ad;\n    }\n\n    if (\"compositionend\" === en) {\n      var pd_3 = i1.ɵnov(_v, 10)._compositionEnd($event.target.value) !== false;\n      ad = pd_3 && ad;\n    }\n\n    if (\"ngModelChange\" === en) {\n      var pd_4 = (_co.text = $event) !== false;\n      ad = pd_4 && ad;\n    }\n\n    return ad;\n  }, null, null)), i1.ɵdid(10, 16384, null, 0, i3.DefaultValueAccessor, [i1.Renderer2, i1.ElementRef, [2, i3.COMPOSITION_BUFFER_MODE]], null, null), i1.ɵdid(11, 16384, null, 0, i3.RequiredValidator, [], {\n    required: [0, \"required\"]\n  }, null), i1.ɵprd(1024, null, i3.NG_VALIDATORS, function (p0_0) {\n    return [p0_0];\n  }, [i3.RequiredValidator]), i1.ɵprd(1024, null, i3.NG_VALUE_ACCESSOR, function (p0_0) {\n    return [p0_0];\n  }, [i3.DefaultValueAccessor]), i1.ɵdid(14, 671744, null, 0, i3.NgModel, [[2, i3.ControlContainer], [6, i3.NG_VALIDATORS], [8, null], [6, i3.NG_VALUE_ACCESSOR]], {\n    name: [0, \"name\"],\n    model: [1, \"model\"]\n  }, {\n    update: \"ngModelChange\"\n  }), i1.ɵprd(2048, null, i3.NgControl, null, [i3.NgModel]), i1.ɵdid(16, 16384, null, 0, i3.NgControlStatus, [[4, i3.NgControl]], null, null), (_l()(), i1.ɵeld(17, 0, null, null, 4, \"div\", [[\"class\", \"input-group-append\"]], null, null, null, null, null)), (_l()(), i1.ɵeld(18, 0, null, null, 3, \"button\", [], [[8, \"disabled\", 0]], null, null, null, null)), (_l()(), i1.ɵeld(19, 0, null, null, 2, \"fa-icon\", [[\"class\", \"ng-fa-icon\"]], [[8, \"innerHTML\", 1]], null, null, i4.View_FaIconComponent_0, i4.RenderType_FaIconComponent)), i1.ɵdid(20, 573440, null, 0, i5.FaIconComponent, [i6.DomSanitizer], {\n    iconProp: [0, \"iconProp\"]\n  }, null), i1.ɵpad(21, 2), (_l()(), i1.ɵeld(22, 0, null, null, 4, \"div\", [[\"class\", \"col-12\"]], null, null, null, null, null)), (_l()(), i1.ɵeld(23, 0, null, null, 3, \"div\", [[\"class\", \"list-group\"], [\"ngx-auto-scroll\", \"\"]], null, [[null, \"scroll\"]], function (_v, en, $event) {\n    var ad = true;\n\n    if (\"scroll\" === en) {\n      var pd_0 = i1.ɵnov(_v, 24).scrollHandler() !== false;\n      ad = pd_0 && ad;\n    }\n\n    return ad;\n  }, null, null)), i1.ɵdid(24, 1196032, null, 0, i7.NgxAutoScroll, [i1.ElementRef], null, null), (_l()(), i1.ɵand(16777216, null, null, 1, null, View_ChatComponent_1)), i1.ɵdid(26, 802816, null, 0, i2.NgForOf, [i1.ViewContainerRef, i1.TemplateRef, i1.IterableDiffers], {\n    ngForOf: [0, \"ngForOf\"]\n  }, null)], function (_ck, _v) {\n    var _co = _v.component;\n    var currVal_15 = \"required\";\n\n    _ck(_v, 11, 0, currVal_15);\n\n    var currVal_16 = \"text\";\n    var currVal_17 = _co.text;\n\n    _ck(_v, 14, 0, currVal_16, currVal_17);\n\n    var currVal_20 = _ck(_v, 21, 0, \"far\", \"comment\");\n\n    _ck(_v, 20, 0, currVal_20);\n\n    var currVal_21 = _co.messages;\n\n    _ck(_v, 26, 0, currVal_21);\n  }, function (_ck, _v) {\n    var currVal_0 = i1.ɵnov(_v, 6).ngClassUntouched;\n    var currVal_1 = i1.ɵnov(_v, 6).ngClassTouched;\n    var currVal_2 = i1.ɵnov(_v, 6).ngClassPristine;\n    var currVal_3 = i1.ɵnov(_v, 6).ngClassDirty;\n    var currVal_4 = i1.ɵnov(_v, 6).ngClassValid;\n    var currVal_5 = i1.ɵnov(_v, 6).ngClassInvalid;\n    var currVal_6 = i1.ɵnov(_v, 6).ngClassPending;\n\n    _ck(_v, 2, 0, currVal_0, currVal_1, currVal_2, currVal_3, currVal_4, currVal_5, currVal_6);\n\n    var currVal_7 = i1.ɵnov(_v, 11).required ? \"\" : null;\n    var currVal_8 = i1.ɵnov(_v, 16).ngClassUntouched;\n    var currVal_9 = i1.ɵnov(_v, 16).ngClassTouched;\n    var currVal_10 = i1.ɵnov(_v, 16).ngClassPristine;\n    var currVal_11 = i1.ɵnov(_v, 16).ngClassDirty;\n    var currVal_12 = i1.ɵnov(_v, 16).ngClassValid;\n    var currVal_13 = i1.ɵnov(_v, 16).ngClassInvalid;\n    var currVal_14 = i1.ɵnov(_v, 16).ngClassPending;\n\n    _ck(_v, 9, 0, currVal_7, currVal_8, currVal_9, currVal_10, currVal_11, currVal_12, currVal_13, currVal_14);\n\n    var currVal_18 = !i1.ɵnov(_v, 4).form.valid;\n\n    _ck(_v, 18, 0, currVal_18);\n\n    var currVal_19 = i1.ɵnov(_v, 20).renderedIconHTML;\n\n    _ck(_v, 19, 0, currVal_19);\n  });\n}\nexport function View_ChatComponent_Host_0(_l) {\n  return i1.ɵvid(0, [(_l()(), i1.ɵeld(0, 0, null, null, 1, \"chat\", [], null, null, null, View_ChatComponent_0, RenderType_ChatComponent)), i1.ɵdid(1, 114688, null, 0, i8.ChatComponent, [i9.RoomService], null, null)], function (_ck, _v) {\n    _ck(_v, 1, 0);\n  }, null);\n}\nvar ChatComponentNgFactory = i1.ɵccf(\"chat\", i8.ChatComponent, View_ChatComponent_Host_0, {}, {}, []);\nexport { ChatComponentNgFactory };","/**\n * @fileoverview This file was generated by the Angular template compiler. Do not edit.\n *\n * @suppress {suspiciousCode,uselessCode,missingProperties,missingOverride,checkTypes}\n * tslint:disable\n */\nvar styles = [\".list-group[_ngcontent-%COMP%] { height: 50vh; overflow-y: auto; }\\n\\n.list-group[_ngcontent-%COMP%]   .list-group-item-text[_ngcontent-%COMP%] { white-space: pre-wrap; }\"];\nexport { styles };","<div class=\"row\"> <div class=\"col-12\"> <form (ngSubmit)=\"sendMessage()\" #messageForm=\"ngForm\" autocomplete=\"off\"> <div class=\"form-group\"> <div class=\"input-group\"> <input type=\"text\" class=\"form-control\" required=\"required\" placeholder=\"Enter message\" [(ngModel)]=\"text\" name=\"text\" autocomplete=\"off\"/> <div class=\"input-group-append\"> <button [disabled]=\"!messageForm.form.valid\"> <fa-icon [icon]=\"[ 'far', 'comment' ]\"></fa-icon> </button> </div> </div> </div> </form> </div> <div class=\"col-12\"> <div class=\"list-group\" ngx-auto-scroll> <div class=\"list-group-item\" *ngFor=\"let message of messages\"> <h4 class=\"list-group-item-heading text-muted\" *ngIf=\"message.user\">{{message.user}}</h4> <p class=\"list-group-item-text mb-0\">{{message.message}}</p> </div> </div> </div> </div> ","export class RoomComponent {}","/**\n * @fileoverview This file was generated by the Angular template compiler. Do not edit.\n *\n * @suppress {suspiciousCode,uselessCode,missingProperties,missingOverride,checkTypes}\n * tslint:disable\n */\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"./game.component.ngfactory\";\nimport * as i2 from \"./game.component\";\nimport * as i3 from \"./game.service\";\nimport * as i4 from \"./room.service\";\nimport * as i5 from \"ngx-zone-scheduler/dist/zone-scheduler\";\nimport * as i6 from \"./chat.component.ngfactory\";\nimport * as i7 from \"./chat.component\";\nimport * as i8 from \"./room.component\";\nvar styles_RoomComponent = [];\nvar RenderType_RoomComponent = i0.ɵcrt({\n  encapsulation: 2,\n  styles: styles_RoomComponent,\n  data: {}\n});\nexport { RenderType_RoomComponent };\nexport function View_RoomComponent_0(_l) {\n  return i0.ɵvid(0, [(_l()(), i0.ɵeld(0, 0, null, null, 4, \"div\", [[\"class\", \"row\"]], null, null, null, null, null)), (_l()(), i0.ɵeld(1, 0, null, null, 1, \"game\", [[\"class\", \"col-lg-5 col-sm-6 col-12\"]], null, null, null, i1.View_GameComponent_0, i1.RenderType_GameComponent)), i0.ɵdid(2, 245760, null, 0, i2.GameComponent, [i3.GameService, i4.RoomService, i5.ZoneScheduler], null, null), (_l()(), i0.ɵeld(3, 0, null, null, 1, \"chat\", [[\"class\", \"col-lg-7 col-sm-6 col-12\"]], null, null, null, i6.View_ChatComponent_0, i6.RenderType_ChatComponent)), i0.ɵdid(4, 114688, null, 0, i7.ChatComponent, [i4.RoomService], null, null)], function (_ck, _v) {\n    _ck(_v, 2, 0);\n\n    _ck(_v, 4, 0);\n  }, null);\n}\nexport function View_RoomComponent_Host_0(_l) {\n  return i0.ɵvid(0, [(_l()(), i0.ɵeld(0, 0, null, null, 1, \"room\", [], null, null, null, View_RoomComponent_0, RenderType_RoomComponent)), i0.ɵdid(1, 49152, null, 0, i8.RoomComponent, [], null, null)], null, null);\n}\nvar RoomComponentNgFactory = i0.ɵccf(\"room\", i8.RoomComponent, View_RoomComponent_Host_0, {}, {}, []);\nexport { RoomComponentNgFactory };","<div class=\"row\"> <game class=\"col-lg-5 col-sm-6 col-12\"></game> <chat class=\"col-lg-7 col-sm-6 col-12\"></chat> </div> ","import { Component, OnInit, OnDestroy } from '@angular/core';\nimport { Subject } from 'rxjs';\nimport { takeUntil } from 'rxjs/operators';\nimport { RoomService } from './room.service';\n\n\n@Component( {\n\tselector: 'navigation',\n\ttemplateUrl: './navigation.component.html',\n\tstyleUrls: [ './navigation.component.scss' ]\n} )\nexport class NavigationComponent implements OnInit, OnDestroy {\n\tpublic constructor(\n\t\tprivate readonly roomService: RoomService\n\t) {}\n\n\tpublic ngOnInit() {\n\t\tconst { destroyed, roomService } = this;\n\t\troomService.getJoinedRooms()\n\t\t.pipe( takeUntil( destroyed ) )\n\t\t.subscribe( rooms => {\n\t\t\tthis.rooms = rooms;\n\t\t} );\n\n\t\troomService.getCurrentRoom()\n\t\t.pipe( takeUntil( destroyed ) )\n\t\t.subscribe( room => {\n\t\t\tthis.currentRoom = room;\n\t\t} );\n\t}\n\n\tpublic ngOnDestroy() {\n\t\tthis.destroyed.next( true );\n\t\tthis.destroyed.complete();\n\t}\n\n\tpublic rooms = [] as Room[];\n\n\tpublic currentRoom = null as Room|null;\n\n\tpublic async setRoom( room: Room|null ) {\n\t\tconst { roomService } = this;\n\t\tawait roomService.setRoom( room );\n\t}\n\n\tpublic async leaveRoom( { roomId }: Room ) {\n\t\tconst { roomService } = this;\n\t\tawait roomService.leaveRoom( roomId );\n\t}\n\n\tprivate readonly destroyed = new Subject<true>();\n}\n","/**\n * @fileoverview This file was generated by the Angular template compiler. Do not edit.\n *\n * @suppress {suspiciousCode,uselessCode,missingProperties,missingOverride,checkTypes}\n * tslint:disable\n */\nimport * as i0 from \"./navigation.component.scss.shim.ngstyle\";\nimport * as i1 from \"@angular/core\";\nimport * as i2 from \"../../node_modules/@fortawesome/angular-fontawesome/angular-fontawesome.ngfactory\";\nimport * as i3 from \"@fortawesome/angular-fontawesome\";\nimport * as i4 from \"@angular/platform-browser\";\nimport * as i5 from \"@angular/common\";\nimport * as i6 from \"./navigation.component\";\nimport * as i7 from \"./room.service\";\nvar styles_NavigationComponent = [i0.styles];\nvar RenderType_NavigationComponent = i1.ɵcrt({\n  encapsulation: 0,\n  styles: styles_NavigationComponent,\n  data: {}\n});\nexport { RenderType_NavigationComponent };\n\nfunction View_NavigationComponent_1(_l) {\n  return i1.ɵvid(0, [(_l()(), i1.ɵeld(0, 0, null, null, 6, \"li\", [[\"class\", \"nav-item\"]], null, null, null, null, null)), (_l()(), i1.ɵeld(1, 0, null, null, 5, \"a\", [[\"class\", \"nav-link\"], [\"href\", \"javascript:\"]], [[2, \"active\", null]], [[null, \"click\"]], function (_v, en, $event) {\n    var ad = true;\n    var _co = _v.component;\n\n    if (\"click\" === en) {\n      var pd_0 = _co.setRoom(_v.context.$implicit) !== false;\n      ad = pd_0 && ad;\n    }\n\n    return ad;\n  }, null, null)), (_l()(), i1.ɵeld(2, 0, null, null, 1, \"span\", [[\"class\", \"text-truncate\"]], null, null, null, null, null)), (_l()(), i1.ɵted(3, null, [\" \", \" \"])), (_l()(), i1.ɵeld(4, 0, null, null, 2, \"button\", [[\"class\", \"close ml-2\"]], null, [[null, \"click\"]], function (_v, en, $event) {\n    var ad = true;\n    var _co = _v.component;\n\n    if (\"click\" === en) {\n      var pd_0 = _co.leaveRoom(_v.context.$implicit) !== false;\n      ad = pd_0 && ad;\n    }\n\n    return ad;\n  }, null, null)), (_l()(), i1.ɵeld(5, 0, null, null, 1, \"fa-icon\", [[\"class\", \"ng-fa-icon\"], [\"icon\", \"times\"], [\"size\", \"xs\"], [\"transform\", \"up-2\"]], [[8, \"innerHTML\", 1]], null, null, i2.View_FaIconComponent_0, i2.RenderType_FaIconComponent)), i1.ɵdid(6, 573440, null, 0, i3.FaIconComponent, [i4.DomSanitizer], {\n    iconProp: [0, \"iconProp\"],\n    size: [1, \"size\"],\n    transform: [2, \"transform\"]\n  }, null)], function (_ck, _v) {\n    var currVal_3 = \"times\";\n    var currVal_4 = \"xs\";\n    var currVal_5 = \"up-2\";\n\n    _ck(_v, 6, 0, currVal_3, currVal_4, currVal_5);\n  }, function (_ck, _v) {\n    var _co = _v.component;\n    var currVal_0 = (_co.currentRoom == null ? null : _co.currentRoom.roomId) === _v.context.$implicit.roomId;\n\n    _ck(_v, 1, 0, currVal_0);\n\n    var currVal_1 = _v.context.$implicit.name;\n\n    _ck(_v, 3, 0, currVal_1);\n\n    var currVal_2 = i1.ɵnov(_v, 6).renderedIconHTML;\n\n    _ck(_v, 5, 0, currVal_2);\n  });\n}\n\nexport function View_NavigationComponent_0(_l) {\n  return i1.ɵvid(0, [(_l()(), i1.ɵeld(0, 0, null, null, 8, \"nav\", [[\"class\", \"navbar navbar-light bg-light justify-content-start pb-0\"]], null, null, null, null, null)), (_l()(), i1.ɵeld(1, 0, null, null, 1, \"h1\", [[\"class\", \"navbar-brand py-0\"]], null, null, null, null, null)), (_l()(), i1.ɵted(-1, null, [\"r\\u00B3\"])), (_l()(), i1.ɵeld(3, 0, null, null, 5, \"ul\", [[\"class\", \"nav nav-tabs border-bottom\"]], null, null, null, null, null)), (_l()(), i1.ɵeld(4, 0, null, null, 2, \"li\", [[\"class\", \"nav-item\"]], null, null, null, null, null)), (_l()(), i1.ɵeld(5, 0, null, null, 1, \"a\", [[\"class\", \"nav-link\"], [\"href\", \"javascript:\"]], [[2, \"active\", null]], [[null, \"click\"]], function (_v, en, $event) {\n    var ad = true;\n    var _co = _v.component;\n\n    if (\"click\" === en) {\n      var pd_0 = _co.setRoom(null) !== false;\n      ad = pd_0 && ad;\n    }\n\n    return ad;\n  }, null, null)), (_l()(), i1.ɵted(-1, null, [\"Lobby\"])), (_l()(), i1.ɵand(16777216, null, null, 1, null, View_NavigationComponent_1)), i1.ɵdid(8, 802816, null, 0, i5.NgForOf, [i1.ViewContainerRef, i1.TemplateRef, i1.IterableDiffers], {\n    ngForOf: [0, \"ngForOf\"]\n  }, null)], function (_ck, _v) {\n    var _co = _v.component;\n    var currVal_1 = _co.rooms;\n\n    _ck(_v, 8, 0, currVal_1);\n  }, function (_ck, _v) {\n    var _co = _v.component;\n    var currVal_0 = !_co.currentRoom;\n\n    _ck(_v, 5, 0, currVal_0);\n  });\n}\nexport function View_NavigationComponent_Host_0(_l) {\n  return i1.ɵvid(0, [(_l()(), i1.ɵeld(0, 0, null, null, 1, \"navigation\", [], null, null, null, View_NavigationComponent_0, RenderType_NavigationComponent)), i1.ɵdid(1, 245760, null, 0, i6.NavigationComponent, [i7.RoomService], null, null)], function (_ck, _v) {\n    _ck(_v, 1, 0);\n  }, null);\n}\nvar NavigationComponentNgFactory = i1.ɵccf(\"navigation\", i6.NavigationComponent, View_NavigationComponent_Host_0, {}, {}, []);\nexport { NavigationComponentNgFactory };","/**\n * @fileoverview This file was generated by the Angular template compiler. Do not edit.\n *\n * @suppress {suspiciousCode,uselessCode,missingProperties,missingOverride,checkTypes}\n * tslint:disable\n */\nvar styles = [\"nav[_ngcontent-%COMP%] { border-bottom: 1px solid #dee2e6; }\\n\\nnav[_ngcontent-%COMP%]   .nav-tabs[_ngcontent-%COMP%] { margin-bottom: -1px; }\\n\\nnav[_ngcontent-%COMP%]   .nav-tabs[_ngcontent-%COMP%]   .nav-link[_ngcontent-%COMP%] { overflow: hidden; height: 42px; }\\n\\nnav[_ngcontent-%COMP%]   .nav-tabs[_ngcontent-%COMP%]   .nav-link[_ngcontent-%COMP%]   .text-truncate[_ngcontent-%COMP%] { display: inline-block; max-width: 160px; }\"];\nexport { styles };","<nav class=\"navbar navbar-light bg-light justify-content-start pb-0\"> <h1 class=\"navbar-brand py-0\">r³</h1> <ul class=\"nav nav-tabs border-bottom\"> <li class=\"nav-item\"> <a class=\"nav-link\" href=\"javascript:\" (click)=\"setRoom(null)\" [class.active]=\"!currentRoom\">Lobby</a> </li> <li class=\"nav-item\" *ngFor=\"let room of rooms\"> <a class=\"nav-link\" href=\"javascript:\" (click)=\"setRoom(room)\" [class.active]=\"currentRoom?.roomId===room.roomId\"> <span class=\"text-truncate\"> {{room.name}} </span> <button class=\"close ml-2\" (click)=\"leaveRoom(room)\"> <fa-icon icon=\"times\" size=\"xs\" transform=\"up-2\"></fa-icon> </button> </a> </li> </ul> </nav> ","/**\n * @fileoverview This file was generated by the Angular template compiler. Do not edit.\n *\n * @suppress {suspiciousCode,uselessCode,missingProperties,missingOverride,checkTypes}\n * tslint:disable\n */\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"./lobby.component.ngfactory\";\nimport * as i2 from \"./lobby.component\";\nimport * as i3 from \"./room.service\";\nimport * as i4 from \"./room.component.ngfactory\";\nimport * as i5 from \"./room.component\";\nimport * as i6 from \"./navigation.component.ngfactory\";\nimport * as i7 from \"./navigation.component\";\nimport * as i8 from \"@angular/common\";\nimport * as i9 from \"../../node_modules/@fortawesome/angular-fontawesome/angular-fontawesome.ngfactory\";\nimport * as i10 from \"@fortawesome/angular-fontawesome\";\nimport * as i11 from \"@angular/platform-browser\";\nimport * as i12 from \"./r3.component\";\nimport * as i13 from \"./game.service\";\nvar styles_R3Component = [];\nvar RenderType_R3Component = i0.ɵcrt({\n  encapsulation: 2,\n  styles: styles_R3Component,\n  data: {}\n});\nexport { RenderType_R3Component };\n\nfunction View_R3Component_1(_l) {\n  return i0.ɵvid(0, [(_l()(), i0.ɵeld(0, 0, null, null, 1, \"lobby\", [], null, null, null, i1.View_LobbyComponent_0, i1.RenderType_LobbyComponent)), i0.ɵdid(1, 245760, null, 0, i2.LobbyComponent, [i3.RoomService], null, null)], function (_ck, _v) {\n    _ck(_v, 1, 0);\n  }, null);\n}\n\nfunction View_R3Component_2(_l) {\n  return i0.ɵvid(0, [(_l()(), i0.ɵeld(0, 0, null, null, 1, \"room\", [], null, null, null, i4.View_RoomComponent_0, i4.RenderType_RoomComponent)), i0.ɵdid(1, 49152, null, 0, i5.RoomComponent, [], null, null)], null, null);\n}\n\nexport function View_R3Component_0(_l) {\n  return i0.ɵvid(0, [(_l()(), i0.ɵeld(0, 0, null, null, 1, \"navigation\", [], null, null, null, i6.View_NavigationComponent_0, i6.RenderType_NavigationComponent)), i0.ɵdid(1, 245760, null, 0, i7.NavigationComponent, [i3.RoomService], null, null), (_l()(), i0.ɵeld(2, 0, null, null, 4, \"div\", [[\"class\", \"container my-2\"]], null, null, null, null, null)), (_l()(), i0.ɵand(16777216, null, null, 1, null, View_R3Component_1)), i0.ɵdid(4, 16384, null, 0, i8.NgIf, [i0.ViewContainerRef, i0.TemplateRef], {\n    ngIf: [0, \"ngIf\"]\n  }, null), (_l()(), i0.ɵand(16777216, null, null, 1, null, View_R3Component_2)), i0.ɵdid(6, 16384, null, 0, i8.NgIf, [i0.ViewContainerRef, i0.TemplateRef], {\n    ngIf: [0, \"ngIf\"]\n  }, null), (_l()(), i0.ɵeld(7, 0, null, null, 7, \"footer\", [[\"class\", \"container d-flex justify-content-end fixed-bottom my-2\"]], null, null, null, null, null)), (_l()(), i0.ɵeld(8, 0, null, null, 1, \"a\", [[\"class\", \"mx-4\"], [\"href\", \"https://jovalent.com\"], [\"target\", \"_blank\"]], null, null, null, null, null)), (_l()(), i0.ɵted(-1, null, [\"Jovalent.com\"])), (_l()(), i0.ɵeld(10, 0, null, null, 4, \"a\", [[\"class\", \"ml-4\"], [\"href\", \"https://twitter.com/JovalentStudios\"], [\"target\", \"_blank\"]], null, null, null, null, null)), (_l()(), i0.ɵeld(11, 0, null, null, 2, \"fa-icon\", [[\"class\", \"ng-fa-icon\"]], [[8, \"innerHTML\", 1]], null, null, i9.View_FaIconComponent_0, i9.RenderType_FaIconComponent)), i0.ɵdid(12, 573440, null, 0, i10.FaIconComponent, [i11.DomSanitizer], {\n    iconProp: [0, \"iconProp\"]\n  }, null), i0.ɵpad(13, 2), (_l()(), i0.ɵted(-1, null, [\" @JovalentStudios \"]))], function (_ck, _v) {\n    var _co = _v.component;\n\n    _ck(_v, 1, 0);\n\n    var currVal_0 = !_co.currentRoom;\n\n    _ck(_v, 4, 0, currVal_0);\n\n    var currVal_1 = _co.currentRoom;\n\n    _ck(_v, 6, 0, currVal_1);\n\n    var currVal_3 = _ck(_v, 13, 0, \"fab\", \"twitter\");\n\n    _ck(_v, 12, 0, currVal_3);\n  }, function (_ck, _v) {\n    var currVal_2 = i0.ɵnov(_v, 12).renderedIconHTML;\n\n    _ck(_v, 11, 0, currVal_2);\n  });\n}\nexport function View_R3Component_Host_0(_l) {\n  return i0.ɵvid(0, [(_l()(), i0.ɵeld(0, 0, null, null, 1, \"r3\", [], null, null, null, View_R3Component_0, RenderType_R3Component)), i0.ɵdid(1, 4440064, null, 0, i12.R3Component, [i13.GameService, i3.RoomService], null, null)], function (_ck, _v) {\n    _ck(_v, 1, 0);\n  }, null);\n}\nvar R3ComponentNgFactory = i0.ɵccf(\"r3\", i12.R3Component, View_R3Component_Host_0, {}, {}, []);\nexport { R3ComponentNgFactory };","<navigation></navigation> <div class=\"container my-2\"> <lobby *ngIf=\"!currentRoom\"></lobby> <room *ngIf=\"currentRoom\"></room> </div> <footer class=\"container d-flex justify-content-end fixed-bottom my-2\"> <a href=\"https://jovalent.com\" target=\"_blank\" class=\"mx-4\">Jovalent.com</a> <a href=\"https://twitter.com/JovalentStudios\" target=\"_blank\" class=\"ml-4\"> <fa-icon [icon]=\"[ 'fab', 'twitter' ]\"></fa-icon> @JovalentStudios </a> </footer> ","import { Subject, Observable, SchedulerLike, fromEvent, of } from 'rxjs';\nimport { observeOn, switchMap, takeUntil } from 'rxjs/operators';\nimport { ZoneScheduler } from 'ngx-zone-scheduler';\nimport { Inject, Injectable, OnDestroy } from '@angular/core';\nimport io from 'socket.io-client';\nimport { tapLog } from 'src/operators';\n\n@Injectable()\nexport class SessionService implements OnDestroy {\n\tconstructor(\n\t\t@Inject(ZoneScheduler)\n\t\tprivate readonly scheduler: SchedulerLike\n\t) {\n\t\tconst { destroyed } = this;\n\t\tconst socket = this.socket = io.connect( '/', { transports: [ 'websocket', 'polling' ], upgrade: false } );\n\n\t\tof( 'connect' )\n\t\t.pipe(\n\t\t\tswitchMap( e => fromEvent( socket, e ) ),\n\t\t\ttakeUntil( destroyed )\n\t\t)\n\t\t.subscribe( console.log.bind( console ) );\n\n\t\tof( 'error', 'connect_error', 'reconnect_error' )\n\t\t.pipe(\n\t\t\tswitchMap( e => fromEvent( socket, e ) ),\n\t\t\ttakeUntil( destroyed )\n\t\t)\n\t\t.subscribe( console.error.bind( console ) );\n\n\t\tdestroyed.subscribe( () => { socket.close(); } );\n\t}\n\n\tpublic getEvents<T>( message: string ): Observable<T> {\n\t\tconst { socket, scheduler } = this;\n\t\treturn fromEvent<T>( socket, message )\n\t\t\t.pipe( observeOn( scheduler ) );\n\t}\n\n\tpublic emit<T>( message: string, data: Object = {} ) {\n\t\tconst { socket } = this;\n\t\treturn new Promise<T>( ( resolve, reject ) => {\n\t\t\tsocket.emit( message, data, ( error, result ) => {\n\t\t\t\tif( error ) reject( error );\n\t\t\t\telse resolve( result );\n\t\t\t} );\n\t\t} );\n\t}\n\n\tpublic ngOnDestroy() {\n\t\tthis.destroyed.next( true );\n\t\tthis.destroyed.complete();\n\t}\n\n\tprivate socket: SocketIOClient.Socket;\n\tprivate readonly destroyed = new Subject<true>();\n}\n","export class ModalModule {}","/**\n * @fileoverview This file was generated by the Angular template compiler. Do not edit.\n *\n * @suppress {suspiciousCode,uselessCode,missingProperties,missingOverride,checkTypes}\n * tslint:disable\n */\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"./app.module\";\nimport * as i2 from \"./r3.component\";\nimport * as i3 from \"../../node_modules/ngx-bootstrap/modal/modal-backdrop.component.ngfactory\";\nimport * as i4 from \"../../node_modules/ngx-bootstrap/modal/modal-container.component.ngfactory\";\nimport * as i5 from \"./r3.component.ngfactory\";\nimport * as i6 from \"@angular/common\";\nimport * as i7 from \"@angular/platform-browser\";\nimport * as i8 from \"@angular/forms\";\nimport * as i9 from \"@angular/http\";\nimport * as i10 from \"ngx-bootstrap/positioning/positioning.service\";\nimport * as i11 from \"ngx-bootstrap/component-loader/component-loader.factory\";\nimport * as i12 from \"ngx-bootstrap/modal/bs-modal.service\";\nimport * as i13 from \"ngx-zone-scheduler/dist/zone-scheduler\";\nimport * as i14 from \"./session.service\";\nimport * as i15 from \"./game.service\";\nimport * as i16 from \"./room.service\";\nimport * as i17 from \"ngx-bootstrap/modal/modal.module\";\nimport * as i18 from \"@fortawesome/angular-fontawesome\";\nimport * as i19 from \"./modal/modal.module\";\nimport * as i20 from \"ngx-auto-scroll\";\nimport * as i21 from \"ngx-zone-scheduler/dist/zone-scheduler.module\";\nvar AppModuleNgFactory = i0.ɵcmf(i1.AppModule, [i2.R3Component], function (_l) {\n  return i0.ɵmod([i0.ɵmpd(512, i0.ComponentFactoryResolver, i0.ɵCodegenComponentFactoryResolver, [[8, [i3.ModalBackdropComponentNgFactory, i4.ModalContainerComponentNgFactory, i5.R3ComponentNgFactory]], [3, i0.ComponentFactoryResolver], i0.NgModuleRef]), i0.ɵmpd(5120, i0.LOCALE_ID, i0.ɵangular_packages_core_core_l, [[3, i0.LOCALE_ID]]), i0.ɵmpd(4608, i6.NgLocalization, i6.NgLocaleLocalization, [i0.LOCALE_ID, [2, i6.ɵangular_packages_common_common_a]]), i0.ɵmpd(4608, i0.Compiler, i0.Compiler, []), i0.ɵmpd(5120, i0.APP_ID, i0.ɵangular_packages_core_core_f, []), i0.ɵmpd(5120, i0.IterableDiffers, i0.ɵangular_packages_core_core_j, []), i0.ɵmpd(5120, i0.KeyValueDiffers, i0.ɵangular_packages_core_core_k, []), i0.ɵmpd(4608, i7.DomSanitizer, i7.ɵangular_packages_platform_browser_platform_browser_e, [i6.DOCUMENT]), i0.ɵmpd(6144, i0.Sanitizer, null, [i7.DomSanitizer]), i0.ɵmpd(4608, i7.HAMMER_GESTURE_CONFIG, i7.HammerGestureConfig, []), i0.ɵmpd(5120, i7.EVENT_MANAGER_PLUGINS, function (p0_0, p0_1, p0_2, p1_0, p2_0, p2_1, p2_2) {\n    return [new i7.ɵDomEventsPlugin(p0_0, p0_1, p0_2), new i7.ɵKeyEventsPlugin(p1_0), new i7.ɵHammerGesturesPlugin(p2_0, p2_1, p2_2)];\n  }, [i6.DOCUMENT, i0.NgZone, [2, i0.PLATFORM_ID], i6.DOCUMENT, i6.DOCUMENT, i7.HAMMER_GESTURE_CONFIG, i0.ɵConsole]), i0.ɵmpd(4608, i7.EventManager, i7.EventManager, [i7.EVENT_MANAGER_PLUGINS, i0.NgZone]), i0.ɵmpd(135680, i7.ɵDomSharedStylesHost, i7.ɵDomSharedStylesHost, [i6.DOCUMENT]), i0.ɵmpd(4608, i7.ɵDomRendererFactory2, i7.ɵDomRendererFactory2, [i7.EventManager, i7.ɵDomSharedStylesHost]), i0.ɵmpd(6144, i0.RendererFactory2, null, [i7.ɵDomRendererFactory2]), i0.ɵmpd(6144, i7.ɵSharedStylesHost, null, [i7.ɵDomSharedStylesHost]), i0.ɵmpd(4608, i0.Testability, i0.Testability, [i0.NgZone]), i0.ɵmpd(4608, i7.Meta, i7.Meta, [i6.DOCUMENT]), i0.ɵmpd(4608, i7.Title, i7.Title, [i6.DOCUMENT]), i0.ɵmpd(4608, i8.ɵangular_packages_forms_forms_i, i8.ɵangular_packages_forms_forms_i, []), i0.ɵmpd(4608, i9.BrowserXhr, i9.BrowserXhr, []), i0.ɵmpd(4608, i9.ResponseOptions, i9.BaseResponseOptions, []), i0.ɵmpd(5120, i9.XSRFStrategy, i9.ɵangular_packages_http_http_a, []), i0.ɵmpd(4608, i9.XHRBackend, i9.XHRBackend, [i9.BrowserXhr, i9.ResponseOptions, i9.XSRFStrategy]), i0.ɵmpd(4608, i9.RequestOptions, i9.BaseRequestOptions, []), i0.ɵmpd(5120, i9.Http, i9.ɵangular_packages_http_http_b, [i9.XHRBackend, i9.RequestOptions]), i0.ɵmpd(4608, i10.PositioningService, i10.PositioningService, []), i0.ɵmpd(4608, i11.ComponentLoaderFactory, i11.ComponentLoaderFactory, [i0.ComponentFactoryResolver, i0.NgZone, i0.Injector, i10.PositioningService, i0.ApplicationRef]), i0.ɵmpd(4608, i12.BsModalService, i12.BsModalService, [i0.RendererFactory2, i11.ComponentLoaderFactory]), i0.ɵmpd(4608, i13.ZoneScheduler, i13.ZoneScheduler, [i0.NgZone]), i0.ɵmpd(135680, i14.SessionService, i14.SessionService, [i13.ZoneScheduler]), i0.ɵmpd(135680, i15.GameService, i15.GameService, [i13.ZoneScheduler, i14.SessionService]), i0.ɵmpd(4608, i16.RoomService, i16.RoomService, [i13.ZoneScheduler, i14.SessionService]), i0.ɵmpd(1073742336, i6.CommonModule, i6.CommonModule, []), i0.ɵmpd(1024, i0.ErrorHandler, i7.ɵangular_packages_platform_browser_platform_browser_a, []), i0.ɵmpd(1024, i0.APP_INITIALIZER, function (p0_0) {\n    return [i7.ɵangular_packages_platform_browser_platform_browser_h(p0_0)];\n  }, [[2, i0.NgProbeToken]]), i0.ɵmpd(512, i0.ApplicationInitStatus, i0.ApplicationInitStatus, [[2, i0.APP_INITIALIZER]]), i0.ɵmpd(131584, i0.ApplicationRef, i0.ApplicationRef, [i0.NgZone, i0.ɵConsole, i0.Injector, i0.ErrorHandler, i0.ComponentFactoryResolver, i0.ApplicationInitStatus]), i0.ɵmpd(1073742336, i0.ApplicationModule, i0.ApplicationModule, [i0.ApplicationRef]), i0.ɵmpd(1073742336, i7.BrowserModule, i7.BrowserModule, [[3, i7.BrowserModule]]), i0.ɵmpd(1073742336, i8.ɵangular_packages_forms_forms_bb, i8.ɵangular_packages_forms_forms_bb, []), i0.ɵmpd(1073742336, i8.FormsModule, i8.FormsModule, []), i0.ɵmpd(1073742336, i9.HttpModule, i9.HttpModule, []), i0.ɵmpd(1073742336, i17.ModalModule, i17.ModalModule, []), i0.ɵmpd(1073742336, i18.FontAwesomeModule, i18.FontAwesomeModule, []), i0.ɵmpd(1073742336, i19.ModalModule, i19.ModalModule, []), i0.ɵmpd(1073742336, i20.NgxAutoScrollModule, i20.NgxAutoScrollModule, []), i0.ɵmpd(1073742336, i21.ZoneSchedulerModule, i21.ZoneSchedulerModule, []), i0.ɵmpd(1073742336, i1.AppModule, i1.AppModule, []), i0.ɵmpd(256, i0.ɵAPP_ROOT, true, [])]);\n});\nexport { AppModuleNgFactory };","import './default.scss';\nimport './polyfills';\nimport './vendor';\n\nimport { enableProdMode } from '@angular/core';\n\nimport { platformBrowserDynamic } from '@angular/platform-browser-dynamic';\n\nimport { AppModule } from './app.module';\n\nif( location.hostname !== 'localhost' ) {\n\tenableProdMode();\n}\n\nplatformBrowserDynamic().bootstrapModule( AppModule );\n","function webpackEmptyAsyncContext(req) {\n\t// Here Promise.resolve().then() is used instead of new Promise() to prevent\n\t// uncaught exception popping up in devtools\n\treturn Promise.resolve().then(function() {\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t});\n}\nwebpackEmptyAsyncContext.keys = function() { return []; };\nwebpackEmptyAsyncContext.resolve = webpackEmptyAsyncContext;\nmodule.exports = webpackEmptyAsyncContext;\nwebpackEmptyAsyncContext.id = 98;"],"sourceRoot":""}