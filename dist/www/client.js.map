{"version":3,"sources":["webpack:///./$_lazy_route_resource lazy namespace object","webpack:///./src/client/font-awesome.ts","webpack:///./src/client/app.module.ts.pre-build-optimizer.js","webpack:///./src/client/r3.component.ts","webpack:///./src/client/modal/header.component.ts","webpack:///./src/client/modal/header.component.ngfactory.js.pre-build-optimizer.js","webpack:///./src/client/modal/header.component.scss.shim.ngstyle.js.pre-build-optimizer.js","webpack:///./src/client/modal/header.component.html","webpack:///./src/client/modal/create-room.component.ts","webpack:///./src/client/room.service.ts","webpack:///./src/client/modal/create-room.component.ngfactory.js.pre-build-optimizer.js","webpack:///./src/client/modal/create-room.component.scss.shim.ngstyle.js.pre-build-optimizer.js","webpack:///./src/client/modal/create-room.component.html","webpack:///./src/client/modal/join-room.component.ts","webpack:///./src/client/modal/join-room.component.ngfactory.js.pre-build-optimizer.js","webpack:///./src/client/modal/join-room.component.scss.shim.ngstyle.js.pre-build-optimizer.js","webpack:///./src/client/modal/join-room.component.html","webpack:///./src/client/lobby.component.ts","webpack:///./src/client/lobby.component.ngfactory.js.pre-build-optimizer.js","webpack:///./src/client/lobby.component.scss.shim.ngstyle.js.pre-build-optimizer.js","webpack:///./src/client/lobby.component.html","webpack:///./src/client/board.component.ts","webpack:///./src/client/canvas.ts.pre-build-optimizer.js","webpack:///./src/client/canvas.ts","webpack:///./src/client/board.component.ngfactory.js.pre-build-optimizer.js","webpack:///./src/client/board.component.scss.shim.ngstyle.js.pre-build-optimizer.js","webpack:///./src/client/board.component.html","webpack:///./src/grid.ts","webpack:///./src/bounds.ts.pre-build-optimizer.js","webpack:///./src/bounds.ts","webpack:///./src/square.ts.pre-build-optimizer.js","webpack:///./src/square.ts","webpack:///./src/board.ts","webpack:///./src/rule-sets.ts.pre-build-optimizer.js","webpack:///./src/rule-sets.ts","webpack:///./src/client/modal/new-game.component.ts","webpack:///./src/operators.ts.pre-build-optimizer.js","webpack:///./src/operators.ts","webpack:///./src/client/game.service.ts","webpack:///./src/client/modal/new-game.component.ngfactory.js.pre-build-optimizer.js","webpack:///./src/client/modal/new-game.component.scss.shim.ngstyle.js.pre-build-optimizer.js","webpack:///./src/client/modal/new-game.component.html","webpack:///./src/client/game.component.ts","webpack:///./src/client/game.component.ngfactory.js.pre-build-optimizer.js","webpack:///./src/client/game.component.scss.shim.ngstyle.js.pre-build-optimizer.js","webpack:///./src/client/game.component.html","webpack:///./src/client/chat.component.ts","webpack:///./src/client/chat.component.ngfactory.js.pre-build-optimizer.js","webpack:///./src/client/chat.component.scss.shim.ngstyle.js.pre-build-optimizer.js","webpack:///./src/client/chat.component.html","webpack:///./src/client/room.component.ts.pre-build-optimizer.js","webpack:///./src/client/room.component.ngfactory.js.pre-build-optimizer.js","webpack:///./src/client/room.component.html","webpack:///./src/client/navigation.component.ts","webpack:///./src/client/navigation.component.ngfactory.js.pre-build-optimizer.js","webpack:///./src/client/navigation.component.scss.shim.ngstyle.js.pre-build-optimizer.js","webpack:///./src/client/navigation.component.html","webpack:///./src/client/r3.component.ngfactory.js.pre-build-optimizer.js","webpack:///./src/client/r3.component.html","webpack:///./src/client/session.service.ts","webpack:///./src/client/modal/modal.module.ts.pre-build-optimizer.js","webpack:///./src/client/app.module.ngfactory.js.pre-build-optimizer.js","webpack:///./src/client/main.ts"],"names":["webpackEmptyAsyncContext","req","Promise","resolve","then","e","Error","code","keys","module","exports","id","index_es","add","free_brands_svg_icons_index_es","free_regular_svg_icons_index_es","free_solid_svg_icons_index_es","AppModule","r3_component_R3Component","[object Object]","gameService","roomService","this","currentRoom","destroyed","Subject","getCurrentRoom","pipe","Object","takeUntil","subscribe","room","codes","inputs","of","mergeMap","evtName","fromEvent","document","capture","filter","includes","key","activeElement","target","srcElement","body","documentElement","tagName","nodeName","disabled","readOnly","cancelBubble","returnValue","stopPropagation","preventDefault","next","complete","header_component_ModalHeaderComponent","showCloseButton","closeClick","core","styles_ModalHeaderComponent","RenderType_ModalHeaderComponent","encapsulation","styles","data","View_ModalHeaderComponent_1","_l","_v","en","$event","ad","_co","component","emit","angular_fontawesome_ngfactory","angular_fontawesome","platform_browser","iconProp","_ck","renderedIconHTML","View_ModalHeaderComponent_0","common","ngIf","ModalCreateRoomComponent","rooms","roomName","password","createRoomModal","show","hide","createRoom","room_service_RoomService","scheduler","sessionService","allMessages","ReplaySubject","allRooms","BehaviorSubject","joinedRoomIds","joinedRooms","getEvents","roomIds","combineLatest","r","roomId","getValue","j","message","observeOn","distinctUntilChanged","scan","arr","val","name","some","styles_ModalCreateRoomComponent","RenderType_ModalCreateRoomComponent","View_ModalCreateRoomComponent_0","onClick","onEsc","focus","modal_directive","component_loader_factory","onShown","onHidden","onSubmit","onReset","fesm5_forms","ngSubmit","_handleInput","value","onTouched","_compositionStart","_compositionEnd","required","p0_0","model","update","ngClassUntouched","ngClassTouched","ngClassPristine","ngClassDirty","ngClassValid","ngClassInvalid","ngClassPending","form","valid","ModalJoinRoomComponent","zone","joinRoomModal","run","joinRoom","styles_ModalJoinRoomComponent","RenderType_ModalJoinRoomComponent","View_ModalJoinRoomComponent_0","lobby_component_LobbyComponent","getRooms","getJoinedRooms","take","toPromise","setRoom","hasPassword","styles_LobbyComponent","RenderType_LobbyComponent","View_LobbyComponent_1","parent","View_LobbyComponent_3","View_LobbyComponent_2","context","$implicit","View_LobbyComponent_0","ngForOf","length","toCartesian","x","y","center","fromCartesian","drawRect","c2d","width","height","r1","r2","r3","r4","ccw","moveTo","quadraticCurveTo","lineTo","board_component_BoardComponent","dirty","lastMove","click","mousemove","canvas","canvasElementRef","nativeElement","getContext","animationFrame","render","board","lightSource","bounds","left","top","clearRect","squareGradient","createRadialGradient","Math","min","addColorStop","beginPath","closePath","save","assign","fillStyle","fill","restore","globalCompositeOperation","_ref","enabled","color","_ref$position","position","_ref$bounds","lightSourceCart","lightDirection","atan2","lightDistance","shadowCenter","cos","sin","lightCenter","PI","path","strokeStyle","stroke","clip","rect","shadowColor","shadowBlur","shadowOffsetX","shadowOffsetY","radius","isDark","radialGradient","rgb","arc","lineWidth","get","p","right","ellipse","emitter","clientX","clientY","screenPosition","canvasPosition","getBoundingClientRect","screenToCanvas","square","hitTest","boardPosition","screen","styles_BoardComponent","RenderType_BoardComponent","View_BoardComponent_0","handleEvent","touches","validate","grid","Number","isSafeInteger","boundsCheck","Grid","Map","JSON","stringify","set","Symbol","iterator","call","Bounds","bottom","n","ne","se","s","sw","w","nw","Square","empty","board_Board","squareSize","gutterSize","freeze","Array","from","map","sq","lodash","index","getData","mask","_ref2","game","gameState","reset","size","setData","setMask","pt","_objectSpread","i","arguments","source","ownKeys","getOwnPropertySymbols","concat","sym","getOwnPropertyDescriptor","enumerable","forEach","_defineProperty","obj","defineProperty","configurable","writable","directions","getAffectedSquares","direction","delta","squares","push","rule_sets_RulesStandard","ruleSet","colors","boardSize","fromGame","score1","score2","points","_game$size","point","isValid","getValidMoves","prevTurn","turn","prevIndex","t","score","gameId","gameStates","getMask","rulesStandard","ruleSets","super","ruleSetMap","new_game_component_ModalNewGameComponent","newGameModal","newGame","operators_defineProperty","tapLog","prefixes","tap","reduce","prev","operators_objectSpread","console","log","bind","game_service_GameService","allGames","games","findIndex","g","splice","shareReplay","styles_ModalNewGameComponent","RenderType_ModalNewGameComponent","View_ModalNewGameComponent_1","onChange","p1_0","View_ModalNewGameComponent_0","rules","game_component_GameComponent","getGames","slice","data_colors","displayName","style","cursor","isGameOver","makeMove","styles_GameComponent","RenderType_GameComponent","View_GameComponent_2","View_GameComponent_3","View_GameComponent_1","onMouseMove","View_GameComponent_0","chat_component_ChatComponent","messages","text","getMessages","sendMessage","styles_ChatComponent","RenderType_ChatComponent","View_ChatComponent_2","user","View_ChatComponent_1","View_ChatComponent_0","scrollHandler","ngx_auto_scroll_es5","RoomComponent","RenderType_RoomComponent","View_RoomComponent_0","zone_scheduler","navigation_component_NavigationComponent","leaveRoom","styles_NavigationComponent","RenderType_NavigationComponent","View_NavigationComponent_1","transform","View_NavigationComponent_0","RenderType_R3Component","View_R3Component_1","View_R3Component_2","View_R3Component_0","R3ComponentNgFactory","session_service_SessionService","socket","lib_default","a","connect","transports","upgrade","switchMap","error","close","reject","result","ModalModule","AppModuleNgFactory","modal_backdrop_component_ngfactory","modal_container_component_ngfactory","p0_1","p0_2","p2_0","p2_1","p2_2","http","positioning_service","bs_modal_service","modal_module","zone_scheduler_module","location","hostname","bootstrapModuleFactory"],"mappings":"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","file":"client.js","sourcesContent":["function webpackEmptyAsyncContext(req) {\n\t// Here Promise.resolve().then() is used instead of new Promise() to prevent\n\t// uncaught exception popping up in devtools\n\treturn Promise.resolve().then(function() {\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t});\n}\nwebpackEmptyAsyncContext.keys = function() { return []; };\nwebpackEmptyAsyncContext.resolve = webpackEmptyAsyncContext;\nmodule.exports = webpackEmptyAsyncContext;\nwebpackEmptyAsyncContext.id = 125;","import { library } from '@fortawesome/fontawesome-svg-core';\r\nimport { fab } from '@fortawesome/free-brands-svg-icons';\r\nimport { far } from '@fortawesome/free-regular-svg-icons';\r\nimport { fas } from '@fortawesome/free-solid-svg-icons';\r\nlibrary.add( fab, far, fas );\r\n","export class AppModule {}","import { Component, AfterViewInit, OnInit, OnDestroy } from '@angular/core';\r\nimport { Subject, fromEvent, of } from 'rxjs';\r\nimport { filter, mergeMap, takeUntil } from 'rxjs/operators';\r\nimport { RoomService } from './room.service';\r\nimport { GameService } from './game.service';\r\n\r\n@Component( {\r\n\tselector: 'r3',\r\n\ttemplateUrl: './r3.component.html'\r\n} )\r\nexport class R3Component implements AfterViewInit, OnInit, OnDestroy {\r\n\tpublic constructor(\r\n\t\t// HACK: if we don't initialize this service before joining a room, there's a race condition\r\n\t\t//       where we may not be listening in time for the first update event.\r\n\t\tprivate readonly gameService: GameService,\r\n\t\tprivate readonly roomService: RoomService\r\n\t) {}\r\n\r\n\tpublic ngOnInit() {\r\n\t\tconst { destroyed, roomService } = this;\r\n\t\troomService.getCurrentRoom()\r\n\t\t.pipe( takeUntil( destroyed ) )\r\n\t\t.subscribe( room => {\r\n\t\t\tthis.currentRoom = room;\r\n\t\t} );\r\n\t}\r\n\r\n\tpublic ngAfterViewInit() {\r\n\t\tconst { destroyed } = this,\r\n\t\t\tkeys = [ 'Backspace', ' ' ],\r\n\t\t\tcodes = [ 'Backspace', 'Space' ],\r\n\t\t\tinputs = [ 'INPUT', 'TEXTAREA', 'SELECT' ];\r\n\r\n\t\tof( 'keydown', 'keypress' )\r\n\t\t.pipe(\r\n\t\t\tmergeMap( evtName => fromEvent<KeyboardEvent>( document, evtName, { capture: false } ) ),\r\n\t\t\tfilter<KeyboardEvent>( e => keys.includes( e.key ) || codes.includes( e.code ) ),\r\n\t\t\tfilter<KeyboardEvent>( e => {\r\n\t\t\t\tconst { activeElement } = document,\r\n\t\t\t\t\ttarget = ( e.srcElement || e.target ) as HTMLInputElement|void;\r\n\t\t\t\t\treturn activeElement === document.body\r\n\t\t\t\t\t|| activeElement === document.documentElement\r\n\t\t\t\t\t|| !target\r\n\t\t\t\t\t|| !inputs.includes( target.tagName || target.nodeName )\r\n\t\t\t\t\t|| target.disabled\r\n\t\t\t\t\t|| target.readOnly;\r\n\t\t\t} ),\r\n\t\t\ttakeUntil( destroyed )\r\n\t\t).subscribe( e => {\r\n\t\t\te.cancelBubble = true;\r\n\t\t\te.returnValue = false;\r\n\t\t\te.stopPropagation();\r\n\t\t\te.preventDefault();\r\n\t\t} );\r\n\t}\r\n\r\n\tpublic ngOnDestroy() {\r\n\t\tthis.destroyed.next( true );\r\n\t\tthis.destroyed.complete();\r\n\t}\r\n\r\n\tpublic currentRoom = null as Room|null;\r\n\tprivate readonly destroyed = new Subject<true>();\r\n}\r\n","import { Component, EventEmitter, Input, Output } from '@angular/core';\r\n\r\n@Component( {\r\n\tselector: 'modal-header',\r\n\ttemplateUrl: 'header.component.html',\r\n\tstyleUrls: [ './header.component.scss' ]\r\n} )\r\nexport class ModalHeaderComponent {\r\n\t@Input()\r\n\tpublic showCloseButton = true;\r\n\r\n\t@Output() closeClick = new EventEmitter<void>();\r\n}\r\n","/**\n * @fileoverview This file was generated by the Angular template compiler. Do not edit.\n *\n * @suppress {suspiciousCode,uselessCode,missingProperties,missingOverride,checkTypes}\n * tslint:disable\n */\nimport * as i0 from \"./header.component.scss.shim.ngstyle\";\nimport * as i1 from \"@angular/core\";\nimport * as i2 from \"../../../node_modules/@fortawesome/angular-fontawesome/angular-fontawesome.ngfactory\";\nimport * as i3 from \"@fortawesome/angular-fontawesome\";\nimport * as i4 from \"@angular/platform-browser\";\nimport * as i5 from \"@angular/common\";\nimport * as i6 from \"./header.component\";\nvar styles_ModalHeaderComponent = [i0.styles];\nvar RenderType_ModalHeaderComponent = i1.ɵcrt({\n  encapsulation: 0,\n  styles: styles_ModalHeaderComponent,\n  data: {}\n});\nexport { RenderType_ModalHeaderComponent };\n\nfunction View_ModalHeaderComponent_1(_l) {\n  return i1.ɵvid(0, [(_l()(), i1.ɵeld(0, 0, null, null, 3, \"button\", [[\"aria-label\", \"Close\"], [\"class\", \"close\"], [\"type\", \"button\"]], null, [[null, \"click\"]], function (_v, en, $event) {\n    var ad = true;\n    var _co = _v.component;\n\n    if (\"click\" === en) {\n      var pd_0 = _co.closeClick.emit() !== false;\n      ad = pd_0 && ad;\n    }\n\n    return ad;\n  }, null, null)), (_l()(), i1.ɵeld(1, 0, null, null, 2, \"span\", [[\"aria-hidden\", \"true\"]], null, null, null, null, null)), (_l()(), i1.ɵeld(2, 0, null, null, 1, \"fa-icon\", [[\"class\", \"ng-fa-icon\"], [\"icon\", \"times\"]], [[8, \"innerHTML\", 1]], null, null, i2.View_FaIconComponent_0, i2.RenderType_FaIconComponent)), i1.ɵdid(3, 573440, null, 0, i3.FaIconComponent, [i4.DomSanitizer], {\n    iconProp: [0, \"iconProp\"]\n  }, null)], function (_ck, _v) {\n    var currVal_1 = \"times\";\n\n    _ck(_v, 3, 0, currVal_1);\n  }, function (_ck, _v) {\n    var currVal_0 = i1.ɵnov(_v, 3).renderedIconHTML;\n\n    _ck(_v, 2, 0, currVal_0);\n  });\n}\n\nexport function View_ModalHeaderComponent_0(_l) {\n  return i1.ɵvid(0, [(_l()(), i1.ɵeld(0, 0, null, null, 4, \"div\", [[\"class\", \"modal-header\"]], null, null, null, null, null)), (_l()(), i1.ɵeld(1, 0, null, null, 1, \"h4\", [[\"class\", \"modal-title\"]], null, null, null, null, null)), i1.ɵncd(null, 0), (_l()(), i1.ɵand(16777216, null, null, 1, null, View_ModalHeaderComponent_1)), i1.ɵdid(4, 16384, null, 0, i5.NgIf, [i1.ViewContainerRef, i1.TemplateRef], {\n    ngIf: [0, \"ngIf\"]\n  }, null)], function (_ck, _v) {\n    var _co = _v.component;\n    var currVal_0 = _co.showCloseButton;\n\n    _ck(_v, 4, 0, currVal_0);\n  }, null);\n}\nexport function View_ModalHeaderComponent_Host_0(_l) {\n  return i1.ɵvid(0, [(_l()(), i1.ɵeld(0, 0, null, null, 1, \"modal-header\", [], null, null, null, View_ModalHeaderComponent_0, RenderType_ModalHeaderComponent)), i1.ɵdid(1, 49152, null, 0, i6.ModalHeaderComponent, [], null, null)], null, null);\n}\nvar ModalHeaderComponentNgFactory = i1.ɵccf(\"modal-header\", i6.ModalHeaderComponent, View_ModalHeaderComponent_Host_0, {\n  showCloseButton: \"showCloseButton\"\n}, {\n  closeClick: \"closeClick\"\n}, [\"*\"]);\nexport { ModalHeaderComponentNgFactory };","/**\n * @fileoverview This file was generated by the Angular template compiler. Do not edit.\n *\n * @suppress {suspiciousCode,uselessCode,missingProperties,missingOverride,checkTypes}\n * tslint:disable\n */\nvar styles = [\"\"];\nexport { styles };","<div class=\"modal-header\"> <h4 class=\"modal-title\"> <ng-content></ng-content> </h4> <button type=\"button\" class=\"close\" (click)=\"closeClick.emit()\" aria-label=\"Close\" *ngIf=\"showCloseButton\"> <span aria-hidden=\"true\"> <fa-icon icon=\"times\"></fa-icon> </span> </button> </div> ","import { Component, ViewChild } from '@angular/core';\nimport { RoomService } from 'client/room.service';\nimport { ModalDirective } from 'ngx-bootstrap';\n\n@Component( {\n\tselector: 'modal-create-room',\n\ttemplateUrl: 'create-room.component.html',\n\tstyleUrls: [ './create-room.component.scss' ]\n} )\nexport class ModalCreateRoomComponent {\n\tconstructor( private readonly roomService: RoomService ) {}\n\n\t@ViewChild( 'createRoomModal' )\n\tprotected createRoomModal: ModalDirective;\n\n\tpublic show() {\n\t\tconst { createRoomModal } = this;\n\t\tcreateRoomModal.show();\n\t}\n\n\tpublic hide() {\n\t\tconst { createRoomModal } = this;\n\t\tcreateRoomModal.hide();\n\t}\n\n\tpublic rooms = [] as Room[];\n\tpublic roomName = '';\n\tpublic password = '';\n\n\tpublic async createRoom() {\n\t\tconst { roomService, roomName, password } = this;\n\t\tif( !roomName ) { return; }\n\t\tthis.hide();\n\t\tawait roomService.createRoom( roomName, password );\n\t}\n}\n","import { Observable, BehaviorSubject, ReplaySubject, SchedulerLike, combineLatest } from 'rxjs';\r\nimport { distinctUntilChanged, observeOn, scan } from 'rxjs/operators';\r\nimport { tapLog } from 'src/operators';\r\nimport { ZoneScheduler } from 'ngx-zone-scheduler';\r\nimport { Inject, Injectable } from '@angular/core';\r\nimport { SessionService } from './session.service';\r\n\r\n@Injectable()\r\nexport class RoomService {\r\n\tconstructor(\r\n\t\t@Inject(ZoneScheduler)\r\n\t\tprivate readonly scheduler: SchedulerLike,\r\n\t\t@Inject(SessionService)\r\n\t\tprivate readonly sessionService: SessionService\r\n\t) {\r\n\t\tsessionService.getEvents<Room[]>( 'rooms' )\r\n\t\t.subscribe( rooms => {\r\n\t\t\tconst { allRooms } = this;\r\n\t\t\tallRooms.next( rooms );\r\n\t\t} );\r\n\r\n\t\tsessionService.getEvents<string[]>( 'joinedRooms' )\r\n\t\t.subscribe( roomIds => {\r\n\t\t\tconst { joinedRoomIds } = this;\r\n\t\t\tjoinedRoomIds.next( roomIds );\r\n\t\t} );\r\n\r\n\t\tcombineLatest( this.joinedRoomIds, this.allRooms, ( roomIds, rooms ) => {\r\n\t\t\tconst joinedRooms = rooms.filter( r => roomIds.includes( r.roomId ) ),\r\n\t\t\t\tcurrentRoom = this.currentRoom.getValue();\r\n\t\t\tif( currentRoom ) {\r\n\t\t\t\tthis.currentRoom.next( joinedRooms.filter( j => j.roomId === currentRoom.roomId )[ 0 ] || null );\r\n\t\t\t}\r\n\t\t\treturn joinedRooms;\r\n\t\t} )\r\n\t\t.subscribe( joinedRooms => {\r\n\t\t\tthis.joinedRooms.next( joinedRooms );\r\n\t\t} );\r\n\r\n\t\tsessionService.getEvents<Message>( 'message' )\r\n\t\t.subscribe( message => {\r\n\t\t\tconst { allMessages } = this;\r\n\t\t\tallMessages.next( message );\r\n\t\t} );\r\n\t}\r\n\r\n\tpublic getRooms() {\r\n\t\tconst { allRooms, scheduler } = this;\r\n\t\treturn allRooms.pipe( observeOn( scheduler ) ) as Observable<Room[]>;\r\n\t}\r\n\r\n\tpublic async sendMessage( roomId: string, message: string ) {\r\n\t\tconst { sessionService } = this;\r\n\t\tawait sessionService.emit( 'sendMessage', { roomId, message } );\r\n\t}\r\n\r\n\tpublic getMessages() {\r\n\t\tconst { allMessages, scheduler } = this;\r\n\t\treturn allMessages\r\n\t\t.pipe(\r\n\t\t\tdistinctUntilChanged(),\r\n\t\t\tscan<Message>( ( arr, val ) => ( [ ...arr, val ] ), [] ),\r\n\t\t\tobserveOn( scheduler )\r\n\t\t);\r\n\t}\r\n\r\n\tpublic getJoinedRooms() {\r\n\t\tconst { joinedRooms, scheduler } = this;\r\n\t\treturn joinedRooms.pipe(\r\n\t\t\tdistinctUntilChanged(),\r\n\t\t\tobserveOn( scheduler )\r\n\t\t);\r\n\t}\r\n\r\n\tpublic async joinRoom( room: Room, password: string ) {\r\n\t\tconst { sessionService, currentRoom } = this,\r\n\t\t\t{ roomId } = room;\r\n\t\tawait sessionService.emit<Room>( 'joinRoom', { roomId, password } );\r\n\t\tcurrentRoom.next( room );\r\n\t}\r\n\r\n\tpublic async leaveRoom( roomId: string ) {\r\n\t\tconst { sessionService } = this;\r\n\t\tawait sessionService.emit( 'leaveRoom', { roomId } );\r\n\t}\r\n\r\n\tpublic async createRoom( name: string, password: string ) {\r\n\t\tconst { currentRoom, sessionService } = this;\r\n\t\tconst room = await sessionService.emit<Room>( 'createRoom', { name, password } );\r\n\t\tcurrentRoom.next( room );\r\n\t\treturn room;\r\n\t}\r\n\r\n\tpublic async setRoom( room: Room|void ) {\r\n\t\tconst { currentRoom } = this;\r\n\t\tif( room ) {\r\n\t\t\tconst { roomId } = room,\r\n\t\t\t\tjoinedRooms = this.joinedRooms.getValue();\r\n\t\t\tif( !joinedRooms.some( r => r.roomId === roomId ) ) {\r\n\t\t\t\tthrow new Error( 'Room is not joined.' );\r\n\t\t\t}\r\n\t\t\tcurrentRoom.next( room );\r\n\t\t} else {\r\n\t\t\tcurrentRoom.next( null );\r\n\t\t}\r\n\t}\r\n\r\n\tpublic getCurrentRoom() {\r\n\t\tconst { currentRoom, scheduler } = this;\r\n\t\treturn currentRoom.pipe(\r\n\t\t\tdistinctUntilChanged(),\r\n\t\t\tobserveOn( scheduler )\r\n\t\t);\r\n\t}\r\n\r\n\tprivate readonly allMessages = new ReplaySubject<Message>( 10 );\r\n\tprivate readonly allRooms = new BehaviorSubject<Room[]>( [] );\r\n\tprivate readonly joinedRoomIds = new BehaviorSubject<string[]>( [] );\r\n\tprivate readonly joinedRooms = new BehaviorSubject<Room[]>( [] );\r\n\tprivate readonly currentRoom = new BehaviorSubject<Room|null>( null );\r\n}\r\n","/**\n * @fileoverview This file was generated by the Angular template compiler. Do not edit.\n *\n * @suppress {suspiciousCode,uselessCode,missingProperties,missingOverride,checkTypes}\n * tslint:disable\n */\nimport * as i0 from \"./create-room.component.scss.shim.ngstyle\";\nimport * as i1 from \"@angular/core\";\nimport * as i2 from \"ngx-bootstrap/modal/modal.directive\";\nimport * as i3 from \"ngx-bootstrap/component-loader/component-loader.factory\";\nimport * as i4 from \"./header.component.ngfactory\";\nimport * as i5 from \"./header.component\";\nimport * as i6 from \"@angular/forms\";\nimport * as i7 from \"../../../node_modules/@fortawesome/angular-fontawesome/angular-fontawesome.ngfactory\";\nimport * as i8 from \"@fortawesome/angular-fontawesome\";\nimport * as i9 from \"@angular/platform-browser\";\nimport * as i10 from \"./create-room.component\";\nimport * as i11 from \"../room.service\";\nvar styles_ModalCreateRoomComponent = [i0.styles];\nvar RenderType_ModalCreateRoomComponent = i1.ɵcrt({\n  encapsulation: 0,\n  styles: styles_ModalCreateRoomComponent,\n  data: {}\n});\nexport { RenderType_ModalCreateRoomComponent };\nexport function View_ModalCreateRoomComponent_0(_l) {\n  return i1.ɵvid(0, [i1.ɵqud(402653184, 1, {\n    createRoomModal: 0\n  }), (_l()(), i1.ɵeld(1, 16777216, null, null, 40, \"div\", [[\"aria-hidden\", \"true\"], [\"bsModal\", \"\"], [\"class\", \"modal fade\"], [\"role\", \"dialog\"], [\"tabindex\", \"-1\"]], null, [[null, \"onHidden\"], [null, \"onShown\"], [null, \"click\"], [null, \"keydown.esc\"]], function (_v, en, $event) {\n    var ad = true;\n    var _co = _v.component;\n\n    if (\"click\" === en) {\n      var pd_0 = i1.ɵnov(_v, 2).onClick($event) !== false;\n      ad = pd_0 && ad;\n    }\n\n    if (\"keydown.esc\" === en) {\n      var pd_1 = i1.ɵnov(_v, 2).onEsc($event) !== false;\n      ad = pd_1 && ad;\n    }\n\n    if (\"onHidden\" === en) {\n      _co.roomName = \"\";\n      var pd_2 = (_co.password = \"\") !== false;\n      ad = pd_2 && ad;\n    }\n\n    if (\"onShown\" === en) {\n      var pd_3 = i1.ɵnov(_v, 20).focus() !== false;\n      ad = pd_3 && ad;\n    }\n\n    return ad;\n  }, null, null)), i1.ɵdid(2, 212992, [[1, 4], [\"createRoomModal\", 4]], 0, i2.ModalDirective, [i1.ElementRef, i1.ViewContainerRef, i1.Renderer2, i3.ComponentLoaderFactory], null, {\n    onShown: \"onShown\",\n    onHidden: \"onHidden\"\n  }), (_l()(), i1.ɵeld(3, 0, null, null, 38, \"div\", [[\"class\", \"modal-dialog modal-lg\"]], null, null, null, null, null)), (_l()(), i1.ɵeld(4, 0, null, null, 37, \"div\", [[\"class\", \"modal-content\"]], null, null, null, null, null)), (_l()(), i1.ɵeld(5, 0, null, null, 2, \"modal-header\", [], null, [[null, \"closeClick\"]], function (_v, en, $event) {\n    var ad = true;\n\n    if (\"closeClick\" === en) {\n      var pd_0 = i1.ɵnov(_v, 2).hide() !== false;\n      ad = pd_0 && ad;\n    }\n\n    return ad;\n  }, i4.View_ModalHeaderComponent_0, i4.RenderType_ModalHeaderComponent)), i1.ɵdid(6, 49152, null, 0, i5.ModalHeaderComponent, [], null, {\n    closeClick: \"closeClick\"\n  }), (_l()(), i1.ɵted(-1, 0, [\" Create Room \"])), (_l()(), i1.ɵeld(8, 0, null, null, 33, \"div\", [[\"class\", \"modal-body\"]], null, null, null, null, null)), (_l()(), i1.ɵeld(9, 0, null, null, 32, \"form\", [[\"autocomplete\", \"off\"], [\"class\", \"clearfix\"], [\"novalidate\", \"\"]], [[2, \"ng-untouched\", null], [2, \"ng-touched\", null], [2, \"ng-pristine\", null], [2, \"ng-dirty\", null], [2, \"ng-valid\", null], [2, \"ng-invalid\", null], [2, \"ng-pending\", null]], [[null, \"ngSubmit\"], [null, \"submit\"], [null, \"reset\"]], function (_v, en, $event) {\n    var ad = true;\n    var _co = _v.component;\n\n    if (\"submit\" === en) {\n      var pd_0 = i1.ɵnov(_v, 11).onSubmit($event) !== false;\n      ad = pd_0 && ad;\n    }\n\n    if (\"reset\" === en) {\n      var pd_1 = i1.ɵnov(_v, 11).onReset() !== false;\n      ad = pd_1 && ad;\n    }\n\n    if (\"ngSubmit\" === en) {\n      var pd_2 = _co.createRoom() !== false;\n      ad = pd_2 && ad;\n    }\n\n    return ad;\n  }, null, null)), i1.ɵdid(10, 16384, null, 0, i6.ɵangular_packages_forms_forms_bg, [], null, null), i1.ɵdid(11, 4210688, [[\"createRoomForm\", 4]], 0, i6.NgForm, [[8, null], [8, null]], null, {\n    ngSubmit: \"ngSubmit\"\n  }), i1.ɵprd(2048, null, i6.ControlContainer, null, [i6.NgForm]), i1.ɵdid(13, 16384, null, 0, i6.NgControlStatusGroup, [[4, i6.ControlContainer]], null, null), (_l()(), i1.ɵeld(14, 0, null, null, 13, \"div\", [[\"class\", \"form-group\"]], null, null, null, null, null)), (_l()(), i1.ɵeld(15, 0, null, null, 12, \"div\", [[\"class\", \"input-group mb-2\"]], null, null, null, null, null)), (_l()(), i1.ɵeld(16, 0, null, null, 3, \"div\", [[\"class\", \"input-group-prepend\"]], null, null, null, null, null)), (_l()(), i1.ɵeld(17, 0, null, null, 2, \"div\", [[\"class\", \"input-group-text\"]], null, null, null, null, null)), (_l()(), i1.ɵeld(18, 0, null, null, 1, \"fa-icon\", [[\"class\", \"ng-fa-icon\"], [\"icon\", \"door-open\"]], [[8, \"innerHTML\", 1]], null, null, i7.View_FaIconComponent_0, i7.RenderType_FaIconComponent)), i1.ɵdid(19, 573440, null, 0, i8.FaIconComponent, [i9.DomSanitizer], {\n    iconProp: [0, \"iconProp\"]\n  }, null), (_l()(), i1.ɵeld(20, 0, [[\"roomNameText\", 1]], null, 7, \"input\", [[\"autocomplete\", \"off\"], [\"class\", \"form-control\"], [\"name\", \"room-name\"], [\"placeholder\", \"Room Name\"], [\"required\", \"required\"], [\"type\", \"text\"]], [[1, \"required\", 0], [2, \"ng-untouched\", null], [2, \"ng-touched\", null], [2, \"ng-pristine\", null], [2, \"ng-dirty\", null], [2, \"ng-valid\", null], [2, \"ng-invalid\", null], [2, \"ng-pending\", null]], [[null, \"ngModelChange\"], [null, \"input\"], [null, \"blur\"], [null, \"compositionstart\"], [null, \"compositionend\"]], function (_v, en, $event) {\n    var ad = true;\n    var _co = _v.component;\n\n    if (\"input\" === en) {\n      var pd_0 = i1.ɵnov(_v, 21)._handleInput($event.target.value) !== false;\n      ad = pd_0 && ad;\n    }\n\n    if (\"blur\" === en) {\n      var pd_1 = i1.ɵnov(_v, 21).onTouched() !== false;\n      ad = pd_1 && ad;\n    }\n\n    if (\"compositionstart\" === en) {\n      var pd_2 = i1.ɵnov(_v, 21)._compositionStart() !== false;\n      ad = pd_2 && ad;\n    }\n\n    if (\"compositionend\" === en) {\n      var pd_3 = i1.ɵnov(_v, 21)._compositionEnd($event.target.value) !== false;\n      ad = pd_3 && ad;\n    }\n\n    if (\"ngModelChange\" === en) {\n      var pd_4 = (_co.roomName = $event) !== false;\n      ad = pd_4 && ad;\n    }\n\n    return ad;\n  }, null, null)), i1.ɵdid(21, 16384, null, 0, i6.DefaultValueAccessor, [i1.Renderer2, i1.ElementRef, [2, i6.COMPOSITION_BUFFER_MODE]], null, null), i1.ɵdid(22, 16384, null, 0, i6.RequiredValidator, [], {\n    required: [0, \"required\"]\n  }, null), i1.ɵprd(1024, null, i6.NG_VALIDATORS, function (p0_0) {\n    return [p0_0];\n  }, [i6.RequiredValidator]), i1.ɵprd(1024, null, i6.NG_VALUE_ACCESSOR, function (p0_0) {\n    return [p0_0];\n  }, [i6.DefaultValueAccessor]), i1.ɵdid(25, 671744, null, 0, i6.NgModel, [[2, i6.ControlContainer], [6, i6.NG_VALIDATORS], [8, null], [6, i6.NG_VALUE_ACCESSOR]], {\n    name: [0, \"name\"],\n    model: [1, \"model\"]\n  }, {\n    update: \"ngModelChange\"\n  }), i1.ɵprd(2048, null, i6.NgControl, null, [i6.NgModel]), i1.ɵdid(27, 16384, null, 0, i6.NgControlStatus, [[4, i6.NgControl]], null, null), (_l()(), i1.ɵeld(28, 0, null, null, 11, \"div\", [[\"class\", \"form-group\"]], null, null, null, null, null)), (_l()(), i1.ɵeld(29, 0, null, null, 10, \"div\", [[\"class\", \"input-group mb-2\"]], null, null, null, null, null)), (_l()(), i1.ɵeld(30, 0, null, null, 3, \"div\", [[\"class\", \"input-group-prepend\"]], null, null, null, null, null)), (_l()(), i1.ɵeld(31, 0, null, null, 2, \"div\", [[\"class\", \"input-group-text\"]], null, null, null, null, null)), (_l()(), i1.ɵeld(32, 0, null, null, 1, \"fa-icon\", [[\"class\", \"ng-fa-icon\"], [\"icon\", \"lock\"]], [[8, \"innerHTML\", 1]], null, null, i7.View_FaIconComponent_0, i7.RenderType_FaIconComponent)), i1.ɵdid(33, 573440, null, 0, i8.FaIconComponent, [i9.DomSanitizer], {\n    iconProp: [0, \"iconProp\"]\n  }, null), (_l()(), i1.ɵeld(34, 0, null, null, 5, \"input\", [[\"autocomplete\", \"off\"], [\"class\", \"form-control\"], [\"name\", \"room-password\"], [\"placeholder\", \"Password (optional)\"], [\"type\", \"password\"]], [[2, \"ng-untouched\", null], [2, \"ng-touched\", null], [2, \"ng-pristine\", null], [2, \"ng-dirty\", null], [2, \"ng-valid\", null], [2, \"ng-invalid\", null], [2, \"ng-pending\", null]], [[null, \"ngModelChange\"], [null, \"input\"], [null, \"blur\"], [null, \"compositionstart\"], [null, \"compositionend\"]], function (_v, en, $event) {\n    var ad = true;\n    var _co = _v.component;\n\n    if (\"input\" === en) {\n      var pd_0 = i1.ɵnov(_v, 35)._handleInput($event.target.value) !== false;\n      ad = pd_0 && ad;\n    }\n\n    if (\"blur\" === en) {\n      var pd_1 = i1.ɵnov(_v, 35).onTouched() !== false;\n      ad = pd_1 && ad;\n    }\n\n    if (\"compositionstart\" === en) {\n      var pd_2 = i1.ɵnov(_v, 35)._compositionStart() !== false;\n      ad = pd_2 && ad;\n    }\n\n    if (\"compositionend\" === en) {\n      var pd_3 = i1.ɵnov(_v, 35)._compositionEnd($event.target.value) !== false;\n      ad = pd_3 && ad;\n    }\n\n    if (\"ngModelChange\" === en) {\n      var pd_4 = (_co.password = $event) !== false;\n      ad = pd_4 && ad;\n    }\n\n    return ad;\n  }, null, null)), i1.ɵdid(35, 16384, null, 0, i6.DefaultValueAccessor, [i1.Renderer2, i1.ElementRef, [2, i6.COMPOSITION_BUFFER_MODE]], null, null), i1.ɵprd(1024, null, i6.NG_VALUE_ACCESSOR, function (p0_0) {\n    return [p0_0];\n  }, [i6.DefaultValueAccessor]), i1.ɵdid(37, 671744, null, 0, i6.NgModel, [[2, i6.ControlContainer], [8, null], [8, null], [6, i6.NG_VALUE_ACCESSOR]], {\n    name: [0, \"name\"],\n    model: [1, \"model\"]\n  }, {\n    update: \"ngModelChange\"\n  }), i1.ɵprd(2048, null, i6.NgControl, null, [i6.NgModel]), i1.ɵdid(39, 16384, null, 0, i6.NgControlStatus, [[4, i6.NgControl]], null, null), (_l()(), i1.ɵeld(40, 0, null, null, 1, \"button\", [[\"class\", \"btn float-right\"]], [[8, \"disabled\", 0]], null, null, null, null)), (_l()(), i1.ɵted(-1, null, [\" Create \"]))], function (_ck, _v) {\n    var _co = _v.component;\n\n    _ck(_v, 2, 0);\n\n    var currVal_8 = \"door-open\";\n\n    _ck(_v, 19, 0, currVal_8);\n\n    var currVal_17 = \"required\";\n\n    _ck(_v, 22, 0, currVal_17);\n\n    var currVal_18 = \"room-name\";\n    var currVal_19 = _co.roomName;\n\n    _ck(_v, 25, 0, currVal_18, currVal_19);\n\n    var currVal_21 = \"lock\";\n\n    _ck(_v, 33, 0, currVal_21);\n\n    var currVal_29 = \"room-password\";\n    var currVal_30 = _co.password;\n\n    _ck(_v, 37, 0, currVal_29, currVal_30);\n  }, function (_ck, _v) {\n    var currVal_0 = i1.ɵnov(_v, 13).ngClassUntouched;\n    var currVal_1 = i1.ɵnov(_v, 13).ngClassTouched;\n    var currVal_2 = i1.ɵnov(_v, 13).ngClassPristine;\n    var currVal_3 = i1.ɵnov(_v, 13).ngClassDirty;\n    var currVal_4 = i1.ɵnov(_v, 13).ngClassValid;\n    var currVal_5 = i1.ɵnov(_v, 13).ngClassInvalid;\n    var currVal_6 = i1.ɵnov(_v, 13).ngClassPending;\n\n    _ck(_v, 9, 0, currVal_0, currVal_1, currVal_2, currVal_3, currVal_4, currVal_5, currVal_6);\n\n    var currVal_7 = i1.ɵnov(_v, 19).renderedIconHTML;\n\n    _ck(_v, 18, 0, currVal_7);\n\n    var currVal_9 = i1.ɵnov(_v, 22).required ? \"\" : null;\n    var currVal_10 = i1.ɵnov(_v, 27).ngClassUntouched;\n    var currVal_11 = i1.ɵnov(_v, 27).ngClassTouched;\n    var currVal_12 = i1.ɵnov(_v, 27).ngClassPristine;\n    var currVal_13 = i1.ɵnov(_v, 27).ngClassDirty;\n    var currVal_14 = i1.ɵnov(_v, 27).ngClassValid;\n    var currVal_15 = i1.ɵnov(_v, 27).ngClassInvalid;\n    var currVal_16 = i1.ɵnov(_v, 27).ngClassPending;\n\n    _ck(_v, 20, 0, currVal_9, currVal_10, currVal_11, currVal_12, currVal_13, currVal_14, currVal_15, currVal_16);\n\n    var currVal_20 = i1.ɵnov(_v, 33).renderedIconHTML;\n\n    _ck(_v, 32, 0, currVal_20);\n\n    var currVal_22 = i1.ɵnov(_v, 39).ngClassUntouched;\n    var currVal_23 = i1.ɵnov(_v, 39).ngClassTouched;\n    var currVal_24 = i1.ɵnov(_v, 39).ngClassPristine;\n    var currVal_25 = i1.ɵnov(_v, 39).ngClassDirty;\n    var currVal_26 = i1.ɵnov(_v, 39).ngClassValid;\n    var currVal_27 = i1.ɵnov(_v, 39).ngClassInvalid;\n    var currVal_28 = i1.ɵnov(_v, 39).ngClassPending;\n\n    _ck(_v, 34, 0, currVal_22, currVal_23, currVal_24, currVal_25, currVal_26, currVal_27, currVal_28);\n\n    var currVal_31 = !i1.ɵnov(_v, 11).form.valid;\n\n    _ck(_v, 40, 0, currVal_31);\n  });\n}\nexport function View_ModalCreateRoomComponent_Host_0(_l) {\n  return i1.ɵvid(0, [(_l()(), i1.ɵeld(0, 0, null, null, 1, \"modal-create-room\", [], null, null, null, View_ModalCreateRoomComponent_0, RenderType_ModalCreateRoomComponent)), i1.ɵdid(1, 49152, null, 0, i10.ModalCreateRoomComponent, [i11.RoomService], null, null)], null, null);\n}\nvar ModalCreateRoomComponentNgFactory = i1.ɵccf(\"modal-create-room\", i10.ModalCreateRoomComponent, View_ModalCreateRoomComponent_Host_0, {}, {}, []);\nexport { ModalCreateRoomComponentNgFactory };","/**\n * @fileoverview This file was generated by the Angular template compiler. Do not edit.\n *\n * @suppress {suspiciousCode,uselessCode,missingProperties,missingOverride,checkTypes}\n * tslint:disable\n */\nvar styles = [\"\"];\nexport { styles };","<div bsModal #createRoomModal=\"bs-modal\" (onHidden)=\"roomName = ''; password = '';\" (onShown)=\"roomNameText.focus();\" class=\"modal fade\" tabindex=\"-1\" role=\"dialog\" aria-hidden=\"true\"> <div class=\"modal-dialog modal-lg\"> <div class=\"modal-content\"> <modal-header (closeClick)=\"createRoomModal.hide()\"> Create Room </modal-header> <div class=\"modal-body\"> <form (ngSubmit)=\"createRoom()\" class=\"clearfix\" #createRoomForm=\"ngForm\" autocomplete=\"off\"> <div class=\"form-group\"> <div class=\"input-group mb-2\"> <div class=\"input-group-prepend\"> <div class=\"input-group-text\"> <fa-icon icon=\"door-open\"></fa-icon> </div> </div> <input type=\"text\" class=\"form-control\" placeholder=\"Room Name\" required=\"required\" [(ngModel)]=\"roomName\" #roomNameText name=\"room-name\" autocomplete=\"off\"/> </div> </div> <div class=\"form-group\"> <div class=\"input-group mb-2\"> <div class=\"input-group-prepend\"> <div class=\"input-group-text\"> <fa-icon icon=\"lock\"></fa-icon> </div> </div> <input type=\"password\" class=\"form-control\" placeholder=\"Password (optional)\" [(ngModel)]=\"password\" name=\"room-password\" autocomplete=\"off\"/> </div> </div> <button class=\"btn float-right\" [disabled]=\"!createRoomForm.form.valid\"> Create </button> </form> </div> </div> </div> </div> ","import { Component, NgZone, ViewChild } from '@angular/core';\r\nimport { RoomService } from 'client/room.service';\r\nimport { ModalDirective } from 'ngx-bootstrap';\r\n\r\n@Component( {\r\n\tselector: 'modal-join-room',\r\n\ttemplateUrl: 'join-room.component.html',\r\n\tstyleUrls: [ './join-room.component.scss' ]\r\n} )\r\nexport class ModalJoinRoomComponent {\r\n\tconstructor(\r\n\t\tprivate readonly roomService: RoomService,\r\n\t\tprivate readonly zone: NgZone\r\n\t) {}\r\n\r\n\t@ViewChild( 'joinRoomModal' )\r\n\tprotected joinRoomModal: ModalDirective;\r\n\r\n\tpublic show( room: Room ) {\r\n\t\tconst { joinRoomModal, zone } = this;\r\n\t\tzone.run( () => {\r\n\t\t\tthis.room = room;\r\n\t\t\tjoinRoomModal.show();\r\n\t\t} );\r\n\t}\r\n\r\n\tpublic hide() {\r\n\t\tconst { joinRoomModal, zone } = this;\r\n\t\tzone.run( () => {\r\n\t\t\tthis.room = null;\r\n\t\t\tjoinRoomModal.hide();\r\n\t\t} );\r\n\t}\r\n\r\n\tpublic room: Room|null;\r\n\tpublic password = '';\r\n\r\n\tpublic async joinRoom() {\r\n\t\tconst { roomService, room, password } = this;\r\n\t\tthis.hide();\r\n\t\tawait roomService.joinRoom( room, password );\r\n\t}\r\n}\r\n","/**\n * @fileoverview This file was generated by the Angular template compiler. Do not edit.\n *\n * @suppress {suspiciousCode,uselessCode,missingProperties,missingOverride,checkTypes}\n * tslint:disable\n */\nimport * as i0 from \"./join-room.component.scss.shim.ngstyle\";\nimport * as i1 from \"@angular/core\";\nimport * as i2 from \"ngx-bootstrap/modal/modal.directive\";\nimport * as i3 from \"ngx-bootstrap/component-loader/component-loader.factory\";\nimport * as i4 from \"./header.component.ngfactory\";\nimport * as i5 from \"./header.component\";\nimport * as i6 from \"@angular/forms\";\nimport * as i7 from \"../../../node_modules/@fortawesome/angular-fontawesome/angular-fontawesome.ngfactory\";\nimport * as i8 from \"@fortawesome/angular-fontawesome\";\nimport * as i9 from \"@angular/platform-browser\";\nimport * as i10 from \"./join-room.component\";\nimport * as i11 from \"../room.service\";\nvar styles_ModalJoinRoomComponent = [i0.styles];\nvar RenderType_ModalJoinRoomComponent = i1.ɵcrt({\n  encapsulation: 0,\n  styles: styles_ModalJoinRoomComponent,\n  data: {}\n});\nexport { RenderType_ModalJoinRoomComponent };\nexport function View_ModalJoinRoomComponent_0(_l) {\n  return i1.ɵvid(0, [i1.ɵqud(402653184, 1, {\n    joinRoomModal: 0\n  }), (_l()(), i1.ɵeld(1, 16777216, null, null, 40, \"div\", [[\"aria-hidden\", \"true\"], [\"bsModal\", \"\"], [\"class\", \"modal fade\"], [\"role\", \"dialog\"], [\"tabindex\", \"-1\"]], null, [[null, \"onHidden\"], [null, \"onShown\"], [null, \"click\"], [null, \"keydown.esc\"]], function (_v, en, $event) {\n    var ad = true;\n    var _co = _v.component;\n\n    if (\"click\" === en) {\n      var pd_0 = i1.ɵnov(_v, 2).onClick($event) !== false;\n      ad = pd_0 && ad;\n    }\n\n    if (\"keydown.esc\" === en) {\n      var pd_1 = i1.ɵnov(_v, 2).onEsc($event) !== false;\n      ad = pd_1 && ad;\n    }\n\n    if (\"onHidden\" === en) {\n      var pd_2 = (_co.password = \"\") !== false;\n      ad = pd_2 && ad;\n    }\n\n    if (\"onShown\" === en) {\n      var pd_3 = i1.ɵnov(_v, 32).focus() !== false;\n      ad = pd_3 && ad;\n    }\n\n    return ad;\n  }, null, null)), i1.ɵdid(2, 212992, [[1, 4], [\"joinRoomModal\", 4]], 0, i2.ModalDirective, [i1.ElementRef, i1.ViewContainerRef, i1.Renderer2, i3.ComponentLoaderFactory], null, {\n    onShown: \"onShown\",\n    onHidden: \"onHidden\"\n  }), (_l()(), i1.ɵeld(3, 0, null, null, 38, \"div\", [[\"class\", \"modal-dialog modal-lg\"]], null, null, null, null, null)), (_l()(), i1.ɵeld(4, 0, null, null, 37, \"div\", [[\"class\", \"modal-content\"]], null, null, null, null, null)), (_l()(), i1.ɵeld(5, 0, null, null, 2, \"modal-header\", [], null, [[null, \"closeClick\"]], function (_v, en, $event) {\n    var ad = true;\n\n    if (\"closeClick\" === en) {\n      var pd_0 = i1.ɵnov(_v, 2).hide() !== false;\n      ad = pd_0 && ad;\n    }\n\n    return ad;\n  }, i4.View_ModalHeaderComponent_0, i4.RenderType_ModalHeaderComponent)), i1.ɵdid(6, 49152, null, 0, i5.ModalHeaderComponent, [], null, {\n    closeClick: \"closeClick\"\n  }), (_l()(), i1.ɵted(-1, 0, [\" Join Room \"])), (_l()(), i1.ɵeld(8, 0, null, null, 33, \"div\", [[\"class\", \"modal-body\"]], null, null, null, null, null)), (_l()(), i1.ɵeld(9, 0, null, null, 32, \"form\", [[\"autocomplete\", \"off\"], [\"class\", \"clearfix\"], [\"novalidate\", \"\"]], [[2, \"ng-untouched\", null], [2, \"ng-touched\", null], [2, \"ng-pristine\", null], [2, \"ng-dirty\", null], [2, \"ng-valid\", null], [2, \"ng-invalid\", null], [2, \"ng-pending\", null]], [[null, \"ngSubmit\"], [null, \"submit\"], [null, \"reset\"]], function (_v, en, $event) {\n    var ad = true;\n    var _co = _v.component;\n\n    if (\"submit\" === en) {\n      var pd_0 = i1.ɵnov(_v, 11).onSubmit($event) !== false;\n      ad = pd_0 && ad;\n    }\n\n    if (\"reset\" === en) {\n      var pd_1 = i1.ɵnov(_v, 11).onReset() !== false;\n      ad = pd_1 && ad;\n    }\n\n    if (\"ngSubmit\" === en) {\n      var pd_2 = _co.joinRoom() !== false;\n      ad = pd_2 && ad;\n    }\n\n    return ad;\n  }, null, null)), i1.ɵdid(10, 16384, null, 0, i6.ɵangular_packages_forms_forms_bg, [], null, null), i1.ɵdid(11, 4210688, [[\"joinRoomForm\", 4]], 0, i6.NgForm, [[8, null], [8, null]], null, {\n    ngSubmit: \"ngSubmit\"\n  }), i1.ɵprd(2048, null, i6.ControlContainer, null, [i6.NgForm]), i1.ɵdid(13, 16384, null, 0, i6.NgControlStatusGroup, [[4, i6.ControlContainer]], null, null), (_l()(), i1.ɵeld(14, 0, null, null, 11, \"div\", [[\"class\", \"form-group\"]], null, null, null, null, null)), (_l()(), i1.ɵeld(15, 0, null, null, 10, \"div\", [[\"class\", \"input-group mb-2\"]], null, null, null, null, null)), (_l()(), i1.ɵeld(16, 0, null, null, 3, \"div\", [[\"class\", \"input-group-prepend\"]], null, null, null, null, null)), (_l()(), i1.ɵeld(17, 0, null, null, 2, \"div\", [[\"class\", \"input-group-text\"]], null, null, null, null, null)), (_l()(), i1.ɵeld(18, 0, null, null, 1, \"fa-icon\", [[\"class\", \"ng-fa-icon\"], [\"icon\", \"door-closed\"]], [[8, \"innerHTML\", 1]], null, null, i7.View_FaIconComponent_0, i7.RenderType_FaIconComponent)), i1.ɵdid(19, 573440, null, 0, i8.FaIconComponent, [i9.DomSanitizer], {\n    iconProp: [0, \"iconProp\"]\n  }, null), (_l()(), i1.ɵeld(20, 0, null, null, 5, \"input\", [[\"autocomplete\", \"off\"], [\"class\", \"form-control\"], [\"name\", \"room-name\"], [\"readonly\", \"readonly\"], [\"type\", \"text\"]], [[2, \"ng-untouched\", null], [2, \"ng-touched\", null], [2, \"ng-pristine\", null], [2, \"ng-dirty\", null], [2, \"ng-valid\", null], [2, \"ng-invalid\", null], [2, \"ng-pending\", null]], [[null, \"input\"], [null, \"blur\"], [null, \"compositionstart\"], [null, \"compositionend\"]], function (_v, en, $event) {\n    var ad = true;\n\n    if (\"input\" === en) {\n      var pd_0 = i1.ɵnov(_v, 21)._handleInput($event.target.value) !== false;\n      ad = pd_0 && ad;\n    }\n\n    if (\"blur\" === en) {\n      var pd_1 = i1.ɵnov(_v, 21).onTouched() !== false;\n      ad = pd_1 && ad;\n    }\n\n    if (\"compositionstart\" === en) {\n      var pd_2 = i1.ɵnov(_v, 21)._compositionStart() !== false;\n      ad = pd_2 && ad;\n    }\n\n    if (\"compositionend\" === en) {\n      var pd_3 = i1.ɵnov(_v, 21)._compositionEnd($event.target.value) !== false;\n      ad = pd_3 && ad;\n    }\n\n    return ad;\n  }, null, null)), i1.ɵdid(21, 16384, null, 0, i6.DefaultValueAccessor, [i1.Renderer2, i1.ElementRef, [2, i6.COMPOSITION_BUFFER_MODE]], null, null), i1.ɵprd(1024, null, i6.NG_VALUE_ACCESSOR, function (p0_0) {\n    return [p0_0];\n  }, [i6.DefaultValueAccessor]), i1.ɵdid(23, 671744, null, 0, i6.NgModel, [[2, i6.ControlContainer], [8, null], [8, null], [6, i6.NG_VALUE_ACCESSOR]], {\n    name: [0, \"name\"],\n    model: [1, \"model\"]\n  }, null), i1.ɵprd(2048, null, i6.NgControl, null, [i6.NgModel]), i1.ɵdid(25, 16384, null, 0, i6.NgControlStatus, [[4, i6.NgControl]], null, null), (_l()(), i1.ɵeld(26, 0, null, null, 13, \"div\", [[\"class\", \"form-group\"]], null, null, null, null, null)), (_l()(), i1.ɵeld(27, 0, null, null, 12, \"div\", [[\"class\", \"input-group mb-2\"]], null, null, null, null, null)), (_l()(), i1.ɵeld(28, 0, null, null, 3, \"div\", [[\"class\", \"input-group-prepend\"]], null, null, null, null, null)), (_l()(), i1.ɵeld(29, 0, null, null, 2, \"div\", [[\"class\", \"input-group-text\"]], null, null, null, null, null)), (_l()(), i1.ɵeld(30, 0, null, null, 1, \"fa-icon\", [[\"class\", \"ng-fa-icon\"], [\"icon\", \"key\"]], [[8, \"innerHTML\", 1]], null, null, i7.View_FaIconComponent_0, i7.RenderType_FaIconComponent)), i1.ɵdid(31, 573440, null, 0, i8.FaIconComponent, [i9.DomSanitizer], {\n    iconProp: [0, \"iconProp\"]\n  }, null), (_l()(), i1.ɵeld(32, 0, [[\"roomPasswordText\", 1]], null, 7, \"input\", [[\"autocomplete\", \"off\"], [\"class\", \"form-control\"], [\"name\", \"room-password\"], [\"placeholder\", \"Password\"], [\"required\", \"required\"], [\"type\", \"password\"]], [[1, \"required\", 0], [2, \"ng-untouched\", null], [2, \"ng-touched\", null], [2, \"ng-pristine\", null], [2, \"ng-dirty\", null], [2, \"ng-valid\", null], [2, \"ng-invalid\", null], [2, \"ng-pending\", null]], [[null, \"ngModelChange\"], [null, \"input\"], [null, \"blur\"], [null, \"compositionstart\"], [null, \"compositionend\"]], function (_v, en, $event) {\n    var ad = true;\n    var _co = _v.component;\n\n    if (\"input\" === en) {\n      var pd_0 = i1.ɵnov(_v, 33)._handleInput($event.target.value) !== false;\n      ad = pd_0 && ad;\n    }\n\n    if (\"blur\" === en) {\n      var pd_1 = i1.ɵnov(_v, 33).onTouched() !== false;\n      ad = pd_1 && ad;\n    }\n\n    if (\"compositionstart\" === en) {\n      var pd_2 = i1.ɵnov(_v, 33)._compositionStart() !== false;\n      ad = pd_2 && ad;\n    }\n\n    if (\"compositionend\" === en) {\n      var pd_3 = i1.ɵnov(_v, 33)._compositionEnd($event.target.value) !== false;\n      ad = pd_3 && ad;\n    }\n\n    if (\"ngModelChange\" === en) {\n      var pd_4 = (_co.password = $event) !== false;\n      ad = pd_4 && ad;\n    }\n\n    return ad;\n  }, null, null)), i1.ɵdid(33, 16384, null, 0, i6.DefaultValueAccessor, [i1.Renderer2, i1.ElementRef, [2, i6.COMPOSITION_BUFFER_MODE]], null, null), i1.ɵdid(34, 16384, null, 0, i6.RequiredValidator, [], {\n    required: [0, \"required\"]\n  }, null), i1.ɵprd(1024, null, i6.NG_VALIDATORS, function (p0_0) {\n    return [p0_0];\n  }, [i6.RequiredValidator]), i1.ɵprd(1024, null, i6.NG_VALUE_ACCESSOR, function (p0_0) {\n    return [p0_0];\n  }, [i6.DefaultValueAccessor]), i1.ɵdid(37, 671744, null, 0, i6.NgModel, [[2, i6.ControlContainer], [6, i6.NG_VALIDATORS], [8, null], [6, i6.NG_VALUE_ACCESSOR]], {\n    name: [0, \"name\"],\n    model: [1, \"model\"]\n  }, {\n    update: \"ngModelChange\"\n  }), i1.ɵprd(2048, null, i6.NgControl, null, [i6.NgModel]), i1.ɵdid(39, 16384, null, 0, i6.NgControlStatus, [[4, i6.NgControl]], null, null), (_l()(), i1.ɵeld(40, 0, null, null, 1, \"button\", [[\"class\", \"btn float-right\"]], [[8, \"disabled\", 0]], null, null, null, null)), (_l()(), i1.ɵted(-1, null, [\" Join \"]))], function (_ck, _v) {\n    var _co = _v.component;\n\n    _ck(_v, 2, 0);\n\n    var currVal_8 = \"door-closed\";\n\n    _ck(_v, 19, 0, currVal_8);\n\n    var currVal_16 = \"room-name\";\n    var currVal_17 = _co.room == null ? null : _co.room.name;\n\n    _ck(_v, 23, 0, currVal_16, currVal_17);\n\n    var currVal_19 = \"key\";\n\n    _ck(_v, 31, 0, currVal_19);\n\n    var currVal_28 = \"required\";\n\n    _ck(_v, 34, 0, currVal_28);\n\n    var currVal_29 = \"room-password\";\n    var currVal_30 = _co.password;\n\n    _ck(_v, 37, 0, currVal_29, currVal_30);\n  }, function (_ck, _v) {\n    var currVal_0 = i1.ɵnov(_v, 13).ngClassUntouched;\n    var currVal_1 = i1.ɵnov(_v, 13).ngClassTouched;\n    var currVal_2 = i1.ɵnov(_v, 13).ngClassPristine;\n    var currVal_3 = i1.ɵnov(_v, 13).ngClassDirty;\n    var currVal_4 = i1.ɵnov(_v, 13).ngClassValid;\n    var currVal_5 = i1.ɵnov(_v, 13).ngClassInvalid;\n    var currVal_6 = i1.ɵnov(_v, 13).ngClassPending;\n\n    _ck(_v, 9, 0, currVal_0, currVal_1, currVal_2, currVal_3, currVal_4, currVal_5, currVal_6);\n\n    var currVal_7 = i1.ɵnov(_v, 19).renderedIconHTML;\n\n    _ck(_v, 18, 0, currVal_7);\n\n    var currVal_9 = i1.ɵnov(_v, 25).ngClassUntouched;\n    var currVal_10 = i1.ɵnov(_v, 25).ngClassTouched;\n    var currVal_11 = i1.ɵnov(_v, 25).ngClassPristine;\n    var currVal_12 = i1.ɵnov(_v, 25).ngClassDirty;\n    var currVal_13 = i1.ɵnov(_v, 25).ngClassValid;\n    var currVal_14 = i1.ɵnov(_v, 25).ngClassInvalid;\n    var currVal_15 = i1.ɵnov(_v, 25).ngClassPending;\n\n    _ck(_v, 20, 0, currVal_9, currVal_10, currVal_11, currVal_12, currVal_13, currVal_14, currVal_15);\n\n    var currVal_18 = i1.ɵnov(_v, 31).renderedIconHTML;\n\n    _ck(_v, 30, 0, currVal_18);\n\n    var currVal_20 = i1.ɵnov(_v, 34).required ? \"\" : null;\n    var currVal_21 = i1.ɵnov(_v, 39).ngClassUntouched;\n    var currVal_22 = i1.ɵnov(_v, 39).ngClassTouched;\n    var currVal_23 = i1.ɵnov(_v, 39).ngClassPristine;\n    var currVal_24 = i1.ɵnov(_v, 39).ngClassDirty;\n    var currVal_25 = i1.ɵnov(_v, 39).ngClassValid;\n    var currVal_26 = i1.ɵnov(_v, 39).ngClassInvalid;\n    var currVal_27 = i1.ɵnov(_v, 39).ngClassPending;\n\n    _ck(_v, 32, 0, currVal_20, currVal_21, currVal_22, currVal_23, currVal_24, currVal_25, currVal_26, currVal_27);\n\n    var currVal_31 = !i1.ɵnov(_v, 11).form.valid;\n\n    _ck(_v, 40, 0, currVal_31);\n  });\n}\nexport function View_ModalJoinRoomComponent_Host_0(_l) {\n  return i1.ɵvid(0, [(_l()(), i1.ɵeld(0, 0, null, null, 1, \"modal-join-room\", [], null, null, null, View_ModalJoinRoomComponent_0, RenderType_ModalJoinRoomComponent)), i1.ɵdid(1, 49152, null, 0, i10.ModalJoinRoomComponent, [i11.RoomService, i1.NgZone], null, null)], null, null);\n}\nvar ModalJoinRoomComponentNgFactory = i1.ɵccf(\"modal-join-room\", i10.ModalJoinRoomComponent, View_ModalJoinRoomComponent_Host_0, {}, {}, []);\nexport { ModalJoinRoomComponentNgFactory };","/**\n * @fileoverview This file was generated by the Angular template compiler. Do not edit.\n *\n * @suppress {suspiciousCode,uselessCode,missingProperties,missingOverride,checkTypes}\n * tslint:disable\n */\nvar styles = [\"\"];\nexport { styles };","<div bsModal #joinRoomModal=\"bs-modal\" (onHidden)=\"password = '';\" (onShown)=\"roomPasswordText.focus();\" class=\"modal fade\" tabindex=\"-1\" role=\"dialog\" aria-hidden=\"true\"> <div class=\"modal-dialog modal-lg\"> <div class=\"modal-content\"> <modal-header (closeClick)=\"joinRoomModal.hide()\"> Join Room </modal-header> <div class=\"modal-body\"> <form (ngSubmit)=\"joinRoom()\" class=\"clearfix\" #joinRoomForm=\"ngForm\" autocomplete=\"off\"> <div class=\"form-group\"> <div class=\"input-group mb-2\"> <div class=\"input-group-prepend\"> <div class=\"input-group-text\"> <fa-icon icon=\"door-closed\"></fa-icon> </div> </div> <input type=\"text\" class=\"form-control\" [ngModel]=\"room?.name\" name=\"room-name\" readonly=\"readonly\" autocomplete=\"off\"/> </div> </div> <div class=\"form-group\"> <div class=\"input-group mb-2\"> <div class=\"input-group-prepend\"> <div class=\"input-group-text\"> <fa-icon icon=\"key\"></fa-icon> </div> </div> <input type=\"password\" class=\"form-control\" placeholder=\"Password\" required=\"required\" #roomPasswordText [(ngModel)]=\"password\" name=\"room-password\" autocomplete=\"off\"/> </div> </div> <button class=\"btn float-right\" [disabled]=\"!joinRoomForm.form.valid\"> Join </button> </form> </div> </div> </div> </div> ","import { Component, ViewChild, NgZone, OnInit, OnDestroy } from '@angular/core';\r\nimport { Subject } from 'rxjs';\r\nimport { take, takeUntil } from 'rxjs/operators';\r\nimport { RoomService } from './room.service';\r\nimport { ModalCreateRoomComponent } from './modal/create-room.component';\r\nimport { ModalJoinRoomComponent } from './modal/join-room.component';\r\n\r\n@Component( {\r\n\tselector: 'lobby',\r\n\ttemplateUrl: './lobby.component.html',\r\n\tstyleUrls: [ './lobby.component.scss' ]\r\n} )\r\nexport class LobbyComponent implements OnInit, OnDestroy {\r\n\tconstructor(\r\n\t\tprivate readonly roomService: RoomService\r\n\t) {}\r\n\r\n\t@ViewChild( 'createRoomModal' )\r\n\tpublic createRoomModal: ModalCreateRoomComponent;\r\n\r\n\t@ViewChild( 'joinRoomModal' )\r\n\tpublic joinRoomModal: ModalJoinRoomComponent;\r\n\r\n\tpublic ngOnInit() {\r\n\t\tconst { destroyed, roomService } = this;\r\n\t\troomService.getRooms()\r\n\t\t.pipe( takeUntil( destroyed ) )\r\n\t\t.subscribe( rooms => {\r\n\t\t\tthis.rooms = rooms;\r\n\t\t} );\r\n\t}\r\n\r\n\tpublic ngOnDestroy() {\r\n\t\tthis.destroyed.next( true );\r\n\t\tthis.destroyed.complete();\r\n\t}\r\n\r\n\tpublic rooms = [] as Room[];\r\n\r\n\tpublic async joinRoom( room: Room ) {\r\n\t\tconst { roomService } = this;\r\n\t\tconst joinedRooms = await roomService.getJoinedRooms().pipe( take( 1 ) ).toPromise();\r\n\t\tif( joinedRooms.some( r => r.roomId === room.roomId ) ) {\r\n\t\t\tawait roomService.setRoom( room );\r\n\t\t} else if( room.hasPassword ) {\r\n\t\t\tthis.joinRoomModal.show( room );\r\n\t\t} else {\r\n\t\t\tawait roomService.joinRoom( room, '' );\r\n\t\t}\r\n\t}\r\n\r\n\tprivate readonly destroyed = new Subject<true>();\r\n}\r\n","/**\n * @fileoverview This file was generated by the Angular template compiler. Do not edit.\n *\n * @suppress {suspiciousCode,uselessCode,missingProperties,missingOverride,checkTypes}\n * tslint:disable\n */\nimport * as i0 from \"./lobby.component.scss.shim.ngstyle\";\nimport * as i1 from \"@angular/core\";\nimport * as i2 from \"../../node_modules/@fortawesome/angular-fontawesome/angular-fontawesome.ngfactory\";\nimport * as i3 from \"@fortawesome/angular-fontawesome\";\nimport * as i4 from \"@angular/platform-browser\";\nimport * as i5 from \"@angular/common\";\nimport * as i6 from \"./modal/create-room.component.ngfactory\";\nimport * as i7 from \"./modal/create-room.component\";\nimport * as i8 from \"./room.service\";\nimport * as i9 from \"./modal/join-room.component.ngfactory\";\nimport * as i10 from \"./modal/join-room.component\";\nimport * as i11 from \"./lobby.component\";\nvar styles_LobbyComponent = [i0.styles];\nvar RenderType_LobbyComponent = i1.ɵcrt({\n  encapsulation: 0,\n  styles: styles_LobbyComponent,\n  data: {}\n});\nexport { RenderType_LobbyComponent };\n\nfunction View_LobbyComponent_1(_l) {\n  return i1.ɵvid(0, [(_l()(), i1.ɵeld(0, 0, null, null, 4, \"div\", [[\"class\", \"list-group-item\"]], null, null, null, null, null)), (_l()(), i1.ɵted(-1, null, [\" There are no rooms. Would you like to \"])), (_l()(), i1.ɵeld(2, 0, null, null, 1, \"a\", [[\"href\", \"javascript:\"]], null, [[null, \"click\"]], function (_v, en, $event) {\n    var ad = true;\n\n    if (\"click\" === en) {\n      var pd_0 = i1.ɵnov(_v.parent, 13).show() !== false;\n      ad = pd_0 && ad;\n    }\n\n    return ad;\n  }, null, null)), (_l()(), i1.ɵted(-1, null, [\"create one\"])), (_l()(), i1.ɵted(-1, null, [\"? \"]))], null, null);\n}\n\nfunction View_LobbyComponent_3(_l) {\n  return i1.ɵvid(0, [(_l()(), i1.ɵeld(0, 0, null, null, 1, \"fa-icon\", [[\"class\", \"mr-2 mt-1 ng-fa-icon\"], [\"icon\", \"lock\"]], [[8, \"innerHTML\", 1]], null, null, i2.View_FaIconComponent_0, i2.RenderType_FaIconComponent)), i1.ɵdid(1, 573440, null, 0, i3.FaIconComponent, [i4.DomSanitizer], {\n    iconProp: [0, \"iconProp\"]\n  }, null)], function (_ck, _v) {\n    var currVal_1 = \"lock\";\n\n    _ck(_v, 1, 0, currVal_1);\n  }, function (_ck, _v) {\n    var currVal_0 = i1.ɵnov(_v, 1).renderedIconHTML;\n\n    _ck(_v, 0, 0, currVal_0);\n  });\n}\n\nfunction View_LobbyComponent_2(_l) {\n  return i1.ɵvid(0, [(_l()(), i1.ɵeld(0, 0, null, null, 6, \"div\", [[\"class\", \"list-group-item d-flex\"]], null, null, null, null, null)), (_l()(), i1.ɵand(16777216, null, null, 1, null, View_LobbyComponent_3)), i1.ɵdid(2, 16384, null, 0, i5.NgIf, [i1.ViewContainerRef, i1.TemplateRef], {\n    ngIf: [0, \"ngIf\"]\n  }, null), (_l()(), i1.ɵeld(3, 0, null, null, 1, \"h4\", [], null, null, null, null, null)), (_l()(), i1.ɵted(4, null, [\"\", \"\"])), (_l()(), i1.ɵeld(5, 0, null, null, 1, \"button\", [[\"class\", \"btn ml-auto\"]], null, [[null, \"click\"]], function (_v, en, $event) {\n    var ad = true;\n    var _co = _v.component;\n\n    if (\"click\" === en) {\n      var pd_0 = _co.joinRoom(_v.context.$implicit) !== false;\n      ad = pd_0 && ad;\n    }\n\n    return ad;\n  }, null, null)), (_l()(), i1.ɵted(-1, null, [\" Join \"]))], function (_ck, _v) {\n    var currVal_0 = _v.context.$implicit.hasPassword;\n\n    _ck(_v, 2, 0, currVal_0);\n  }, function (_ck, _v) {\n    var currVal_1 = _v.context.$implicit.name;\n\n    _ck(_v, 4, 0, currVal_1);\n  });\n}\n\nexport function View_LobbyComponent_0(_l) {\n  return i1.ɵvid(0, [i1.ɵqud(402653184, 1, {\n    createRoomModal: 0\n  }), i1.ɵqud(402653184, 2, {\n    joinRoomModal: 0\n  }), (_l()(), i1.ɵeld(2, 0, null, null, 9, \"div\", [[\"class\", \"row\"]], null, null, null, null, null)), (_l()(), i1.ɵeld(3, 0, null, null, 5, \"div\", [[\"class\", \"col-12 mb-1\"]], null, null, null, null, null)), (_l()(), i1.ɵeld(4, 0, null, null, 4, \"div\", [[\"class\", \"list-group\"]], null, null, null, null, null)), (_l()(), i1.ɵand(16777216, null, null, 1, null, View_LobbyComponent_1)), i1.ɵdid(6, 16384, null, 0, i5.NgIf, [i1.ViewContainerRef, i1.TemplateRef], {\n    ngIf: [0, \"ngIf\"]\n  }, null), (_l()(), i1.ɵand(16777216, null, null, 1, null, View_LobbyComponent_2)), i1.ɵdid(8, 802816, null, 0, i5.NgForOf, [i1.ViewContainerRef, i1.TemplateRef, i1.IterableDiffers], {\n    ngForOf: [0, \"ngForOf\"]\n  }, null), (_l()(), i1.ɵeld(9, 0, null, null, 2, \"div\", [[\"class\", \"col-12 clearfix mt-1\"]], null, null, null, null, null)), (_l()(), i1.ɵeld(10, 0, null, null, 1, \"button\", [[\"class\", \"btn float-right mr-2\"]], null, [[null, \"click\"]], function (_v, en, $event) {\n    var ad = true;\n\n    if (\"click\" === en) {\n      var pd_0 = i1.ɵnov(_v, 13).show() !== false;\n      ad = pd_0 && ad;\n    }\n\n    return ad;\n  }, null, null)), (_l()(), i1.ɵted(-1, null, [\" Create Room \"])), (_l()(), i1.ɵeld(12, 0, null, null, 1, \"modal-create-room\", [], null, null, null, i6.View_ModalCreateRoomComponent_0, i6.RenderType_ModalCreateRoomComponent)), i1.ɵdid(13, 49152, [[1, 4], [\"createRoomModal\", 4]], 0, i7.ModalCreateRoomComponent, [i8.RoomService], null, null), (_l()(), i1.ɵeld(14, 0, null, null, 1, \"modal-join-room\", [], null, null, null, i9.View_ModalJoinRoomComponent_0, i9.RenderType_ModalJoinRoomComponent)), i1.ɵdid(15, 49152, [[2, 4], [\"joinRoomModal\", 4]], 0, i10.ModalJoinRoomComponent, [i8.RoomService, i1.NgZone], null, null)], function (_ck, _v) {\n    var _co = _v.component;\n    var currVal_0 = _co.rooms.length === 0;\n\n    _ck(_v, 6, 0, currVal_0);\n\n    var currVal_1 = _co.rooms;\n\n    _ck(_v, 8, 0, currVal_1);\n  }, null);\n}\nexport function View_LobbyComponent_Host_0(_l) {\n  return i1.ɵvid(0, [(_l()(), i1.ɵeld(0, 0, null, null, 1, \"lobby\", [], null, null, null, View_LobbyComponent_0, RenderType_LobbyComponent)), i1.ɵdid(1, 245760, null, 0, i11.LobbyComponent, [i8.RoomService], null, null)], function (_ck, _v) {\n    _ck(_v, 1, 0);\n  }, null);\n}\nvar LobbyComponentNgFactory = i1.ɵccf(\"lobby\", i11.LobbyComponent, View_LobbyComponent_Host_0, {}, {}, []);\nexport { LobbyComponentNgFactory };","/**\n * @fileoverview This file was generated by the Angular template compiler. Do not edit.\n *\n * @suppress {suspiciousCode,uselessCode,missingProperties,missingOverride,checkTypes}\n * tslint:disable\n */\nvar styles = [\"\"];\nexport { styles };","<div class=\"row\"> <div class=\"col-12 mb-1\"> <div class=\"list-group\"> <div class=\"list-group-item\" *ngIf=\"rooms.length === 0\"> There are no rooms. Would you like to <a href=\"javascript:\" (click)=\"createRoomModal.show()\">create one</a>? </div> <div class=\"list-group-item d-flex\" *ngFor=\"let room of rooms\"> <fa-icon class=\"mr-2 mt-1\" icon=\"lock\" *ngIf=\"room.hasPassword\"></fa-icon> <h4>{{room.name}}</h4> <button class=\"btn ml-auto\" (click)=\"joinRoom(room)\"> Join </button> </div> </div> </div> <div class=\"col-12 clearfix mt-1\"> <button class=\"btn float-right mr-2\" (click)=\"createRoomModal.show()\"> Create Room </button> </div> </div> <modal-create-room #createRoomModal></modal-create-room> <modal-join-room #joinRoomModal></modal-join-room> ","import { Board } from 'src/board';\r\nimport { AfterViewInit, Component, ViewChild, ElementRef, Input, Output, OnChanges, EventEmitter, OnDestroy, OnInit } from '@angular/core';\r\nimport { screenToCanvas } from './canvas';\r\nimport { Subject, animationFrameScheduler, range } from 'rxjs';\r\nimport { take, observeOn } from 'rxjs/operators';\r\n\r\nfunction toCartesian( { x, y }: Point, center: Point ) {\r\n\treturn { x: x - center.x, y: center.y - y };\r\n}\r\n\r\nfunction fromCartesian( { x, y }: Point, center: Point ) {\r\n\treturn { x: x + center.x, y: center.y - y };\r\n}\r\n\r\nfunction drawRect(\r\n\tc2d: CanvasRenderingContext2D,\r\n\tx: number,\r\n\ty: number,\r\n\twidth: number,\r\n\theight: number,\r\n\tr1: number,\r\n\tr2: number,\r\n\tr3: number,\r\n\tr4: number,\r\n\tccw = false\r\n) {\r\n\tif( ccw ) {\r\n\t\tc2d.moveTo( x + r4, y );\r\n\t\tc2d.quadraticCurveTo( x, y, x, y + r4 );\r\n\t\tc2d.lineTo( x, y + height - r3 );\r\n\t\tc2d.quadraticCurveTo( x, y + height, x + r3, y + height );\r\n\t\tc2d.lineTo( x + width - r2, y + height );\r\n\t\tc2d.quadraticCurveTo( x + width, y + height, x + width, y + height - r2 );\r\n\t\tc2d.lineTo( x + width, y + r1 );\r\n\t\tc2d.quadraticCurveTo( x + width, y, x + width - r1, y );\r\n\t\tc2d.lineTo( x + r4, y );\r\n\t} else {\r\n\t\tc2d.moveTo( x + r4, y );\r\n\t\tc2d.lineTo( x + width - r1, y );\r\n\t\tc2d.quadraticCurveTo( x + width, y, x + width, y + r1 );\r\n\t\tc2d.lineTo( x + width, y + height - r2 );\r\n\t\tc2d.quadraticCurveTo( x + width, y + height, x + width - r2, y + height );\r\n\t\tc2d.lineTo( x + r3, y + height );\r\n\t\tc2d.quadraticCurveTo( x, y + height, x, y + height - r3 );\r\n\t\tc2d.lineTo( x, y + r4 );\r\n\t\tc2d.quadraticCurveTo( x, y, x + r4, y );\r\n\t}\r\n}\r\n\r\n@Component( {\r\n\tselector: 'board',\r\n\ttemplateUrl: './board.component.html',\r\n\tstyleUrls: [ './board.component.scss' ]\r\n} )\r\nexport class BoardComponent implements AfterViewInit, OnChanges, OnDestroy, OnInit {\r\n\tpublic ngAfterViewInit() {\r\n\t\tconst canvas = this.canvas = this.canvasElementRef.nativeElement;\r\n\t\tthis.c2d = canvas.getContext( '2d' );\r\n\t\tthis.dirty.next( true );\r\n\t}\r\n\r\n\tpublic ngOnChanges() {\r\n\t\tthis.dirty.next( true );\r\n\t}\r\n\r\n\tpublic ngOnDestroy() {\r\n\t\tconst { dirty } = this;\r\n\t\tdirty.complete();\r\n\t}\r\n\r\n\tpublic ngOnInit() {\r\n\t\tthis.dirty\r\n\t\t.pipe( observeOn( animationFrameScheduler ) )\r\n\t\t.subscribe( () => { this.render(); } );\r\n\t}\r\n\r\n\t@ViewChild( 'canvasElement' )\r\n\tprivate canvasElementRef: ElementRef;\r\n\tprivate canvas: HTMLCanvasElement;\r\n\tprivate c2d: CanvasRenderingContext2D;\r\n\tprivate readonly dirty = new Subject<true>();\r\n\r\n\t@Input()\r\n\tpublic board: Board;\r\n\r\n\t@Input()\r\n\tpublic lastMove: null|Point = null;\r\n\r\n\t@Output()\r\n\tpublic click = new EventEmitter<BoardMouseEvent>();\r\n\r\n\t@Output()\r\n\tpublic mousemove = new EventEmitter<BoardMouseEvent>();\r\n\r\n\tprivate render() {\r\n\t\tconst { board } = this;\r\n\t\tif( !board ) return;\r\n\t\tconst { canvas, c2d } = this,\r\n\t\t\t{ width, height } = canvas,\r\n\t\t\tlightSource: Point = {\r\n\t\t\t\tx: board.bounds.left + board.bounds.width * .25,\r\n\t\t\t\ty: board.bounds.top + board.bounds.height * .25\r\n\t\t\t};\r\n\t\tc2d.clearRect( 0, 0, width, height );\r\n\r\n\t\tconst squareGradient = c2d.createRadialGradient(\r\n\t\t\tlightSource.x,\r\n\t\t\tlightSource.y,\r\n\t\t\t0,\r\n\t\t\tboard.bounds.center.x,\r\n\t\t\tboard.bounds.center.y,\r\n\t\t\tMath.min( board.bounds.width, board.bounds.height ) * .7\r\n\t\t);\r\n\t\tsquareGradient.addColorStop(  0, 'rgba(255,255,255,.2)' );\r\n\t\tsquareGradient.addColorStop( .4, 'rgba(255,255,255,0)' );\r\n\r\n\t\tc2d.beginPath();\r\n\t\tdrawRect( c2d, board.bounds.left, board.bounds.top, board.bounds.width, board.bounds.height, 20, 20, 20, 20 );\r\n\t\tc2d.closePath();\r\n\r\n\t\tc2d.save();\r\n\t\tObject.assign( c2d, {\r\n\t\t\tfillStyle: '#3a3'\r\n\t\t} );\r\n\t\tc2d.fill();\r\n\t\tc2d.restore();\r\n\r\n\t\tc2d.save();\r\n\t\tObject.assign( c2d, {\r\n\t\t\tglobalCompositeOperation: 'screen',\r\n\t\t\tfillStyle: squareGradient\r\n\t\t} );\r\n\t\tc2d.fill();\r\n\t\tc2d.restore();\r\n\t\tfor( const { enabled, color, position: { x, y }, bounds: { left, top, width, height, center } } of board ) {\r\n\t\t\tif( !enabled ) { continue; }\r\n\t\t\tconst lightSourceCart = toCartesian( lightSource, center ),\r\n\t\t\t\t\tlightDirection = Math.atan2( lightSourceCart.y, lightSourceCart.x ),\r\n\t\t\t\t\tlightDistance = 4,\r\n\t\t\t\t\tshadowCenter = fromCartesian( {\r\n\t\t\t\t\t\tx: Math.cos( lightDirection ) * lightDistance,\r\n\t\t\t\t\t\ty: Math.sin( lightDirection ) * lightDistance\r\n\t\t\t\t\t}, center ),\r\n\t\t\t\t\tlightCenter = fromCartesian( {\r\n\t\t\t\t\t\tx: Math.cos( lightDirection + Math.PI ) * lightDistance,\r\n\t\t\t\t\t\ty: Math.sin( lightDirection + Math.PI ) * lightDistance\r\n\t\t\t\t\t}, center ),\r\n\t\t\t\tpath = ccw => {\r\n\t\t\t\t\tdrawRect( c2d, left, top, width, height,\r\n\t\t\t\t\t\tx === board.width - 1 && y === 0                ? 16 : 4,\r\n\t\t\t\t\t\tx === board.width - 1 && y === board.height - 1 ? 16 : 4,\r\n\t\t\t\t\t\tx === 0               && y === board.height - 1 ? 16 : 4,\r\n\t\t\t\t\t\tx === 0               && y === 0                ? 16 : 4,\r\n\t\t\t\t\t\tccw\r\n\t\t\t\t\t);\r\n\t\t\t\t};\r\n\r\n\t\t\tc2d.beginPath();\r\n\t\t\tpath( false );\r\n\t\t\tc2d.closePath();\r\n\r\n\t\t\tc2d.save();\r\n\t\t\tObject.assign( c2d, {\r\n\t\t\t\tfillStyle: '#6c6',\r\n\t\t\t\tstrokeStyle: '#363'\r\n\t\t\t} );\r\n\t\t\tc2d.fill();\r\n\t\t\tc2d.stroke();\r\n\t\t\tc2d.restore();\r\n\r\n\t\t\tc2d.save();\r\n\t\t\tc2d.clip();\r\n\r\n\t\t\tc2d.save();\r\n\t\t\tObject.assign( c2d, {\r\n\t\t\t\tglobalCompositeOperation: 'screen',\r\n\t\t\t\tfillStyle: squareGradient\r\n\t\t\t} );\r\n\t\t\tc2d.fill();\r\n\t\t\tc2d.restore();\r\n\r\n\t\t\tc2d.save();\r\n\t\t\tc2d.beginPath();\r\n\t\t\tc2d.rect( board.bounds.left, board.bounds.top, board.bounds.width, board.bounds.height );\r\n\t\t\tpath( true );\r\n\t\t\tc2d.closePath();\r\n\t\t\tObject.assign( c2d, {\r\n\t\t\t\tfillStyle: '#000',\r\n\t\t\t\tshadowColor: 'rgba(0,0,0,.4)',\r\n\t\t\t\tshadowBlur: lightDistance,\r\n\t\t\t\tshadowOffsetX: center.x - shadowCenter.x,\r\n\t\t\t\tshadowOffsetY: center.y - shadowCenter.y\r\n\t\t\t} );\r\n\t\t\tc2d.fill();\r\n\t\t\tc2d.restore();\r\n\r\n\t\t\tconst radius = Math.min( width, height ) * .5;\r\n\t\t\tif( color !== null ) {\r\n\t\t\t\t// dark stones have highlights, light stones have shadows\r\n\t\t\t\tconst isDark = color === 0,\r\n\t\t\t\t\t// shadows are reversed from light (+pi radians)\r\n\t\t\t\t\tradialGradient = c2d.createRadialGradient(\r\n\t\t\t\t\t\tcenter.x, center.y, 0,\r\n\t\t\t\t\t\tisDark ? lightCenter.x : shadowCenter.x,\r\n\t\t\t\t\t\tisDark ? lightCenter.y : shadowCenter.y,\r\n\t\t\t\t\t\tradius\r\n\t\t\t\t\t),\r\n\t\t\t\t\trgb = isDark ? '255,255,255' : '0,0,0';\r\n\t\t\t\tradialGradient.addColorStop( 0,   `rgba(${rgb},0)` );\r\n\t\t\t\tradialGradient.addColorStop( .5,  `rgba(${rgb},.1)` );\r\n\t\t\t\tradialGradient.addColorStop( .75, `rgba(${rgb},0)` );\r\n\t\t\t\tradialGradient.addColorStop( 1,   `rgba(${rgb},.75)` );\r\n\r\n\t\t\t\tc2d.beginPath();\r\n\t\t\t\tc2d.arc( center.x, center.y, radius * .8, 0, Math.PI * 2 );\r\n\r\n\t\t\t\tc2d.save();\r\n\t\t\t\tObject.assign( c2d, {\r\n\t\t\t\t\tfillStyle: isDark ? '#111' : '#fff',\r\n\t\t\t\t\t// shadowColor: 'rgba(0,0,0,.4)',\r\n\t\t\t\t\t// shadowBlur: lightDistance,\r\n\t\t\t\t\t// shadowOffsetX: center.x - shadowCenter.x,\r\n\t\t\t\t\t// shadowOffsetY: center.y - shadowCenter.y\r\n\t\t\t\t} );\r\n\t\t\t\tc2d.fill();\r\n\t\t\t\tc2d.restore();\r\n\r\n\t\t\t\tc2d.save();\r\n\t\t\t\tObject.assign( c2d, {\r\n\t\t\t\t\tlineWidth: 1,\r\n\t\t\t\t\tstrokeStyle: 'rgba(0,0,0,.5)'\r\n\t\t\t\t} );\r\n\t\t\t\tc2d.stroke();\r\n\t\t\t\tc2d.restore();\r\n\r\n\t\t\t\tc2d.save();\r\n\t\t\t\tObject.assign( c2d, {\r\n\t\t\t\t\tglobalCompositeOperation: isDark ? 'screen' : 'multiply',\r\n\t\t\t\t\tfillStyle: radialGradient\r\n\t\t\t\t} );\r\n\t\t\t\tc2d.fill();\r\n\t\t\t\tc2d.restore();\r\n\t\t\t}\r\n\t\t\tc2d.restore();\r\n\t\t}\r\n\t\tconst { lastMove } = this;\r\n\t\tif( lastMove ) {\r\n\t\t\tconst { bounds } = board.get( lastMove );\r\n\t\t\tc2d.save();\r\n\t\t\tconst r = 5;\r\n\t\t\tconst p = 7;\r\n\t\t\tconst center = { x: bounds.right - r - p, y: bounds.top + r + p };\r\n\r\n\t\t\tconst radialGradient = c2d.createRadialGradient(\r\n\t\t\t\tcenter.x, center.y, 0,\r\n\t\t\t\tcenter.x, center.y, r\r\n\t\t\t);\r\n\t\t\tradialGradient.addColorStop( 0,   `hsl(180,0%,50%)` );\r\n\t\t\tradialGradient.addColorStop( .5,  `hsl(180,100%,50%)` );\r\n\t\t\tradialGradient.addColorStop( 1,   `hsl(180,0%,50%)` );\r\n\r\n\t\t\tc2d.fillStyle = radialGradient;\r\n\t\t\tc2d.beginPath();\r\n\t\t\tc2d.ellipse( bounds.right - r - p, bounds.top + r + p, r, r, 0, 0, Math.PI * 2 );\r\n\t\t\tc2d.fill();\r\n\t\t\tc2d.closePath();\r\n\t\t\tc2d.restore();\r\n\t\t}\r\n\t}\r\n\r\n\tpublic handleEvent( emitter: EventEmitter<BoardMouseEvent>, { clientX, clientY }: MouseEvent ) {\r\n\t\tconst { board, canvas } = this,\r\n\t\t\tscreenPosition = { x: clientX, y: clientY },\r\n\t\t\tcanvasPosition = screenToCanvas( canvas, { x: clientX, y: clientY } ),\r\n\t\t\tsquare = board.hitTest( canvasPosition ),\r\n\t\t\tboardPosition = square && square.position || null;\r\n\t\temitter.emit( {\r\n\t\t\tsquare,\r\n\t\t\tposition: {\r\n\t\t\t\tscreen: screenPosition,\r\n\t\t\t\tcanvas: canvasPosition,\r\n\t\t\t\tboard: boardPosition\r\n\t\t\t}\r\n\t\t} );\r\n\t}\r\n}\r\n","export function screenToCanvas(canvas, {\n  x,\n  y\n}) {\n  const width = canvas.width,\n        height = canvas.height,\n        rect = canvas.getBoundingClientRect();\n  return {\n    x: (x - rect.left) * (width / rect.width),\n    y: (y - rect.top) * (height / rect.height)\n  };\n}\nexport function canvasToScreen(canvas, {\n  x,\n  y\n}) {\n  const width = canvas.width,\n        height = canvas.height,\n        rect = canvas.getBoundingClientRect();\n  return {\n    x: x * (rect.width / width) + rect.left,\n    y: y * (rect.height / height) + rect.top\n  };\n}","export function screenToCanvas( canvas: HTMLCanvasElement, { x, y }: Point ): Point {\n\tconst { width, height } = canvas,\n\t\trect = canvas.getBoundingClientRect();\n\treturn { x: ( x - rect.left ) * ( width / rect.width ), y: ( y - rect.top ) * ( height / rect.height ) };\n}\n\nexport function canvasToScreen( canvas: HTMLCanvasElement, { x, y }: Point ): Point {\n\tconst { width, height } = canvas,\n\t\trect = canvas.getBoundingClientRect();\n\treturn { x: ( x * ( rect.width / width ) ) + rect.left, y: ( y * ( rect.height / height ) ) + rect.top };\n}\n","/**\n * @fileoverview This file was generated by the Angular template compiler. Do not edit.\n *\n * @suppress {suspiciousCode,uselessCode,missingProperties,missingOverride,checkTypes}\n * tslint:disable\n */\nimport * as i0 from \"./board.component.scss.shim.ngstyle\";\nimport * as i1 from \"@angular/core\";\nimport * as i2 from \"./board.component\";\nvar styles_BoardComponent = [i0.styles];\nvar RenderType_BoardComponent = i1.ɵcrt({\n  encapsulation: 0,\n  styles: styles_BoardComponent,\n  data: {}\n});\nexport { RenderType_BoardComponent };\nexport function View_BoardComponent_0(_l) {\n  return i1.ɵvid(0, [i1.ɵqud(402653184, 1, {\n    canvasElementRef: 0\n  }), (_l()(), i1.ɵeld(1, 0, null, null, 2, \"div\", [[\"class\", \"row\"]], null, null, null, null, null)), (_l()(), i1.ɵeld(2, 0, null, null, 1, \"div\", [[\"class\", \"col-12\"]], null, null, null, null, null)), (_l()(), i1.ɵeld(3, 0, [[1, 0], [\"canvasElement\", 1]], null, 0, \"canvas\", [], [[8, \"width\", 0], [8, \"height\", 0]], [[null, \"mousemove\"], [null, \"click\"], [null, \"touch\"]], function (_v, en, $event) {\n    var ad = true;\n    var _co = _v.component;\n\n    if (\"mousemove\" === en) {\n      var pd_0 = _co.handleEvent(_co.mousemove, $event) !== false;\n      ad = pd_0 && ad;\n    }\n\n    if (\"click\" === en) {\n      var pd_1 = _co.handleEvent(_co.click, $event) !== false;\n      ad = pd_1 && ad;\n    }\n\n    if (\"touch\" === en) {\n      var pd_2 = _co.handleEvent(_co.click, $event.touches[0]) !== false;\n      ad = pd_2 && ad;\n    }\n\n    return ad;\n  }, null, null))], null, function (_ck, _v) {\n    var _co = _v.component;\n    var currVal_0 = _co.board == null ? null : _co.board.bounds.width;\n    var currVal_1 = _co.board == null ? null : _co.board.bounds.height;\n\n    _ck(_v, 3, 0, currVal_0, currVal_1);\n  });\n}\nexport function View_BoardComponent_Host_0(_l) {\n  return i1.ɵvid(0, [(_l()(), i1.ɵeld(0, 0, null, null, 1, \"board\", [], null, null, null, View_BoardComponent_0, RenderType_BoardComponent)), i1.ɵdid(1, 4964352, null, 0, i2.BoardComponent, [], null, null)], function (_ck, _v) {\n    _ck(_v, 1, 0);\n  }, null);\n}\nvar BoardComponentNgFactory = i1.ɵccf(\"board\", i2.BoardComponent, View_BoardComponent_Host_0, {\n  board: \"board\",\n  lastMove: \"lastMove\"\n}, {\n  click: \"click\",\n  mousemove: \"mousemove\"\n}, []);\nexport { BoardComponentNgFactory };","/**\n * @fileoverview This file was generated by the Angular template compiler. Do not edit.\n *\n * @suppress {suspiciousCode,uselessCode,missingProperties,missingOverride,checkTypes}\n * tslint:disable\n */\nvar styles = [\"canvas[_ngcontent-%COMP%] { object-fit: contain; width: 100%; height: 100%; }\"];\nexport { styles };","<div class=\"row\"> <div class=\"col-12\"> <canvas [width]=\"board?.bounds.width\" [height]=\"board?.bounds.height\" (mousemove)=\"handleEvent(mousemove,$event)\" (click)=\"handleEvent(click,$event)\" (touch)=\"handleEvent(click,$event.touches[0])\" #canvasElement> </canvas> </div> </div> ","function validate<T>( grid: Grid<T>, { x, y }: Point ) {\n\tif( !Number.isSafeInteger( x ) || !Number.isSafeInteger( y ) ) {\n\t\tthrow new Error( `(${x}, ${y}) is not valid` );\n\t}\n\tif( !grid.boundsCheck( { x, y } ) ) {\n\t\tthrow new Error( `(${x}, ${y}) is out of bounds` );\n\t}\n}\n\nexport class Grid<T> {\n\tpublic constructor( public readonly width: number, public readonly height: number ) {}\n\n\tpublic boundsCheck( { x, y }: Point ) {\n\t\tconst { width, height } = this;\n\t\treturn x >= 0 && x < width && y >= 0 && y < height;\n\t}\n\n\tpublic get( { x, y }: Point ) {\n\t\tvalidate( this, { x, y } );\n\t\tconst key = JSON.stringify( { x, y } );\n\t\treturn this.data.get( key );\n\t}\n\n\tpublic set( { x, y }: Point, value: T ) {\n\t\tvalidate( this, { x, y } );\n\t\tconst key = JSON.stringify( { x, y } );\n\t\tthis.data.set( key, value );\n\t}\n\n\tpublic [Symbol.iterator]() {\n\t\tfunction *iterator( this: Grid<T> ) {\n\t\t\tconst { width, height } = this;\n\t\t\tfor( let x = 0; x < width; ++x ) {\n\t\t\tfor( let y = 0; y < height; ++ y ) {\n\t\t\t\tyield this.get( { x, y } );\n\t\t\t} }\n\t\t}\n\t\treturn iterator.call( this ) as IterableIterator<T|undefined>;\n\t}\n\n\tprivate data = new Map<string, T>();\n}\n","export class Bounds {\n  constructor(left, top, width, height) {\n    this.left = left;\n    this.top = top;\n    this.width = width;\n    this.height = height;\n  }\n\n  get bottom() {\n    const top = this.top,\n          height = this.height;\n    return top + height;\n  }\n\n  get right() {\n    const left = this.left,\n          width = this.width;\n    return left + width;\n  }\n\n  get center() {\n    const left = this.left,\n          top = this.top,\n          width = this.width,\n          height = this.height,\n          x = left + width * .5,\n          y = top + height * .5;\n    return {\n      x,\n      y\n    };\n  }\n\n  get n() {\n    const left = this.left,\n          top = this.top,\n          width = this.width,\n          x = left + width * .5,\n          y = top;\n    return {\n      x,\n      y\n    };\n  }\n\n  get ne() {\n    const left = this.left,\n          top = this.top,\n          width = this.width,\n          x = left + width,\n          y = top;\n    return {\n      x,\n      y\n    };\n  }\n\n  get e() {\n    const left = this.left,\n          top = this.top,\n          width = this.width,\n          height = this.height,\n          x = left + width,\n          y = top + height * .5;\n    return {\n      x,\n      y\n    };\n  }\n\n  get se() {\n    const left = this.left,\n          top = this.top,\n          width = this.width,\n          height = this.height,\n          x = left + width,\n          y = top + height;\n    return {\n      x,\n      y\n    };\n  }\n\n  get s() {\n    const left = this.left,\n          top = this.top,\n          width = this.width,\n          height = this.height,\n          x = left + width * .5,\n          y = top + height;\n    return {\n      x,\n      y\n    };\n  }\n\n  get sw() {\n    const left = this.left,\n          top = this.top,\n          height = this.height,\n          x = left,\n          y = top + height;\n    return {\n      x,\n      y\n    };\n  }\n\n  get w() {\n    const left = this.left,\n          top = this.top,\n          height = this.height,\n          x = left,\n          y = top + height * .5;\n    return {\n      x,\n      y\n    };\n  }\n\n  get nw() {\n    const left = this.left,\n          top = this.top,\n          x = left,\n          y = top;\n    return {\n      x,\n      y\n    };\n  }\n\n  hitTest({\n    x,\n    y\n  }) {\n    const top = this.top,\n          right = this.right,\n          bottom = this.bottom,\n          left = this.left;\n    return x >= left && x <= right && y >= top && y <= bottom;\n  }\n\n}","export class Bounds {\n\tpublic constructor(\n\t\tpublic readonly left: number,\n\t\tpublic readonly top: number,\n\t\tpublic readonly width: number,\n\t\tpublic readonly height: number\n\t) {}\n\n\tpublic get bottom() {\n\t\tconst { top, height } = this;\n\t\treturn top + height;\n\t}\n\n\tpublic get right() {\n\t\tconst { left, width } = this;\n\t\treturn left + width;\n\t}\n\n\tpublic get center() {\n\t\tconst { left, top, width, height } = this,\n\t\t\tx = left + width * .5,\n\t\t\ty = top + height * .5;\n\t\treturn { x, y };\n\t}\n\n\tpublic get n() {\n\t\tconst { left, top, width } = this,\n\t\t\tx = left + width * .5,\n\t\t\ty = top;\n\t\treturn { x, y };\n\t}\n\n\tpublic get ne() {\n\t\tconst { left, top, width } = this,\n\t\t\tx = left + width,\n\t\t\ty = top;\n\t\treturn { x, y };\n\t}\n\n\tpublic get e() {\n\t\tconst { left, top, width, height } = this,\n\t\t\tx = left + width,\n\t\t\ty = top + height * .5;\n\t\treturn { x, y };\n\t}\n\n\tpublic get se() {\n\t\tconst { left, top, width, height } = this,\n\t\t\tx = left + width,\n\t\t\ty = top + height;\n\t\treturn { x, y };\n\t}\n\n\tpublic get s() {\n\t\tconst { left, top, width, height } = this,\n\t\t\tx = left + width * .5,\n\t\t\ty = top + height;\n\t\treturn { x, y };\n\t}\n\n\tpublic get sw() {\n\t\tconst { left, top, height } = this,\n\t\t\tx = left,\n\t\t\ty = top + height;\n\t\treturn { x, y };\n\t}\n\n\tpublic get w() {\n\t\tconst { left, top, height } = this,\n\t\t\tx = left,\n\t\t\ty = top + height * .5;\n\t\treturn { x, y };\n\t}\n\n\tpublic get nw() {\n\t\tconst { left, top } = this,\n\t\t\tx = left,\n\t\t\ty = top;\n\t\treturn { x, y };\n\t}\n\n\tpublic hitTest( { x, y }: Point ) {\n\t\tconst { top, right, bottom, left } = this;\n\t\treturn x >= left && x <= right\n\t\t\t&& y >= top && y <= bottom;\n\t}\n}\n","export class Square {\n  constructor(position, bounds) {\n    this.position = position;\n    this.bounds = bounds;\n    this.enabled = true;\n    this.color = null;\n  }\n\n  get empty() {\n    return this.color === null;\n  }\n\n}","import { Bounds } from 'src/bounds';\n\nexport class Square {\n\tpublic constructor(\n\t\tpublic readonly position: Point,\n\t\tpublic readonly bounds: Bounds\n\t) {}\n\n\tpublic enabled = true;\n\tpublic color: number|null = null;\n\n\tpublic get empty() { return this.color === null; }\n}\n","import { Grid } from 'src/grid';\nimport { Bounds } from 'src/bounds';\nimport { Square } from 'src/square';\nimport { zip } from 'lodash';\n\nexport class Board {\n\tpublic reset( { width, height }: Readonly<Size> ) {\n\t\tconst grid = new Grid<Square>( width, height ),\n\t\t\tsquareSize: Size = { width: 64, height: 64 },\n\t\t\tgutterSize: Size = { width: 6, height: 6 },\n\t\t\tbounds = new Bounds(\n\t\t\t\t0.5,\n\t\t\t\t0.5,\n\t\t\t\t1 + width * ( squareSize.width + gutterSize.width ) + gutterSize.width,\n\t\t\t\t1 + height * ( squareSize.height + gutterSize.height ) + gutterSize.height\n\t\t\t);\n\t\tfor( let x = 0; x < width; ++x ) {\n\t\tfor( let y = 0; y < height; ++y ) {\n\t\t\tconst position = { x, y },\n\t\t\t\tbounds = new Bounds(\n\t\t\t\t\t0.5 + x * ( squareSize.width + gutterSize.width ) + gutterSize.width,\n\t\t\t\t\t0.5 + y * ( squareSize.height + gutterSize.height ) + gutterSize.height,\n\t\t\t\t\t0.5 + squareSize.width,\n\t\t\t\t\t0.5 + squareSize.height\n\t\t\t\t);\n\t\t\tgrid.set( { x, y }, new Square( position, bounds ) );\n\t\t} }\n\t\tObject.assign( this, { grid, bounds } );\n\t}\n\n\tpublic get width() {\n\t\tconst { grid: { width } } = this;\n\t\treturn width;\n\t}\n\n\tpublic get height() {\n\t\tconst { grid: { height } } = this;\n\t\treturn height;\n\t}\n\n\tpublic get( { x, y }: Point ) {\n\t\tconst { grid } = this;\n\t\treturn grid.get( { x, y } )!;\n\t}\n\n\tpublic boundsCheck( { x, y }: Point ) {\n\t\tconst { grid } = this;\n\t\treturn grid.boundsCheck( { x, y } )!;\n\t}\n\n\tpublic getData() {\n\t\treturn Object.freeze( Array.from( this.grid ).map( sq => sq.empty ? null : sq.color ) );\n\t}\n\n\tpublic setData( data: ReadonlyArray<number> ) {\n\t\tfor( const [ color, square ] of zip( data, Array.from( this.grid ) ) ) {\n\t\t\tsquare.color = color;\n\t\t}\n\t}\n\n\tpublic getGameState( index: number ) {\n\t\treturn {\n\t\t\tindex,\n\n\t\t\tdata: this.getData()\n\t\t} as GameState;\n\t}\n\n\tpublic getMask() {\n\t\treturn Object.freeze( Array.from( this.grid ).map( sq => sq.enabled ) );\n\t}\n\n\tpublic setMask( mask: ReadonlyArray<boolean> ) {\n\t\tfor( const [ enabled, square ] of zip( mask, Array.from( this.grid ) ) ) {\n\t\t\tsquare.enabled = enabled;\n\t\t}\n\t}\n\n\tpublic static fromGame( game: Game, gameState: GameState ) {\n\t\tconst board = new Board;\n\t\tboard.reset( game.size );\n\t\tboard.setData( gameState.data );\n\t\tboard.setMask( game.mask );\n\t\treturn board;\n\t}\n\n\tpublic [Symbol.iterator]() {\n\t\tconst { grid } = this;\n\t\treturn grid[ Symbol.iterator ]() as IterableIterator<Square>;\n\t}\n\n\tpublic hitTest( pt: Point ): Square|null {\n\t\tfor( const square of this ) {\n\t\t\tif( square.bounds.hitTest( pt ) ) {\n\t\t\t\treturn square;\n\t\t\t}\n\t\t}\n\t\treturn null;\n\t}\n\n\tpublic bounds = new Bounds( 0, 0, 0, 0 );\n\tprivate grid = new Grid<Square>( 0, 0 );\n}\n","import \"core-js/modules/web.dom.iterable\";\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; var ownKeys = Object.keys(source); if (typeof Object.getOwnPropertySymbols === 'function') { ownKeys = ownKeys.concat(Object.getOwnPropertySymbols(source).filter(function (sym) { return Object.getOwnPropertyDescriptor(source, sym).enumerable; })); } ownKeys.forEach(function (key) { _defineProperty(target, key, source[key]); }); } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nimport { Board } from './board';\nconst directions = [{\n  x: 0,\n  y: -1\n}, {\n  x: 1,\n  y: -1\n}, {\n  x: 1,\n  y: 0\n}, {\n  x: 1,\n  y: 1\n}, {\n  x: 0,\n  y: 1\n}, {\n  x: -1,\n  y: 1\n}, {\n  x: -1,\n  y: 0\n}, {\n  x: -1,\n  y: -1\n}];\n\nfunction getAffectedSquares(board, position, color) {\n  if (!board.boundsCheck(position)) {\n    return [];\n  }\n\n  const square = board.get(position);\n\n  if (!square || !square.empty || !square.enabled) {\n    return [];\n  }\n\n  function direction({\n    x,\n    y\n  }, delta) {\n    const squares = [];\n\n    for (;;) {\n      x += delta.x;\n      y += delta.y;\n\n      if (!board.boundsCheck({\n        x,\n        y\n      })) {\n        return [];\n      }\n\n      const square = board.get({\n        x,\n        y\n      });\n\n      if (!square || square.empty || !square.enabled) {\n        return [];\n      }\n\n      if (square.color === color) {\n        return squares;\n      }\n\n      squares.push(square);\n    }\n  }\n\n  let squares = [square];\n\n  for (const delta of directions) {\n    squares = [...squares, ...direction(position, delta)];\n  }\n\n  if (squares.length <= 1) {\n    return [];\n  }\n\n  return squares;\n}\n\nclass RulesStandard {\n  constructor() {\n    this.name = 'Standard';\n    this.ruleSet = \"standard\"\n    /* standard */\n    ;\n    this.colors = 2;\n    this.boardSize = Object.freeze({\n      width: 8,\n      height: 8\n    });\n  }\n\n  isValid(game, gameState, position, color) {\n    return getAffectedSquares(Board.fromGame(game, gameState), position, color).length > 0;\n  }\n\n  compareScores(score1, score2) {\n    return score1 - score2;\n  }\n\n  getValidMoves(game, gameState, color) {\n    const points = [];\n    const _game$size = game.size,\n          width = _game$size.width,\n          height = _game$size.height;\n\n    for (let x = 0; x < width; ++x) {\n      for (let y = 0; y < height; ++y) {\n        const point = {\n          x,\n          y\n        };\n        if (this.isValid(game, gameState, point, color)) points.push(point);\n      }\n    }\n\n    return points;\n  }\n\n  isGameOver(game, gameState) {\n    const colors = this.colors;\n\n    for (let color = 0; color < colors; ++color) {\n      if (this.getValidMoves(game, gameState, color).length > 0) return false;\n    }\n\n    return true;\n  }\n\n  makeMove(game, gameState, position) {\n    const prevTurn = gameState.turn,\n          prevIndex = gameState.index;\n    const board = Board.fromGame(game, gameState);\n    const squares = getAffectedSquares(board, position, prevTurn);\n    if (squares.length === 0) return null;\n\n    for (const square of squares) {\n      square.color = prevTurn;\n    }\n\n    const index = prevIndex + 1;\n    const lastMove = Object.freeze(_objectSpread({}, position));\n    const data = board.getData();\n    const colors = this.colors;\n    let turn = null;\n\n    for (let i = 0; i < colors; ++i) {\n      const t = (prevTurn + 1 + i) % colors;\n\n      if (this.getValidMoves(game, {\n        turn: t,\n        index,\n        data,\n        lastMove\n      }, t).length > 0) {\n        turn = t;\n        break;\n      }\n    }\n\n    return {\n      turn,\n      index,\n      data,\n      lastMove\n    };\n  }\n\n  getScore(game, gameState, color) {\n    const board = Board.fromGame(game, gameState);\n    let score = 0;\n\n    for (const square of board) {\n      if (square && square.enabled && square.color === color) {\n        ++score;\n      }\n    }\n\n    return score;\n  }\n\n  newGame(gameId) {\n    const boardSize = this.boardSize;\n    const board = new Board();\n    board.reset(boardSize); // TODO: center? gets ugly with an odd dimension\n\n    board.get({\n      x: 3,\n      y: 3\n    }).color = 0;\n    board.get({\n      x: 4,\n      y: 3\n    }).color = 1;\n    board.get({\n      x: 3,\n      y: 4\n    }).color = 1;\n    board.get({\n      x: 4,\n      y: 4\n    }).color = 0;\n    const gameStates = [{\n      turn: 0,\n      index: 0,\n      data: board.getData(),\n      lastMove: null\n    }];\n    return {\n      gameId,\n      ruleSet: this.ruleSet,\n      mask: board.getMask(),\n      colors: Object.freeze(['black', 'white']),\n      size: Object.freeze(_objectSpread({}, boardSize)),\n      gameStates: Object.freeze(gameStates)\n    };\n  }\n\n}\n\nclass RulesReversed extends RulesStandard {\n  constructor() {\n    super(...arguments);\n    this.name = 'Reversed';\n    this.ruleSet = \"reversed\"\n    /* reversed */\n    ;\n  }\n\n  compareScores(score1, score2) {\n    return score2 - score1;\n  }\n\n}\n\nexport const rulesStandard = new RulesStandard();\nexport const rulesReversed = new RulesReversed();\nexport const ruleSets = [rulesStandard, rulesReversed];\nexport const ruleSetMap = new Map();\n\nfor (const ruleSet of ruleSets) {\n  ruleSetMap.set(ruleSet.ruleSet, ruleSet);\n}","import { Board } from './board';\nimport { Square } from './square';\n\nconst directions: ReadonlyArray<Point> = [\n\t{ x:  0, y: -1 },\n\t{ x:  1, y: -1 },\n\t{ x:  1, y:  0 },\n\t{ x:  1, y:  1 },\n\t{ x:  0, y:  1 },\n\t{ x: -1, y:  1 },\n\t{ x: -1, y:  0 },\n\t{ x: -1, y: -1 }\n];\n\nfunction getAffectedSquares( board: Board, position: Point, color: number ): Square[] {\n\tif( !board.boundsCheck( position ) ) { return []; }\n\tconst square = board.get( position );\n\tif( !square || !square.empty || !square.enabled ) { return []; }\n\tfunction direction( { x, y }: Point, delta: Point ): Square[] {\n\t\tconst squares = [] as Square[];\n\t\tfor( ; ; ) {\n\t\t\tx += delta.x;\n\t\t\ty += delta.y;\n\t\t\tif( !board.boundsCheck( { x, y } ) ) { return []; }\n\t\t\tconst square = board.get( { x, y } );\n\t\t\tif( !square || square.empty || !square.enabled ) { return []; }\n\t\t\tif( square.color === color ) { return squares; }\n\t\t\tsquares.push( square );\n\t\t}\n\t}\n\tlet squares = [ square ];\n\tfor( const delta of directions ) {\n\t\tsquares = [ ...squares, ...direction( position, delta ) ];\n\t}\n\tif( squares.length <= 1 ) { return []; }\n\treturn squares;\n}\n\nclass RulesStandard implements Rules {\n\tpublic readonly name: string = 'Standard';\n\tpublic readonly ruleSet: RuleSet = RuleSet.standard;\n\tpublic readonly colors: number = 2;\n\tpublic readonly boardSize: Readonly<Size> = Object.freeze( { width: 8, height: 8 } );\n\n\tpublic isValid( game: Game, gameState: GameState, position: Point, color: number ) {\n\t\treturn getAffectedSquares( Board.fromGame( game, gameState ), position, color ).length > 0;\n\t}\n\n\tpublic compareScores( score1: number, score2: number ) {\n\t\treturn score1 - score2;\n\t}\n\n\tpublic getValidMoves( game: Game, gameState: GameState, color: number ) {\n\t\tconst points = [] as Point[];\n\t\tconst { size: { width, height } } = game;\n\t\tfor( let x = 0; x < width; ++x ) {\n\t\tfor( let y = 0; y < height; ++y ) {\n\t\t\tconst point = { x, y };\n\t\t\tif( this.isValid( game, gameState, point, color ) ) points.push( point );\n\t\t}\n\t\t}\n\t\treturn points;\n\t}\n\n\tpublic isGameOver( game: Game, gameState: GameState ) {\n\t\tconst { colors } = this;\n\t\tfor( let color = 0; color < colors; ++color ) {\n\t\t\tif( this.getValidMoves( game, gameState, color ).length > 0 ) return false;\n\t\t}\n\t\treturn true;\n\t}\n\n\tpublic makeMove( game: Game, gameState: GameState, position: Readonly<Point> ) {\n\t\tconst { turn: prevTurn, index: prevIndex } = gameState;\n\t\tconst board = Board.fromGame( game, gameState );\n\t\tconst squares = getAffectedSquares( board, position, prevTurn );\n\t\tif( squares.length === 0 ) return null;\n\t\tfor( const square of squares ) {\n\t\t\tsquare.color = prevTurn;\n\t\t}\n\t\tconst index = prevIndex + 1;\n\t\tconst lastMove = Object.freeze( { ...position } );\n\t\tconst data = board.getData();\n\t\tconst { colors } = this;\n\t\tlet turn: number|null = null;\n\t\tfor( let i = 0; i < colors; ++i ) {\n\t\t\tconst t = ( prevTurn + 1 + i ) % colors;\n\t\t\tif( this.getValidMoves( game, { turn: t, index, data, lastMove }, t ).length > 0 ) {\n\t\t\t\tturn = t;\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t\treturn { turn, index, data, lastMove };\n\t}\n\n\tpublic getScore( game: Game, gameState: GameState, color: number ) {\n\t\tconst board = Board.fromGame( game, gameState );\n\t\tlet score = 0;\n\t\tfor( const square of board ) {\n\t\t\tif( square && square.enabled && square.color === color ) {\n\t\t\t\t++score;\n\t\t\t}\n\t\t}\n\t\treturn score;\n\t}\n\n\tpublic newGame( gameId: string ) {\n\t\tconst { boardSize } = this;\n\n\t\tconst board = new Board;\n\t\tboard.reset( boardSize );\n\t\t// TODO: center? gets ugly with an odd dimension\n\t\tboard.get( { x: 3, y: 3 } ).color = 0;\n\t\tboard.get( { x: 4, y: 3 } ).color = 1;\n\t\tboard.get( { x: 3, y: 4 } ).color = 1;\n\t\tboard.get( { x: 4, y: 4 } ).color = 0;\n\t\tconst gameStates = [ {\n\t\t\tturn: 0,\n\t\t\tindex: 0,\n\t\t\tdata: board.getData(),\n\t\t\tlastMove: null\n\t\t} as GameState ];\n\t\treturn {\n\t\t\tgameId,\n\t\t\truleSet: this.ruleSet,\n\t\t\tmask: board.getMask(),\n\t\t\tcolors: Object.freeze( [ 'black', 'white' ] ),\n\t\t\tsize: Object.freeze( { ...boardSize } ),\n\t\t\tgameStates: Object.freeze( gameStates )\n\t\t};\n\t}\n}\n\nclass RulesReversed extends RulesStandard {\n\tpublic readonly name: string = 'Reversed';\n\tpublic readonly ruleSet: RuleSet = RuleSet.reversed;\n\n\tpublic compareScores( score1: number, score2: number ) {\n\t\treturn score2 - score1;\n\t}\n}\n\nexport const rulesStandard = new RulesStandard;\nexport const rulesReversed = new RulesReversed;\nexport const ruleSets = [ rulesStandard, rulesReversed ] as Rules[];\nexport const ruleSetMap = new Map<RuleSet, Rules>();\nfor( const ruleSet of ruleSets ) {\n\truleSetMap.set( ruleSet.ruleSet, ruleSet );\n}\n","import { Component, NgZone, ViewChild } from '@angular/core';\r\nimport { GameService } from 'client/game.service';\r\nimport { ModalDirective } from 'ngx-bootstrap';\r\nimport { ruleSets } from 'src/rule-sets';\r\n\r\n@Component( {\r\n\tselector: 'modal-new-game',\r\n\ttemplateUrl: 'new-game.component.html',\r\n\tstyleUrls: [ './new-game.component.scss' ]\r\n} )\r\nexport class ModalNewGameComponent {\r\n\tconstructor(\r\n\t\tprivate readonly gameService: GameService,\r\n\t\tprivate readonly zone: NgZone\r\n\t) {}\r\n\r\n\t@ViewChild( 'newGameModal' )\r\n\tprotected newGameModal: ModalDirective;\r\n\r\n\tpublic show( room: Room ) {\r\n\t\tconst { newGameModal, zone } = this;\r\n\t\tzone.run( () => {\r\n\t\t\tthis.roomId = room.roomId;\r\n\t\t\tnewGameModal.show();\r\n\t\t} );\r\n\t}\r\n\r\n\tpublic hide() {\r\n\t\tconst { newGameModal, zone } = this;\r\n\t\tzone.run( () => {\r\n\t\t\tthis.roomId = null;\r\n\t\t\tnewGameModal.hide();\r\n\t\t} );\r\n\t}\r\n\r\n\tpublic roomId: string|null;\r\n\tpublic ruleSet: RuleSet;\r\n\tpublic readonly ruleSets = ruleSets;\r\n\r\n\tpublic async newGame() {\r\n\t\tconst { gameService, roomId, ruleSet } = this;\r\n\t\tthis.hide();\r\n\t\tawait gameService.newGame( roomId, ruleSet );\r\n\t}\r\n}\r\n","import \"core-js/modules/web.dom.iterable\";\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; var ownKeys = Object.keys(source); if (typeof Object.getOwnPropertySymbols === 'function') { ownKeys = ownKeys.concat(Object.getOwnPropertySymbols(source).filter(function (sym) { return Object.getOwnPropertyDescriptor(source, sym).enumerable; })); } ownKeys.forEach(function (key) { _defineProperty(target, key, source[key]); }); } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nimport { tap } from 'rxjs/operators';\nexport const tapLog = (...prefixes) => tap(['next', 'error', 'complete'].reduce((prev, key) => _objectSpread({}, prev, {\n  [key]: console.log.bind(console, ...prefixes, key)\n}), {}));","import { Observer } from 'rxjs';\r\nimport { tap } from 'rxjs/operators';\r\n\r\nexport const tapLog = <T>( ...prefixes: string[] ) =>\r\n\ttap(\r\n\t\t[ 'next', 'error', 'complete' ]\r\n\t\t.reduce( ( prev, key ) => ( { ...prev, [ key ]: console.log.bind( console, ...prefixes, key ) } ), {} as Observer<T> )\r\n\t);\r\n","import { SchedulerLike, Observable, Subject } from 'rxjs';\r\nimport { ZoneScheduler } from 'ngx-zone-scheduler';\r\nimport { Inject, Injectable, OnDestroy } from '@angular/core';\r\nimport { SessionService } from './session.service';\r\nimport { observeOn, shareReplay, scan, takeUntil } from 'rxjs/operators';\r\nimport { tapLog } from 'src/operators';\r\n\r\n@Injectable()\r\nexport class GameService implements OnDestroy {\r\n\tconstructor(\r\n\t\t@Inject(ZoneScheduler)\r\n\t\tprivate readonly scheduler: SchedulerLike,\r\n\t\t@Inject(SessionService)\r\n\t\tprivate readonly sessionService: SessionService\r\n\t) {\r\n\t\tthis.allGames =\r\n\t\tsessionService.getEvents<Game>( 'update' )\r\n\t\t.pipe(\r\n\t\t\ttakeUntil( this.destroyed ),\r\n\t\t\tscan<Game, Game[]>( ( prev, game ) => {\r\n\t\t\t\tconst games = [ ...prev ];\r\n\t\t\t\tconst index = games.findIndex( g => g.gameId === game.gameId );\r\n\t\t\t\tif( index >= 0 ) {\r\n\t\t\t\t\tgames.splice( index, 1, game );\r\n\t\t\t\t} else {\r\n\t\t\t\t\tgames.push( game );\r\n\t\t\t\t}\r\n\t\t\t\treturn games;\r\n\t\t\t}, [] as Game[] ),\r\n\t\t\tshareReplay( 1 )\r\n\t\t);\r\n\r\n\t\tthis.allGames.pipe( tapLog( 'allGames' ) ).subscribe();\r\n\t}\r\n\r\n\tpublic ngOnDestroy() {\r\n\t\tthis.destroyed.next( true );\r\n\t\tthis.destroyed.complete();\r\n\t}\r\n\r\n\tpublic getGames() {\r\n\t\tconst { allGames, scheduler } = this;\r\n\t\treturn allGames.pipe( observeOn( scheduler ) );\r\n\t}\r\n\r\n\tpublic async newGame( roomId: string, ruleSet: RuleSet ) {\r\n\t\tconst { sessionService } = this;\r\n\t\treturn await sessionService.emit<Game>( 'newGame', { roomId, ruleSet } );\r\n\t}\r\n\r\n\tpublic async makeMove( roomId: string, position: Point ) {\r\n\t\tconst { sessionService } = this;\r\n\t\tawait sessionService.emit( 'makeMove', { roomId, position } );\r\n\t}\r\n\r\n\tprivate readonly destroyed = new Subject<true>();\r\n\tprivate readonly allGames: Observable<Game[]>;\r\n}\r\n","/**\n * @fileoverview This file was generated by the Angular template compiler. Do not edit.\n *\n * @suppress {suspiciousCode,uselessCode,missingProperties,missingOverride,checkTypes}\n * tslint:disable\n */\nimport * as i0 from \"./new-game.component.scss.shim.ngstyle\";\nimport * as i1 from \"@angular/core\";\nimport * as i2 from \"@angular/forms\";\nimport * as i3 from \"ngx-bootstrap/modal/modal.directive\";\nimport * as i4 from \"ngx-bootstrap/component-loader/component-loader.factory\";\nimport * as i5 from \"./header.component.ngfactory\";\nimport * as i6 from \"./header.component\";\nimport * as i7 from \"@angular/common\";\nimport * as i8 from \"./new-game.component\";\nimport * as i9 from \"../game.service\";\nvar styles_ModalNewGameComponent = [i0.styles];\nvar RenderType_ModalNewGameComponent = i1.ɵcrt({\n  encapsulation: 0,\n  styles: styles_ModalNewGameComponent,\n  data: {}\n});\nexport { RenderType_ModalNewGameComponent };\n\nfunction View_ModalNewGameComponent_1(_l) {\n  return i1.ɵvid(0, [(_l()(), i1.ɵeld(0, 0, null, null, 11, \"div\", [[\"class\", \"form-check-inline\"]], null, null, null, null, null)), (_l()(), i1.ɵeld(1, 0, null, null, 10, \"label\", [[\"class\", \"form-check-label\"]], null, null, null, null, null)), (_l()(), i1.ɵeld(2, 0, null, null, 8, \"input\", [[\"class\", \"form-check-input\"], [\"name\", \"ruleSet\"], [\"required\", \"required\"], [\"type\", \"radio\"]], [[1, \"required\", 0], [2, \"ng-untouched\", null], [2, \"ng-touched\", null], [2, \"ng-pristine\", null], [2, \"ng-dirty\", null], [2, \"ng-valid\", null], [2, \"ng-invalid\", null], [2, \"ng-pending\", null]], [[null, \"ngModelChange\"], [null, \"input\"], [null, \"blur\"], [null, \"compositionstart\"], [null, \"compositionend\"], [null, \"change\"]], function (_v, en, $event) {\n    var ad = true;\n    var _co = _v.component;\n\n    if (\"input\" === en) {\n      var pd_0 = i1.ɵnov(_v, 3)._handleInput($event.target.value) !== false;\n      ad = pd_0 && ad;\n    }\n\n    if (\"blur\" === en) {\n      var pd_1 = i1.ɵnov(_v, 3).onTouched() !== false;\n      ad = pd_1 && ad;\n    }\n\n    if (\"compositionstart\" === en) {\n      var pd_2 = i1.ɵnov(_v, 3)._compositionStart() !== false;\n      ad = pd_2 && ad;\n    }\n\n    if (\"compositionend\" === en) {\n      var pd_3 = i1.ɵnov(_v, 3)._compositionEnd($event.target.value) !== false;\n      ad = pd_3 && ad;\n    }\n\n    if (\"change\" === en) {\n      var pd_4 = i1.ɵnov(_v, 4).onChange() !== false;\n      ad = pd_4 && ad;\n    }\n\n    if (\"blur\" === en) {\n      var pd_5 = i1.ɵnov(_v, 4).onTouched() !== false;\n      ad = pd_5 && ad;\n    }\n\n    if (\"ngModelChange\" === en) {\n      var pd_6 = (_co.ruleSet = $event) !== false;\n      ad = pd_6 && ad;\n    }\n\n    return ad;\n  }, null, null)), i1.ɵdid(3, 16384, null, 0, i2.DefaultValueAccessor, [i1.Renderer2, i1.ElementRef, [2, i2.COMPOSITION_BUFFER_MODE]], null, null), i1.ɵdid(4, 212992, null, 0, i2.RadioControlValueAccessor, [i1.Renderer2, i1.ElementRef, i2.ɵangular_packages_forms_forms_i, i1.Injector], {\n    name: [0, \"name\"],\n    value: [1, \"value\"]\n  }, null), i1.ɵdid(5, 16384, null, 0, i2.RequiredValidator, [], {\n    required: [0, \"required\"]\n  }, null), i1.ɵprd(1024, null, i2.NG_VALIDATORS, function (p0_0) {\n    return [p0_0];\n  }, [i2.RequiredValidator]), i1.ɵprd(1024, null, i2.NG_VALUE_ACCESSOR, function (p0_0, p1_0) {\n    return [p0_0, p1_0];\n  }, [i2.DefaultValueAccessor, i2.RadioControlValueAccessor]), i1.ɵdid(8, 671744, null, 0, i2.NgModel, [[2, i2.ControlContainer], [6, i2.NG_VALIDATORS], [8, null], [6, i2.NG_VALUE_ACCESSOR]], {\n    name: [0, \"name\"],\n    model: [1, \"model\"]\n  }, {\n    update: \"ngModelChange\"\n  }), i1.ɵprd(2048, null, i2.NgControl, null, [i2.NgModel]), i1.ɵdid(10, 16384, null, 0, i2.NgControlStatus, [[4, i2.NgControl]], null, null), (_l()(), i1.ɵted(11, null, [\" \", \" \"]))], function (_ck, _v) {\n    var _co = _v.component;\n    var currVal_8 = \"ruleSet\";\n    var currVal_9 = _v.context.$implicit.ruleSet;\n\n    _ck(_v, 4, 0, currVal_8, currVal_9);\n\n    var currVal_10 = \"required\";\n\n    _ck(_v, 5, 0, currVal_10);\n\n    var currVal_11 = \"ruleSet\";\n    var currVal_12 = _co.ruleSet;\n\n    _ck(_v, 8, 0, currVal_11, currVal_12);\n  }, function (_ck, _v) {\n    var currVal_0 = i1.ɵnov(_v, 5).required ? \"\" : null;\n    var currVal_1 = i1.ɵnov(_v, 10).ngClassUntouched;\n    var currVal_2 = i1.ɵnov(_v, 10).ngClassTouched;\n    var currVal_3 = i1.ɵnov(_v, 10).ngClassPristine;\n    var currVal_4 = i1.ɵnov(_v, 10).ngClassDirty;\n    var currVal_5 = i1.ɵnov(_v, 10).ngClassValid;\n    var currVal_6 = i1.ɵnov(_v, 10).ngClassInvalid;\n    var currVal_7 = i1.ɵnov(_v, 10).ngClassPending;\n\n    _ck(_v, 2, 0, currVal_0, currVal_1, currVal_2, currVal_3, currVal_4, currVal_5, currVal_6, currVal_7);\n\n    var currVal_13 = _v.context.$implicit.name;\n\n    _ck(_v, 11, 0, currVal_13);\n  });\n}\n\nexport function View_ModalNewGameComponent_0(_l) {\n  return i1.ɵvid(0, [i1.ɵqud(402653184, 1, {\n    newGameModal: 0\n  }), (_l()(), i1.ɵeld(1, 16777216, null, null, 19, \"div\", [[\"aria-hidden\", \"true\"], [\"bsModal\", \"\"], [\"class\", \"modal fade\"], [\"role\", \"dialog\"], [\"tabindex\", \"-1\"]], null, [[null, \"click\"], [null, \"keydown.esc\"]], function (_v, en, $event) {\n    var ad = true;\n\n    if (\"click\" === en) {\n      var pd_0 = i1.ɵnov(_v, 2).onClick($event) !== false;\n      ad = pd_0 && ad;\n    }\n\n    if (\"keydown.esc\" === en) {\n      var pd_1 = i1.ɵnov(_v, 2).onEsc($event) !== false;\n      ad = pd_1 && ad;\n    }\n\n    return ad;\n  }, null, null)), i1.ɵdid(2, 212992, [[1, 4], [\"newGameModal\", 4]], 0, i3.ModalDirective, [i1.ElementRef, i1.ViewContainerRef, i1.Renderer2, i4.ComponentLoaderFactory], null, null), (_l()(), i1.ɵeld(3, 0, null, null, 17, \"div\", [[\"class\", \"modal-dialog modal-lg\"]], null, null, null, null, null)), (_l()(), i1.ɵeld(4, 0, null, null, 16, \"div\", [[\"class\", \"modal-content\"]], null, null, null, null, null)), (_l()(), i1.ɵeld(5, 0, null, null, 2, \"modal-header\", [], null, [[null, \"closeClick\"]], function (_v, en, $event) {\n    var ad = true;\n\n    if (\"closeClick\" === en) {\n      var pd_0 = i1.ɵnov(_v, 2).hide() !== false;\n      ad = pd_0 && ad;\n    }\n\n    return ad;\n  }, i5.View_ModalHeaderComponent_0, i5.RenderType_ModalHeaderComponent)), i1.ɵdid(6, 49152, null, 0, i6.ModalHeaderComponent, [], null, {\n    closeClick: \"closeClick\"\n  }), (_l()(), i1.ɵted(-1, 0, [\" New Game \"])), (_l()(), i1.ɵeld(8, 0, null, null, 12, \"div\", [[\"class\", \"modal-body\"]], null, null, null, null, null)), (_l()(), i1.ɵeld(9, 0, null, null, 11, \"form\", [[\"autocomplete\", \"off\"], [\"class\", \"clearfix\"], [\"novalidate\", \"\"]], [[2, \"ng-untouched\", null], [2, \"ng-touched\", null], [2, \"ng-pristine\", null], [2, \"ng-dirty\", null], [2, \"ng-valid\", null], [2, \"ng-invalid\", null], [2, \"ng-pending\", null]], [[null, \"ngSubmit\"], [null, \"submit\"], [null, \"reset\"]], function (_v, en, $event) {\n    var ad = true;\n    var _co = _v.component;\n\n    if (\"submit\" === en) {\n      var pd_0 = i1.ɵnov(_v, 11).onSubmit($event) !== false;\n      ad = pd_0 && ad;\n    }\n\n    if (\"reset\" === en) {\n      var pd_1 = i1.ɵnov(_v, 11).onReset() !== false;\n      ad = pd_1 && ad;\n    }\n\n    if (\"ngSubmit\" === en) {\n      var pd_2 = _co.newGame() !== false;\n      ad = pd_2 && ad;\n    }\n\n    return ad;\n  }, null, null)), i1.ɵdid(10, 16384, null, 0, i2.ɵangular_packages_forms_forms_bg, [], null, null), i1.ɵdid(11, 4210688, [[\"newGameForm\", 4]], 0, i2.NgForm, [[8, null], [8, null]], null, {\n    ngSubmit: \"ngSubmit\"\n  }), i1.ɵprd(2048, null, i2.ControlContainer, null, [i2.NgForm]), i1.ɵdid(13, 16384, null, 0, i2.NgControlStatusGroup, [[4, i2.ControlContainer]], null, null), (_l()(), i1.ɵeld(14, 0, null, null, 4, \"fieldset\", [[\"class\", \"form-group\"]], null, null, null, null, null)), (_l()(), i1.ɵeld(15, 0, null, null, 1, \"legend\", [], null, null, null, null, null)), (_l()(), i1.ɵted(-1, null, [\"Rule Set\"])), (_l()(), i1.ɵand(16777216, null, null, 1, null, View_ModalNewGameComponent_1)), i1.ɵdid(18, 802816, null, 0, i7.NgForOf, [i1.ViewContainerRef, i1.TemplateRef, i1.IterableDiffers], {\n    ngForOf: [0, \"ngForOf\"]\n  }, null), (_l()(), i1.ɵeld(19, 0, null, null, 1, \"button\", [[\"class\", \"btn float-right\"]], [[8, \"disabled\", 0]], null, null, null, null)), (_l()(), i1.ɵted(-1, null, [\" Start \"]))], function (_ck, _v) {\n    var _co = _v.component;\n\n    _ck(_v, 2, 0);\n\n    var currVal_7 = _co.ruleSets;\n\n    _ck(_v, 18, 0, currVal_7);\n  }, function (_ck, _v) {\n    var currVal_0 = i1.ɵnov(_v, 13).ngClassUntouched;\n    var currVal_1 = i1.ɵnov(_v, 13).ngClassTouched;\n    var currVal_2 = i1.ɵnov(_v, 13).ngClassPristine;\n    var currVal_3 = i1.ɵnov(_v, 13).ngClassDirty;\n    var currVal_4 = i1.ɵnov(_v, 13).ngClassValid;\n    var currVal_5 = i1.ɵnov(_v, 13).ngClassInvalid;\n    var currVal_6 = i1.ɵnov(_v, 13).ngClassPending;\n\n    _ck(_v, 9, 0, currVal_0, currVal_1, currVal_2, currVal_3, currVal_4, currVal_5, currVal_6);\n\n    var currVal_8 = !i1.ɵnov(_v, 11).form.valid;\n\n    _ck(_v, 19, 0, currVal_8);\n  });\n}\nexport function View_ModalNewGameComponent_Host_0(_l) {\n  return i1.ɵvid(0, [(_l()(), i1.ɵeld(0, 0, null, null, 1, \"modal-new-game\", [], null, null, null, View_ModalNewGameComponent_0, RenderType_ModalNewGameComponent)), i1.ɵdid(1, 49152, null, 0, i8.ModalNewGameComponent, [i9.GameService, i1.NgZone], null, null)], null, null);\n}\nvar ModalNewGameComponentNgFactory = i1.ɵccf(\"modal-new-game\", i8.ModalNewGameComponent, View_ModalNewGameComponent_Host_0, {}, {}, []);\nexport { ModalNewGameComponentNgFactory };","/**\n * @fileoverview This file was generated by the Angular template compiler. Do not edit.\n *\n * @suppress {suspiciousCode,uselessCode,missingProperties,missingOverride,checkTypes}\n * tslint:disable\n */\nvar styles = [\"\"];\nexport { styles };","<div bsModal #newGameModal=\"bs-modal\" class=\"modal fade\" tabindex=\"-1\" role=\"dialog\" aria-hidden=\"true\"> <div class=\"modal-dialog modal-lg\"> <div class=\"modal-content\"> <modal-header (closeClick)=\"newGameModal.hide()\"> New Game </modal-header> <div class=\"modal-body\"> <form (ngSubmit)=\"newGame()\" class=\"clearfix\" #newGameForm=\"ngForm\" autocomplete=\"off\"> <fieldset class=\"form-group\"> <legend>Rule Set</legend> <div class=\"form-check-inline\" *ngFor=\"let rs of ruleSets\"> <label class=\"form-check-label\"> <input type=\"radio\" class=\"form-check-input\" name=\"ruleSet\" [value]=\"rs.ruleSet\" [(ngModel)]=\"ruleSet\" required=\"required\"> {{rs.name}} </label> </div> </fieldset> <button class=\"btn float-right\" [disabled]=\"!newGameForm.form.valid\"> Start </button> </form> </div> </div> </div> </div> ","import { rulesStandard } from 'src/rule-sets';\r\n\r\nimport { combineLatest, SchedulerLike, Subject } from 'rxjs';\r\n\r\nimport { Component, Inject, OnInit, ViewChild, OnDestroy } from '@angular/core';\r\n\r\nimport { GameService } from './game.service';\r\nimport { RoomService } from './room.service';\r\nimport { ZoneScheduler } from 'ngx-zone-scheduler';\r\nimport { observeOn, takeUntil } from 'rxjs/operators';\r\nimport { ModalNewGameComponent } from './modal/new-game.component';\r\nimport { Board } from 'src/board';\r\nimport { colors } from 'data/colors.yaml';\r\n\r\nconst rules = rulesStandard;\r\n\r\n@Component( {\r\n\tselector: 'game',\r\n\ttemplateUrl: './game.component.html',\r\n\tstyleUrls: [ './game.component.scss' ]\r\n} )\r\nexport class GameComponent implements OnInit, OnDestroy {\r\n\tconstructor(\r\n\t\tprivate readonly gameService: GameService,\r\n\t\tprivate readonly roomService: RoomService,\r\n\t\t@Inject(ZoneScheduler)\r\n\t\tprivate readonly scheduler: SchedulerLike\r\n\t) {}\r\n\r\n\t@ViewChild( 'newGameModal' )\r\n\tpublic newGameModal: ModalNewGameComponent;\r\n\r\n\tpublic ngOnInit() {\r\n\t\tconst { gameService, roomService, destroyed, scheduler } = this;\r\n\t\tconst currentRoom = roomService.getCurrentRoom();\r\n\t\tcurrentRoom.subscribe( room => {\r\n\t\t\tthis.room = room || null;\r\n\t\t} );\r\n\t\tcombineLatest( gameService.getGames(), currentRoom,\r\n\t\t\t( games, room ) => room\r\n\t\t\t? games.filter( game => game.gameId === room.gameId )[ 0 ] || null\r\n\t\t\t: null\r\n\t\t)\r\n\t\t.pipe(\r\n\t\t\ttakeUntil( destroyed ),\r\n\t\t\tobserveOn( scheduler )\r\n\t\t)\r\n\t\t.subscribe( game => {\r\n\t\t\tthis.game = game;\r\n\t\t\tif( game ) {\r\n\t\t\t\tconst gameState = this.gameState = game.gameStates.slice( -1 )[ 0 ];\r\n\t\t\t\tthis.board = Board.fromGame( game, gameState );\r\n\t\t\t\tthis.lastMove = gameState.lastMove;\r\n\t\t\t\tif( gameState.turn == null ) this.turn = null;\r\n\t\t\t\telse this.turn = colors[ game.colors[ gameState.turn ] ].displayName;\r\n\t\t\t} else {\r\n\t\t\t\tthis.gameState = null;\r\n\t\t\t\tthis.board = null;\r\n\t\t\t\tthis.lastMove = null;\r\n\t\t\t\tthis.turn = null;\r\n\t\t\t}\r\n\t\t} );\r\n\t}\r\n\r\n\tpublic ngOnDestroy() {\r\n\t\tthis.destroyed.next( true );\r\n\t\tthis.destroyed.complete();\r\n\t}\r\n\r\n\tpublic turn = null as string|null;\r\n\tpublic room = null as Room|null;\r\n\tpublic game = null as Game|null;\r\n\tpublic gameState = null as GameState|null;\r\n\tpublic lastMove = null as Point|null;\r\n\tpublic board = new Board;\r\n\tpublic rules = null as Rules|null;\r\n\r\n\tprivate readonly destroyed = new Subject<true>();\r\n\r\n\tpublic onMouseMove( { square }: BoardMouseEvent ) {\r\n\t\tif( !square ) return;\r\n\t\tconst { game, gameState } = this;\r\n\r\n\t\tdocument.documentElement.style.cursor =\r\n\t\t\t( rules.isGameOver( game, gameState )\r\n\t\t||\trules.isValid( game, gameState, square.position, gameState.turn ) )\r\n\t\t?   'pointer'\r\n\t\t\t: null;\r\n\t}\r\n\r\n\tpublic onClick( { square }: BoardMouseEvent ) {\r\n\t\tif( !square ) return;\r\n\t\tconst { room, game, gameState, gameService, newGameModal } = this;\r\n\t\tif( rules.isGameOver( game, gameState ) ) {\r\n\t\t\tnewGameModal.show( room );\r\n\t\t} else {\r\n\t\t\tgameService.makeMove( room.roomId, square.position );\r\n\t\t}\r\n\t}\r\n}\r\n","/**\n * @fileoverview This file was generated by the Angular template compiler. Do not edit.\n *\n * @suppress {suspiciousCode,uselessCode,missingProperties,missingOverride,checkTypes}\n * tslint:disable\n */\nimport * as i0 from \"./game.component.scss.shim.ngstyle\";\nimport * as i1 from \"@angular/core\";\nimport * as i2 from \"./board.component.ngfactory\";\nimport * as i3 from \"./board.component\";\nimport * as i4 from \"@angular/common\";\nimport * as i5 from \"./modal/new-game.component.ngfactory\";\nimport * as i6 from \"./modal/new-game.component\";\nimport * as i7 from \"./game.service\";\nimport * as i8 from \"./game.component\";\nimport * as i9 from \"./room.service\";\nimport * as i10 from \"ngx-zone-scheduler/dist/zone-scheduler\";\nvar styles_GameComponent = [i0.styles];\nvar RenderType_GameComponent = i1.ɵcrt({\n  encapsulation: 0,\n  styles: styles_GameComponent,\n  data: {}\n});\nexport { RenderType_GameComponent };\n\nfunction View_GameComponent_2(_l) {\n  return i1.ɵvid(0, [(_l()(), i1.ɵeld(0, 0, null, null, 1, \"div\", [[\"class\", \"card-body\"]], null, null, null, null, null)), (_l()(), i1.ɵted(-1, null, [\" Game Over \"]))], null, null);\n}\n\nfunction View_GameComponent_3(_l) {\n  return i1.ɵvid(0, [(_l()(), i1.ɵeld(0, 0, null, null, 1, \"div\", [[\"class\", \"card-body\"]], null, null, null, null, null)), (_l()(), i1.ɵted(1, null, [\" \", \"\\u2019s Turn \"]))], null, function (_ck, _v) {\n    var _co = _v.component;\n    var currVal_0 = _co.turn;\n\n    _ck(_v, 1, 0, currVal_0);\n  });\n}\n\nfunction View_GameComponent_1(_l) {\n  return i1.ɵvid(0, [(_l()(), i1.ɵeld(0, 0, null, null, 9, \"div\", [[\"class\", \"row\"]], null, null, null, null, null)), (_l()(), i1.ɵeld(1, 0, null, null, 2, \"div\", [[\"class\", \"col-12\"]], null, null, null, null, null)), (_l()(), i1.ɵeld(2, 0, null, null, 1, \"board\", [], null, [[null, \"click\"], [null, \"mousemove\"]], function (_v, en, $event) {\n    var ad = true;\n    var _co = _v.component;\n\n    if (\"click\" === en) {\n      var pd_0 = _co.onClick($event) !== false;\n      ad = pd_0 && ad;\n    }\n\n    if (\"mousemove\" === en) {\n      var pd_1 = _co.onMouseMove($event) !== false;\n      ad = pd_1 && ad;\n    }\n\n    return ad;\n  }, i2.View_BoardComponent_0, i2.RenderType_BoardComponent)), i1.ɵdid(3, 4964352, null, 0, i3.BoardComponent, [], {\n    board: [0, \"board\"],\n    lastMove: [1, \"lastMove\"]\n  }, {\n    click: \"click\",\n    mousemove: \"mousemove\"\n  }), (_l()(), i1.ɵeld(4, 0, null, null, 5, \"div\", [[\"class\", \"col-12\"]], null, null, null, null, null)), (_l()(), i1.ɵeld(5, 0, null, null, 4, \"div\", [[\"class\", \"card\"]], null, null, null, null, null)), (_l()(), i1.ɵand(16777216, null, null, 1, null, View_GameComponent_2)), i1.ɵdid(7, 16384, null, 0, i4.NgIf, [i1.ViewContainerRef, i1.TemplateRef], {\n    ngIf: [0, \"ngIf\"]\n  }, null), (_l()(), i1.ɵand(16777216, null, null, 1, null, View_GameComponent_3)), i1.ɵdid(9, 16384, null, 0, i4.NgIf, [i1.ViewContainerRef, i1.TemplateRef], {\n    ngIf: [0, \"ngIf\"]\n  }, null)], function (_ck, _v) {\n    var _co = _v.component;\n    var currVal_0 = _co.board;\n    var currVal_1 = _co.lastMove;\n\n    _ck(_v, 3, 0, currVal_0, currVal_1);\n\n    var currVal_2 = _co.turn == null;\n\n    _ck(_v, 7, 0, currVal_2);\n\n    var currVal_3 = _co.turn != null;\n\n    _ck(_v, 9, 0, currVal_3);\n  }, null);\n}\n\nexport function View_GameComponent_0(_l) {\n  return i1.ɵvid(0, [i1.ɵqud(402653184, 1, {\n    newGameModal: 0\n  }), (_l()(), i1.ɵand(16777216, null, null, 1, null, View_GameComponent_1)), i1.ɵdid(2, 16384, null, 0, i4.NgIf, [i1.ViewContainerRef, i1.TemplateRef], {\n    ngIf: [0, \"ngIf\"]\n  }, null), (_l()(), i1.ɵeld(3, 0, null, null, 1, \"modal-new-game\", [], null, null, null, i5.View_ModalNewGameComponent_0, i5.RenderType_ModalNewGameComponent)), i1.ɵdid(4, 49152, [[1, 4], [\"newGameModal\", 4]], 0, i6.ModalNewGameComponent, [i7.GameService, i1.NgZone], null, null)], function (_ck, _v) {\n    var _co = _v.component;\n    var currVal_0 = _co.game;\n\n    _ck(_v, 2, 0, currVal_0);\n  }, null);\n}\nexport function View_GameComponent_Host_0(_l) {\n  return i1.ɵvid(0, [(_l()(), i1.ɵeld(0, 0, null, null, 1, \"game\", [], null, null, null, View_GameComponent_0, RenderType_GameComponent)), i1.ɵdid(1, 245760, null, 0, i8.GameComponent, [i7.GameService, i9.RoomService, i10.ZoneScheduler], null, null)], function (_ck, _v) {\n    _ck(_v, 1, 0);\n  }, null);\n}\nvar GameComponentNgFactory = i1.ɵccf(\"game\", i8.GameComponent, View_GameComponent_Host_0, {}, {}, []);\nexport { GameComponentNgFactory };","/**\n * @fileoverview This file was generated by the Angular template compiler. Do not edit.\n *\n * @suppress {suspiciousCode,uselessCode,missingProperties,missingOverride,checkTypes}\n * tslint:disable\n */\nvar styles = [\"canvas[_ngcontent-%COMP%] { max-width: 100%; }\"];\nexport { styles };","<div class=\"row\" *ngIf=\"game\"> <div class=\"col-12\"> <board [board]=\"board\" [lastMove]=\"lastMove\" (click)=\"onClick($event)\" (mousemove)=\"onMouseMove($event)\"></board> </div> <div class=\"col-12\"> <div class=\"card\"> <div class=\"card-body\" *ngIf=\"turn == null\"> Game Over </div> <div class=\"card-body\" *ngIf=\"turn != null\"> {{turn}}’s Turn </div> </div> </div> </div> <modal-new-game #newGameModal></modal-new-game> ","import { combineLatest } from 'rxjs';\r\nimport { Component } from '@angular/core';\r\nimport { RoomService } from './room.service';\r\n\r\n@Component( {\r\n\tselector: 'chat',\r\n\ttemplateUrl: './chat.component.html',\r\n\tstyleUrls: [ './chat.component.scss' ]\r\n} )\r\nexport class ChatComponent {\r\n\tconstructor(\r\n\t\tprivate readonly roomService: RoomService\r\n\t) {}\r\n\r\n\tprotected ngOnInit() {\r\n\t\tconst { roomService } = this,\r\n\t\t\tcurrentRoom = roomService.getCurrentRoom(),\r\n\t\t\tallMessages = roomService.getMessages();\r\n\t\tcurrentRoom.subscribe( room => {\r\n\t\t\tthis.room = room;\r\n\t\t} );\r\n\t\tcombineLatest( currentRoom, allMessages, ( room, messages ) => {\r\n\t\t\tif( room ) {\r\n\t\t\t\treturn messages.filter( message => message.roomId === room.roomId );\r\n\t\t\t} else {\r\n\t\t\t\treturn [];\r\n\t\t\t}\r\n\t\t} ).subscribe( messages => {\r\n\t\t\tthis.messages = messages;\r\n\t\t} );\r\n\t}\r\n\r\n\tpublic room: Room|null;\r\n\r\n\tpublic messages = [] as Message[];\r\n\r\n\tpublic text = '';\r\n\r\n\tpublic async sendMessage() {\r\n\t\tconst { roomService, room, text: message } = this;\r\n\t\tif( !room || !message ) { return; }\r\n\t\tthis.text = '';\r\n\t\tawait roomService.sendMessage( room.roomId, message );\r\n\t}\r\n}\r\n","/**\n * @fileoverview This file was generated by the Angular template compiler. Do not edit.\n *\n * @suppress {suspiciousCode,uselessCode,missingProperties,missingOverride,checkTypes}\n * tslint:disable\n */\nimport * as i0 from \"./chat.component.scss.shim.ngstyle\";\nimport * as i1 from \"@angular/core\";\nimport * as i2 from \"@angular/common\";\nimport * as i3 from \"@angular/forms\";\nimport * as i4 from \"../../node_modules/@fortawesome/angular-fontawesome/angular-fontawesome.ngfactory\";\nimport * as i5 from \"@fortawesome/angular-fontawesome\";\nimport * as i6 from \"@angular/platform-browser\";\nimport * as i7 from \"ngx-auto-scroll\";\nimport * as i8 from \"./chat.component\";\nimport * as i9 from \"./room.service\";\nvar styles_ChatComponent = [i0.styles];\nvar RenderType_ChatComponent = i1.ɵcrt({\n  encapsulation: 0,\n  styles: styles_ChatComponent,\n  data: {}\n});\nexport { RenderType_ChatComponent };\n\nfunction View_ChatComponent_2(_l) {\n  return i1.ɵvid(0, [(_l()(), i1.ɵeld(0, 0, null, null, 1, \"h4\", [[\"class\", \"list-group-item-heading text-muted\"]], null, null, null, null, null)), (_l()(), i1.ɵted(1, null, [\"\", \"\"]))], null, function (_ck, _v) {\n    var currVal_0 = _v.parent.context.$implicit.user;\n\n    _ck(_v, 1, 0, currVal_0);\n  });\n}\n\nfunction View_ChatComponent_1(_l) {\n  return i1.ɵvid(0, [(_l()(), i1.ɵeld(0, 0, null, null, 4, \"div\", [[\"class\", \"list-group-item\"]], null, null, null, null, null)), (_l()(), i1.ɵand(16777216, null, null, 1, null, View_ChatComponent_2)), i1.ɵdid(2, 16384, null, 0, i2.NgIf, [i1.ViewContainerRef, i1.TemplateRef], {\n    ngIf: [0, \"ngIf\"]\n  }, null), (_l()(), i1.ɵeld(3, 0, null, null, 1, \"p\", [[\"class\", \"list-group-item-text mb-0\"]], null, null, null, null, null)), (_l()(), i1.ɵted(4, null, [\"\", \"\"]))], function (_ck, _v) {\n    var currVal_0 = _v.context.$implicit.user;\n\n    _ck(_v, 2, 0, currVal_0);\n  }, function (_ck, _v) {\n    var currVal_1 = _v.context.$implicit.message;\n\n    _ck(_v, 4, 0, currVal_1);\n  });\n}\n\nexport function View_ChatComponent_0(_l) {\n  return i1.ɵvid(0, [(_l()(), i1.ɵeld(0, 0, null, null, 26, \"div\", [[\"class\", \"row\"]], null, null, null, null, null)), (_l()(), i1.ɵeld(1, 0, null, null, 20, \"div\", [[\"class\", \"col-12\"]], null, null, null, null, null)), (_l()(), i1.ɵeld(2, 0, null, null, 19, \"form\", [[\"autocomplete\", \"off\"], [\"novalidate\", \"\"]], [[2, \"ng-untouched\", null], [2, \"ng-touched\", null], [2, \"ng-pristine\", null], [2, \"ng-dirty\", null], [2, \"ng-valid\", null], [2, \"ng-invalid\", null], [2, \"ng-pending\", null]], [[null, \"ngSubmit\"], [null, \"submit\"], [null, \"reset\"]], function (_v, en, $event) {\n    var ad = true;\n    var _co = _v.component;\n\n    if (\"submit\" === en) {\n      var pd_0 = i1.ɵnov(_v, 4).onSubmit($event) !== false;\n      ad = pd_0 && ad;\n    }\n\n    if (\"reset\" === en) {\n      var pd_1 = i1.ɵnov(_v, 4).onReset() !== false;\n      ad = pd_1 && ad;\n    }\n\n    if (\"ngSubmit\" === en) {\n      var pd_2 = _co.sendMessage() !== false;\n      ad = pd_2 && ad;\n    }\n\n    return ad;\n  }, null, null)), i1.ɵdid(3, 16384, null, 0, i3.ɵangular_packages_forms_forms_bg, [], null, null), i1.ɵdid(4, 4210688, [[\"messageForm\", 4]], 0, i3.NgForm, [[8, null], [8, null]], null, {\n    ngSubmit: \"ngSubmit\"\n  }), i1.ɵprd(2048, null, i3.ControlContainer, null, [i3.NgForm]), i1.ɵdid(6, 16384, null, 0, i3.NgControlStatusGroup, [[4, i3.ControlContainer]], null, null), (_l()(), i1.ɵeld(7, 0, null, null, 14, \"div\", [[\"class\", \"form-group\"]], null, null, null, null, null)), (_l()(), i1.ɵeld(8, 0, null, null, 13, \"div\", [[\"class\", \"input-group\"]], null, null, null, null, null)), (_l()(), i1.ɵeld(9, 0, null, null, 7, \"input\", [[\"autocomplete\", \"off\"], [\"class\", \"form-control\"], [\"name\", \"text\"], [\"placeholder\", \"Enter message\"], [\"required\", \"required\"], [\"type\", \"text\"]], [[1, \"required\", 0], [2, \"ng-untouched\", null], [2, \"ng-touched\", null], [2, \"ng-pristine\", null], [2, \"ng-dirty\", null], [2, \"ng-valid\", null], [2, \"ng-invalid\", null], [2, \"ng-pending\", null]], [[null, \"ngModelChange\"], [null, \"input\"], [null, \"blur\"], [null, \"compositionstart\"], [null, \"compositionend\"]], function (_v, en, $event) {\n    var ad = true;\n    var _co = _v.component;\n\n    if (\"input\" === en) {\n      var pd_0 = i1.ɵnov(_v, 10)._handleInput($event.target.value) !== false;\n      ad = pd_0 && ad;\n    }\n\n    if (\"blur\" === en) {\n      var pd_1 = i1.ɵnov(_v, 10).onTouched() !== false;\n      ad = pd_1 && ad;\n    }\n\n    if (\"compositionstart\" === en) {\n      var pd_2 = i1.ɵnov(_v, 10)._compositionStart() !== false;\n      ad = pd_2 && ad;\n    }\n\n    if (\"compositionend\" === en) {\n      var pd_3 = i1.ɵnov(_v, 10)._compositionEnd($event.target.value) !== false;\n      ad = pd_3 && ad;\n    }\n\n    if (\"ngModelChange\" === en) {\n      var pd_4 = (_co.text = $event) !== false;\n      ad = pd_4 && ad;\n    }\n\n    return ad;\n  }, null, null)), i1.ɵdid(10, 16384, null, 0, i3.DefaultValueAccessor, [i1.Renderer2, i1.ElementRef, [2, i3.COMPOSITION_BUFFER_MODE]], null, null), i1.ɵdid(11, 16384, null, 0, i3.RequiredValidator, [], {\n    required: [0, \"required\"]\n  }, null), i1.ɵprd(1024, null, i3.NG_VALIDATORS, function (p0_0) {\n    return [p0_0];\n  }, [i3.RequiredValidator]), i1.ɵprd(1024, null, i3.NG_VALUE_ACCESSOR, function (p0_0) {\n    return [p0_0];\n  }, [i3.DefaultValueAccessor]), i1.ɵdid(14, 671744, null, 0, i3.NgModel, [[2, i3.ControlContainer], [6, i3.NG_VALIDATORS], [8, null], [6, i3.NG_VALUE_ACCESSOR]], {\n    name: [0, \"name\"],\n    model: [1, \"model\"]\n  }, {\n    update: \"ngModelChange\"\n  }), i1.ɵprd(2048, null, i3.NgControl, null, [i3.NgModel]), i1.ɵdid(16, 16384, null, 0, i3.NgControlStatus, [[4, i3.NgControl]], null, null), (_l()(), i1.ɵeld(17, 0, null, null, 4, \"div\", [[\"class\", \"input-group-append\"]], null, null, null, null, null)), (_l()(), i1.ɵeld(18, 0, null, null, 3, \"button\", [], [[8, \"disabled\", 0]], null, null, null, null)), (_l()(), i1.ɵeld(19, 0, null, null, 2, \"fa-icon\", [[\"class\", \"ng-fa-icon\"]], [[8, \"innerHTML\", 1]], null, null, i4.View_FaIconComponent_0, i4.RenderType_FaIconComponent)), i1.ɵdid(20, 573440, null, 0, i5.FaIconComponent, [i6.DomSanitizer], {\n    iconProp: [0, \"iconProp\"]\n  }, null), i1.ɵpad(21, 2), (_l()(), i1.ɵeld(22, 0, null, null, 4, \"div\", [[\"class\", \"col-12\"]], null, null, null, null, null)), (_l()(), i1.ɵeld(23, 0, null, null, 3, \"div\", [[\"class\", \"list-group\"], [\"ngx-auto-scroll\", \"\"]], null, [[null, \"scroll\"]], function (_v, en, $event) {\n    var ad = true;\n\n    if (\"scroll\" === en) {\n      var pd_0 = i1.ɵnov(_v, 24).scrollHandler() !== false;\n      ad = pd_0 && ad;\n    }\n\n    return ad;\n  }, null, null)), i1.ɵdid(24, 1196032, null, 0, i7.NgxAutoScroll, [i1.ElementRef], null, null), (_l()(), i1.ɵand(16777216, null, null, 1, null, View_ChatComponent_1)), i1.ɵdid(26, 802816, null, 0, i2.NgForOf, [i1.ViewContainerRef, i1.TemplateRef, i1.IterableDiffers], {\n    ngForOf: [0, \"ngForOf\"]\n  }, null)], function (_ck, _v) {\n    var _co = _v.component;\n    var currVal_15 = \"required\";\n\n    _ck(_v, 11, 0, currVal_15);\n\n    var currVal_16 = \"text\";\n    var currVal_17 = _co.text;\n\n    _ck(_v, 14, 0, currVal_16, currVal_17);\n\n    var currVal_20 = _ck(_v, 21, 0, \"far\", \"comment\");\n\n    _ck(_v, 20, 0, currVal_20);\n\n    var currVal_21 = _co.messages;\n\n    _ck(_v, 26, 0, currVal_21);\n  }, function (_ck, _v) {\n    var currVal_0 = i1.ɵnov(_v, 6).ngClassUntouched;\n    var currVal_1 = i1.ɵnov(_v, 6).ngClassTouched;\n    var currVal_2 = i1.ɵnov(_v, 6).ngClassPristine;\n    var currVal_3 = i1.ɵnov(_v, 6).ngClassDirty;\n    var currVal_4 = i1.ɵnov(_v, 6).ngClassValid;\n    var currVal_5 = i1.ɵnov(_v, 6).ngClassInvalid;\n    var currVal_6 = i1.ɵnov(_v, 6).ngClassPending;\n\n    _ck(_v, 2, 0, currVal_0, currVal_1, currVal_2, currVal_3, currVal_4, currVal_5, currVal_6);\n\n    var currVal_7 = i1.ɵnov(_v, 11).required ? \"\" : null;\n    var currVal_8 = i1.ɵnov(_v, 16).ngClassUntouched;\n    var currVal_9 = i1.ɵnov(_v, 16).ngClassTouched;\n    var currVal_10 = i1.ɵnov(_v, 16).ngClassPristine;\n    var currVal_11 = i1.ɵnov(_v, 16).ngClassDirty;\n    var currVal_12 = i1.ɵnov(_v, 16).ngClassValid;\n    var currVal_13 = i1.ɵnov(_v, 16).ngClassInvalid;\n    var currVal_14 = i1.ɵnov(_v, 16).ngClassPending;\n\n    _ck(_v, 9, 0, currVal_7, currVal_8, currVal_9, currVal_10, currVal_11, currVal_12, currVal_13, currVal_14);\n\n    var currVal_18 = !i1.ɵnov(_v, 4).form.valid;\n\n    _ck(_v, 18, 0, currVal_18);\n\n    var currVal_19 = i1.ɵnov(_v, 20).renderedIconHTML;\n\n    _ck(_v, 19, 0, currVal_19);\n  });\n}\nexport function View_ChatComponent_Host_0(_l) {\n  return i1.ɵvid(0, [(_l()(), i1.ɵeld(0, 0, null, null, 1, \"chat\", [], null, null, null, View_ChatComponent_0, RenderType_ChatComponent)), i1.ɵdid(1, 114688, null, 0, i8.ChatComponent, [i9.RoomService], null, null)], function (_ck, _v) {\n    _ck(_v, 1, 0);\n  }, null);\n}\nvar ChatComponentNgFactory = i1.ɵccf(\"chat\", i8.ChatComponent, View_ChatComponent_Host_0, {}, {}, []);\nexport { ChatComponentNgFactory };","/**\n * @fileoverview This file was generated by the Angular template compiler. Do not edit.\n *\n * @suppress {suspiciousCode,uselessCode,missingProperties,missingOverride,checkTypes}\n * tslint:disable\n */\nvar styles = [\".list-group[_ngcontent-%COMP%] { height: 50vh; overflow-y: auto; }\\n\\n.list-group[_ngcontent-%COMP%]   .list-group-item-text[_ngcontent-%COMP%] { white-space: pre-wrap; }\"];\nexport { styles };","<div class=\"row\"> <div class=\"col-12\"> <form (ngSubmit)=\"sendMessage()\" #messageForm=\"ngForm\" autocomplete=\"off\"> <div class=\"form-group\"> <div class=\"input-group\"> <input type=\"text\" class=\"form-control\" required=\"required\" placeholder=\"Enter message\" [(ngModel)]=\"text\" name=\"text\" autocomplete=\"off\"/> <div class=\"input-group-append\"> <button [disabled]=\"!messageForm.form.valid\"> <fa-icon [icon]=\"[ 'far', 'comment' ]\"></fa-icon> </button> </div> </div> </div> </form> </div> <div class=\"col-12\"> <div class=\"list-group\" ngx-auto-scroll> <div class=\"list-group-item\" *ngFor=\"let message of messages\"> <h4 class=\"list-group-item-heading text-muted\" *ngIf=\"message.user\">{{message.user}}</h4> <p class=\"list-group-item-text mb-0\">{{message.message}}</p> </div> </div> </div> </div> ","export class RoomComponent {}","/**\n * @fileoverview This file was generated by the Angular template compiler. Do not edit.\n *\n * @suppress {suspiciousCode,uselessCode,missingProperties,missingOverride,checkTypes}\n * tslint:disable\n */\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"./game.component.ngfactory\";\nimport * as i2 from \"./game.component\";\nimport * as i3 from \"./game.service\";\nimport * as i4 from \"./room.service\";\nimport * as i5 from \"ngx-zone-scheduler/dist/zone-scheduler\";\nimport * as i6 from \"./chat.component.ngfactory\";\nimport * as i7 from \"./chat.component\";\nimport * as i8 from \"./room.component\";\nvar styles_RoomComponent = [];\nvar RenderType_RoomComponent = i0.ɵcrt({\n  encapsulation: 2,\n  styles: styles_RoomComponent,\n  data: {}\n});\nexport { RenderType_RoomComponent };\nexport function View_RoomComponent_0(_l) {\n  return i0.ɵvid(0, [(_l()(), i0.ɵeld(0, 0, null, null, 4, \"div\", [[\"class\", \"row\"]], null, null, null, null, null)), (_l()(), i0.ɵeld(1, 0, null, null, 1, \"game\", [[\"class\", \"col-lg-5 col-sm-6 col-12\"]], null, null, null, i1.View_GameComponent_0, i1.RenderType_GameComponent)), i0.ɵdid(2, 245760, null, 0, i2.GameComponent, [i3.GameService, i4.RoomService, i5.ZoneScheduler], null, null), (_l()(), i0.ɵeld(3, 0, null, null, 1, \"chat\", [[\"class\", \"col-lg-7 col-sm-6 col-12\"]], null, null, null, i6.View_ChatComponent_0, i6.RenderType_ChatComponent)), i0.ɵdid(4, 114688, null, 0, i7.ChatComponent, [i4.RoomService], null, null)], function (_ck, _v) {\n    _ck(_v, 2, 0);\n\n    _ck(_v, 4, 0);\n  }, null);\n}\nexport function View_RoomComponent_Host_0(_l) {\n  return i0.ɵvid(0, [(_l()(), i0.ɵeld(0, 0, null, null, 1, \"room\", [], null, null, null, View_RoomComponent_0, RenderType_RoomComponent)), i0.ɵdid(1, 49152, null, 0, i8.RoomComponent, [], null, null)], null, null);\n}\nvar RoomComponentNgFactory = i0.ɵccf(\"room\", i8.RoomComponent, View_RoomComponent_Host_0, {}, {}, []);\nexport { RoomComponentNgFactory };","<div class=\"row\"> <game class=\"col-lg-5 col-sm-6 col-12\"></game> <chat class=\"col-lg-7 col-sm-6 col-12\"></chat> </div> ","import { Component, OnInit, OnDestroy } from '@angular/core';\r\nimport { Subject } from 'rxjs';\r\nimport { takeUntil } from 'rxjs/operators';\r\nimport { RoomService } from './room.service';\r\n\r\n\r\n@Component( {\r\n\tselector: 'navigation',\r\n\ttemplateUrl: './navigation.component.html',\r\n\tstyleUrls: [ './navigation.component.scss' ]\r\n} )\r\nexport class NavigationComponent implements OnInit, OnDestroy {\r\n\tpublic constructor(\r\n\t\tprivate readonly roomService: RoomService\r\n\t) {}\r\n\r\n\tpublic ngOnInit() {\r\n\t\tconst { destroyed, roomService } = this;\r\n\t\troomService.getJoinedRooms()\r\n\t\t.pipe( takeUntil( destroyed ) )\r\n\t\t.subscribe( rooms => {\r\n\t\t\tthis.rooms = rooms;\r\n\t\t} );\r\n\r\n\t\troomService.getCurrentRoom()\r\n\t\t.pipe( takeUntil( destroyed ) )\r\n\t\t.subscribe( room => {\r\n\t\t\tthis.currentRoom = room;\r\n\t\t} );\r\n\t}\r\n\r\n\tpublic ngOnDestroy() {\r\n\t\tthis.destroyed.next( true );\r\n\t\tthis.destroyed.complete();\r\n\t}\r\n\r\n\tpublic rooms = [] as Room[];\r\n\r\n\tpublic currentRoom = null as Room|null;\r\n\r\n\tpublic async setRoom( room: Room|null ) {\r\n\t\tconst { roomService } = this;\r\n\t\tawait roomService.setRoom( room );\r\n\t}\r\n\r\n\tpublic async leaveRoom( { roomId }: Room ) {\r\n\t\tconst { roomService } = this;\r\n\t\tawait roomService.leaveRoom( roomId );\r\n\t}\r\n\r\n\tprivate readonly destroyed = new Subject<true>();\r\n}\r\n","/**\n * @fileoverview This file was generated by the Angular template compiler. Do not edit.\n *\n * @suppress {suspiciousCode,uselessCode,missingProperties,missingOverride,checkTypes}\n * tslint:disable\n */\nimport * as i0 from \"./navigation.component.scss.shim.ngstyle\";\nimport * as i1 from \"@angular/core\";\nimport * as i2 from \"../../node_modules/@fortawesome/angular-fontawesome/angular-fontawesome.ngfactory\";\nimport * as i3 from \"@fortawesome/angular-fontawesome\";\nimport * as i4 from \"@angular/platform-browser\";\nimport * as i5 from \"@angular/common\";\nimport * as i6 from \"./navigation.component\";\nimport * as i7 from \"./room.service\";\nvar styles_NavigationComponent = [i0.styles];\nvar RenderType_NavigationComponent = i1.ɵcrt({\n  encapsulation: 0,\n  styles: styles_NavigationComponent,\n  data: {}\n});\nexport { RenderType_NavigationComponent };\n\nfunction View_NavigationComponent_1(_l) {\n  return i1.ɵvid(0, [(_l()(), i1.ɵeld(0, 0, null, null, 6, \"li\", [[\"class\", \"nav-item\"]], null, null, null, null, null)), (_l()(), i1.ɵeld(1, 0, null, null, 5, \"a\", [[\"class\", \"nav-link\"], [\"href\", \"javascript:\"]], [[2, \"active\", null]], [[null, \"click\"]], function (_v, en, $event) {\n    var ad = true;\n    var _co = _v.component;\n\n    if (\"click\" === en) {\n      var pd_0 = _co.setRoom(_v.context.$implicit) !== false;\n      ad = pd_0 && ad;\n    }\n\n    return ad;\n  }, null, null)), (_l()(), i1.ɵeld(2, 0, null, null, 1, \"span\", [[\"class\", \"text-truncate\"]], null, null, null, null, null)), (_l()(), i1.ɵted(3, null, [\" \", \" \"])), (_l()(), i1.ɵeld(4, 0, null, null, 2, \"button\", [[\"class\", \"close ml-2\"]], null, [[null, \"click\"]], function (_v, en, $event) {\n    var ad = true;\n    var _co = _v.component;\n\n    if (\"click\" === en) {\n      var pd_0 = _co.leaveRoom(_v.context.$implicit) !== false;\n      ad = pd_0 && ad;\n    }\n\n    return ad;\n  }, null, null)), (_l()(), i1.ɵeld(5, 0, null, null, 1, \"fa-icon\", [[\"class\", \"ng-fa-icon\"], [\"icon\", \"times\"], [\"size\", \"xs\"], [\"transform\", \"up-2\"]], [[8, \"innerHTML\", 1]], null, null, i2.View_FaIconComponent_0, i2.RenderType_FaIconComponent)), i1.ɵdid(6, 573440, null, 0, i3.FaIconComponent, [i4.DomSanitizer], {\n    iconProp: [0, \"iconProp\"],\n    size: [1, \"size\"],\n    transform: [2, \"transform\"]\n  }, null)], function (_ck, _v) {\n    var currVal_3 = \"times\";\n    var currVal_4 = \"xs\";\n    var currVal_5 = \"up-2\";\n\n    _ck(_v, 6, 0, currVal_3, currVal_4, currVal_5);\n  }, function (_ck, _v) {\n    var _co = _v.component;\n    var currVal_0 = (_co.currentRoom == null ? null : _co.currentRoom.roomId) === _v.context.$implicit.roomId;\n\n    _ck(_v, 1, 0, currVal_0);\n\n    var currVal_1 = _v.context.$implicit.name;\n\n    _ck(_v, 3, 0, currVal_1);\n\n    var currVal_2 = i1.ɵnov(_v, 6).renderedIconHTML;\n\n    _ck(_v, 5, 0, currVal_2);\n  });\n}\n\nexport function View_NavigationComponent_0(_l) {\n  return i1.ɵvid(0, [(_l()(), i1.ɵeld(0, 0, null, null, 8, \"nav\", [[\"class\", \"navbar navbar-light bg-light justify-content-start pb-0\"]], null, null, null, null, null)), (_l()(), i1.ɵeld(1, 0, null, null, 1, \"h1\", [[\"class\", \"navbar-brand py-0\"]], null, null, null, null, null)), (_l()(), i1.ɵted(-1, null, [\"r\\u00B3\"])), (_l()(), i1.ɵeld(3, 0, null, null, 5, \"ul\", [[\"class\", \"nav nav-tabs border-bottom\"]], null, null, null, null, null)), (_l()(), i1.ɵeld(4, 0, null, null, 2, \"li\", [[\"class\", \"nav-item\"]], null, null, null, null, null)), (_l()(), i1.ɵeld(5, 0, null, null, 1, \"a\", [[\"class\", \"nav-link\"], [\"href\", \"javascript:\"]], [[2, \"active\", null]], [[null, \"click\"]], function (_v, en, $event) {\n    var ad = true;\n    var _co = _v.component;\n\n    if (\"click\" === en) {\n      var pd_0 = _co.setRoom(null) !== false;\n      ad = pd_0 && ad;\n    }\n\n    return ad;\n  }, null, null)), (_l()(), i1.ɵted(-1, null, [\"Lobby\"])), (_l()(), i1.ɵand(16777216, null, null, 1, null, View_NavigationComponent_1)), i1.ɵdid(8, 802816, null, 0, i5.NgForOf, [i1.ViewContainerRef, i1.TemplateRef, i1.IterableDiffers], {\n    ngForOf: [0, \"ngForOf\"]\n  }, null)], function (_ck, _v) {\n    var _co = _v.component;\n    var currVal_1 = _co.rooms;\n\n    _ck(_v, 8, 0, currVal_1);\n  }, function (_ck, _v) {\n    var _co = _v.component;\n    var currVal_0 = !_co.currentRoom;\n\n    _ck(_v, 5, 0, currVal_0);\n  });\n}\nexport function View_NavigationComponent_Host_0(_l) {\n  return i1.ɵvid(0, [(_l()(), i1.ɵeld(0, 0, null, null, 1, \"navigation\", [], null, null, null, View_NavigationComponent_0, RenderType_NavigationComponent)), i1.ɵdid(1, 245760, null, 0, i6.NavigationComponent, [i7.RoomService], null, null)], function (_ck, _v) {\n    _ck(_v, 1, 0);\n  }, null);\n}\nvar NavigationComponentNgFactory = i1.ɵccf(\"navigation\", i6.NavigationComponent, View_NavigationComponent_Host_0, {}, {}, []);\nexport { NavigationComponentNgFactory };","/**\n * @fileoverview This file was generated by the Angular template compiler. Do not edit.\n *\n * @suppress {suspiciousCode,uselessCode,missingProperties,missingOverride,checkTypes}\n * tslint:disable\n */\nvar styles = [\"nav[_ngcontent-%COMP%] { border-bottom: 1px solid #dee2e6; }\\n\\nnav[_ngcontent-%COMP%]   .nav-tabs[_ngcontent-%COMP%] { margin-bottom: -1px; }\\n\\nnav[_ngcontent-%COMP%]   .nav-tabs[_ngcontent-%COMP%]   .nav-link[_ngcontent-%COMP%] { overflow: hidden; height: 42px; }\\n\\nnav[_ngcontent-%COMP%]   .nav-tabs[_ngcontent-%COMP%]   .nav-link[_ngcontent-%COMP%]   .text-truncate[_ngcontent-%COMP%] { display: inline-block; max-width: 160px; }\"];\nexport { styles };","<nav class=\"navbar navbar-light bg-light justify-content-start pb-0\"> <h1 class=\"navbar-brand py-0\">r³</h1> <ul class=\"nav nav-tabs border-bottom\"> <li class=\"nav-item\"> <a class=\"nav-link\" href=\"javascript:\" (click)=\"setRoom(null)\" [class.active]=\"!currentRoom\">Lobby</a> </li> <li class=\"nav-item\" *ngFor=\"let room of rooms\"> <a class=\"nav-link\" href=\"javascript:\" (click)=\"setRoom(room)\" [class.active]=\"currentRoom?.roomId===room.roomId\"> <span class=\"text-truncate\"> {{room.name}} </span> <button class=\"close ml-2\" (click)=\"leaveRoom(room)\"> <fa-icon icon=\"times\" size=\"xs\" transform=\"up-2\"></fa-icon> </button> </a> </li> </ul> </nav> ","/**\n * @fileoverview This file was generated by the Angular template compiler. Do not edit.\n *\n * @suppress {suspiciousCode,uselessCode,missingProperties,missingOverride,checkTypes}\n * tslint:disable\n */\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"./lobby.component.ngfactory\";\nimport * as i2 from \"./lobby.component\";\nimport * as i3 from \"./room.service\";\nimport * as i4 from \"./room.component.ngfactory\";\nimport * as i5 from \"./room.component\";\nimport * as i6 from \"./navigation.component.ngfactory\";\nimport * as i7 from \"./navigation.component\";\nimport * as i8 from \"@angular/common\";\nimport * as i9 from \"../../node_modules/@fortawesome/angular-fontawesome/angular-fontawesome.ngfactory\";\nimport * as i10 from \"@fortawesome/angular-fontawesome\";\nimport * as i11 from \"@angular/platform-browser\";\nimport * as i12 from \"./r3.component\";\nimport * as i13 from \"./game.service\";\nvar styles_R3Component = [];\nvar RenderType_R3Component = i0.ɵcrt({\n  encapsulation: 2,\n  styles: styles_R3Component,\n  data: {}\n});\nexport { RenderType_R3Component };\n\nfunction View_R3Component_1(_l) {\n  return i0.ɵvid(0, [(_l()(), i0.ɵeld(0, 0, null, null, 1, \"lobby\", [], null, null, null, i1.View_LobbyComponent_0, i1.RenderType_LobbyComponent)), i0.ɵdid(1, 245760, null, 0, i2.LobbyComponent, [i3.RoomService], null, null)], function (_ck, _v) {\n    _ck(_v, 1, 0);\n  }, null);\n}\n\nfunction View_R3Component_2(_l) {\n  return i0.ɵvid(0, [(_l()(), i0.ɵeld(0, 0, null, null, 1, \"room\", [], null, null, null, i4.View_RoomComponent_0, i4.RenderType_RoomComponent)), i0.ɵdid(1, 49152, null, 0, i5.RoomComponent, [], null, null)], null, null);\n}\n\nexport function View_R3Component_0(_l) {\n  return i0.ɵvid(0, [(_l()(), i0.ɵeld(0, 0, null, null, 1, \"navigation\", [], null, null, null, i6.View_NavigationComponent_0, i6.RenderType_NavigationComponent)), i0.ɵdid(1, 245760, null, 0, i7.NavigationComponent, [i3.RoomService], null, null), (_l()(), i0.ɵeld(2, 0, null, null, 4, \"div\", [[\"class\", \"container my-2\"]], null, null, null, null, null)), (_l()(), i0.ɵand(16777216, null, null, 1, null, View_R3Component_1)), i0.ɵdid(4, 16384, null, 0, i8.NgIf, [i0.ViewContainerRef, i0.TemplateRef], {\n    ngIf: [0, \"ngIf\"]\n  }, null), (_l()(), i0.ɵand(16777216, null, null, 1, null, View_R3Component_2)), i0.ɵdid(6, 16384, null, 0, i8.NgIf, [i0.ViewContainerRef, i0.TemplateRef], {\n    ngIf: [0, \"ngIf\"]\n  }, null), (_l()(), i0.ɵeld(7, 0, null, null, 7, \"footer\", [[\"class\", \"container d-flex justify-content-end fixed-bottom my-2\"]], null, null, null, null, null)), (_l()(), i0.ɵeld(8, 0, null, null, 1, \"a\", [[\"class\", \"mx-4\"], [\"href\", \"https://jovalent.com\"], [\"target\", \"_blank\"]], null, null, null, null, null)), (_l()(), i0.ɵted(-1, null, [\"Jovalent.com\"])), (_l()(), i0.ɵeld(10, 0, null, null, 4, \"a\", [[\"class\", \"ml-4\"], [\"href\", \"https://twitter.com/JovalentStudios\"], [\"target\", \"_blank\"]], null, null, null, null, null)), (_l()(), i0.ɵeld(11, 0, null, null, 2, \"fa-icon\", [[\"class\", \"ng-fa-icon\"]], [[8, \"innerHTML\", 1]], null, null, i9.View_FaIconComponent_0, i9.RenderType_FaIconComponent)), i0.ɵdid(12, 573440, null, 0, i10.FaIconComponent, [i11.DomSanitizer], {\n    iconProp: [0, \"iconProp\"]\n  }, null), i0.ɵpad(13, 2), (_l()(), i0.ɵted(-1, null, [\" @JovalentStudios \"]))], function (_ck, _v) {\n    var _co = _v.component;\n\n    _ck(_v, 1, 0);\n\n    var currVal_0 = !_co.currentRoom;\n\n    _ck(_v, 4, 0, currVal_0);\n\n    var currVal_1 = _co.currentRoom;\n\n    _ck(_v, 6, 0, currVal_1);\n\n    var currVal_3 = _ck(_v, 13, 0, \"fab\", \"twitter\");\n\n    _ck(_v, 12, 0, currVal_3);\n  }, function (_ck, _v) {\n    var currVal_2 = i0.ɵnov(_v, 12).renderedIconHTML;\n\n    _ck(_v, 11, 0, currVal_2);\n  });\n}\nexport function View_R3Component_Host_0(_l) {\n  return i0.ɵvid(0, [(_l()(), i0.ɵeld(0, 0, null, null, 1, \"r3\", [], null, null, null, View_R3Component_0, RenderType_R3Component)), i0.ɵdid(1, 4440064, null, 0, i12.R3Component, [i13.GameService, i3.RoomService], null, null)], function (_ck, _v) {\n    _ck(_v, 1, 0);\n  }, null);\n}\nvar R3ComponentNgFactory = i0.ɵccf(\"r3\", i12.R3Component, View_R3Component_Host_0, {}, {}, []);\nexport { R3ComponentNgFactory };","<navigation></navigation> <div class=\"container my-2\"> <lobby *ngIf=\"!currentRoom\"></lobby> <room *ngIf=\"currentRoom\"></room> </div> <footer class=\"container d-flex justify-content-end fixed-bottom my-2\"> <a href=\"https://jovalent.com\" target=\"_blank\" class=\"mx-4\">Jovalent.com</a> <a href=\"https://twitter.com/JovalentStudios\" target=\"_blank\" class=\"ml-4\"> <fa-icon [icon]=\"[ 'fab', 'twitter' ]\"></fa-icon> @JovalentStudios </a> </footer> ","import { Subject, Observable, SchedulerLike, fromEvent, of } from 'rxjs';\r\nimport { observeOn, switchMap, takeUntil } from 'rxjs/operators';\r\nimport { ZoneScheduler } from 'ngx-zone-scheduler';\r\nimport { Inject, Injectable, OnDestroy } from '@angular/core';\r\nimport io from 'socket.io-client';\r\nimport { tapLog } from 'src/operators';\r\n\r\n@Injectable()\r\nexport class SessionService implements OnDestroy {\r\n\tconstructor(\r\n\t\t@Inject(ZoneScheduler)\r\n\t\tprivate readonly scheduler: SchedulerLike\r\n\t) {\r\n\t\tconst { destroyed } = this;\r\n\t\tconst socket = this.socket = io.connect( '/', { transports: [ 'websocket', 'polling' ], upgrade: false } );\r\n\r\n\t\tof( 'connect' )\r\n\t\t.pipe(\r\n\t\t\tswitchMap( e => fromEvent( socket, e ) ),\r\n\t\t\ttakeUntil( destroyed )\r\n\t\t)\r\n\t\t.subscribe( console.log.bind( console ) );\r\n\r\n\t\tof( 'error', 'connect_error', 'reconnect_error' )\r\n\t\t.pipe(\r\n\t\t\tswitchMap( e => fromEvent( socket, e ) ),\r\n\t\t\ttakeUntil( destroyed )\r\n\t\t)\r\n\t\t.subscribe( console.error.bind( console ) );\r\n\r\n\t\tdestroyed.subscribe( () => { socket.close(); } );\r\n\t}\r\n\r\n\tpublic getEvents<T>( message: string ): Observable<T> {\r\n\t\tconst { socket, scheduler } = this;\r\n\t\treturn fromEvent<T>( socket, message )\r\n\t\t\t.pipe( tapLog( 'event', message ), observeOn( scheduler ) );\r\n\t}\r\n\r\n\tpublic emit<T>( message: string, data: Object = {} ) {\r\n\t\tconst { socket } = this;\r\n\t\treturn new Promise<T>( ( resolve, reject ) => {\r\n\t\t\tsocket.emit( message, data, ( error, result ) => {\r\n\t\t\t\tif( error ) reject( error );\r\n\t\t\t\telse resolve( result );\r\n\t\t\t} );\r\n\t\t} );\r\n\t}\r\n\r\n\tpublic ngOnDestroy() {\r\n\t\tthis.destroyed.next( true );\r\n\t\tthis.destroyed.complete();\r\n\t}\r\n\r\n\tprivate socket: SocketIOClient.Socket;\r\n\tprivate readonly destroyed = new Subject<true>();\r\n}\r\n","export class ModalModule {}","/**\n * @fileoverview This file was generated by the Angular template compiler. Do not edit.\n *\n * @suppress {suspiciousCode,uselessCode,missingProperties,missingOverride,checkTypes}\n * tslint:disable\n */\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"./app.module\";\nimport * as i2 from \"./r3.component\";\nimport * as i3 from \"../../node_modules/ngx-bootstrap/modal/modal-backdrop.component.ngfactory\";\nimport * as i4 from \"../../node_modules/ngx-bootstrap/modal/modal-container.component.ngfactory\";\nimport * as i5 from \"./r3.component.ngfactory\";\nimport * as i6 from \"@angular/common\";\nimport * as i7 from \"@angular/platform-browser\";\nimport * as i8 from \"@angular/forms\";\nimport * as i9 from \"@angular/http\";\nimport * as i10 from \"ngx-bootstrap/positioning/positioning.service\";\nimport * as i11 from \"ngx-bootstrap/component-loader/component-loader.factory\";\nimport * as i12 from \"ngx-bootstrap/modal/bs-modal.service\";\nimport * as i13 from \"ngx-zone-scheduler/dist/zone-scheduler\";\nimport * as i14 from \"./session.service\";\nimport * as i15 from \"./game.service\";\nimport * as i16 from \"./room.service\";\nimport * as i17 from \"ngx-bootstrap/modal/modal.module\";\nimport * as i18 from \"@fortawesome/angular-fontawesome\";\nimport * as i19 from \"./modal/modal.module\";\nimport * as i20 from \"ngx-auto-scroll\";\nimport * as i21 from \"ngx-zone-scheduler/dist/zone-scheduler.module\";\nvar AppModuleNgFactory = i0.ɵcmf(i1.AppModule, [i2.R3Component], function (_l) {\n  return i0.ɵmod([i0.ɵmpd(512, i0.ComponentFactoryResolver, i0.ɵCodegenComponentFactoryResolver, [[8, [i3.ModalBackdropComponentNgFactory, i4.ModalContainerComponentNgFactory, i5.R3ComponentNgFactory]], [3, i0.ComponentFactoryResolver], i0.NgModuleRef]), i0.ɵmpd(5120, i0.LOCALE_ID, i0.ɵangular_packages_core_core_l, [[3, i0.LOCALE_ID]]), i0.ɵmpd(4608, i6.NgLocalization, i6.NgLocaleLocalization, [i0.LOCALE_ID, [2, i6.ɵangular_packages_common_common_a]]), i0.ɵmpd(4608, i0.Compiler, i0.Compiler, []), i0.ɵmpd(5120, i0.APP_ID, i0.ɵangular_packages_core_core_f, []), i0.ɵmpd(5120, i0.IterableDiffers, i0.ɵangular_packages_core_core_j, []), i0.ɵmpd(5120, i0.KeyValueDiffers, i0.ɵangular_packages_core_core_k, []), i0.ɵmpd(4608, i7.DomSanitizer, i7.ɵangular_packages_platform_browser_platform_browser_e, [i6.DOCUMENT]), i0.ɵmpd(6144, i0.Sanitizer, null, [i7.DomSanitizer]), i0.ɵmpd(4608, i7.HAMMER_GESTURE_CONFIG, i7.HammerGestureConfig, []), i0.ɵmpd(5120, i7.EVENT_MANAGER_PLUGINS, function (p0_0, p0_1, p0_2, p1_0, p2_0, p2_1, p2_2) {\n    return [new i7.ɵDomEventsPlugin(p0_0, p0_1, p0_2), new i7.ɵKeyEventsPlugin(p1_0), new i7.ɵHammerGesturesPlugin(p2_0, p2_1, p2_2)];\n  }, [i6.DOCUMENT, i0.NgZone, [2, i0.PLATFORM_ID], i6.DOCUMENT, i6.DOCUMENT, i7.HAMMER_GESTURE_CONFIG, i0.ɵConsole]), i0.ɵmpd(4608, i7.EventManager, i7.EventManager, [i7.EVENT_MANAGER_PLUGINS, i0.NgZone]), i0.ɵmpd(135680, i7.ɵDomSharedStylesHost, i7.ɵDomSharedStylesHost, [i6.DOCUMENT]), i0.ɵmpd(4608, i7.ɵDomRendererFactory2, i7.ɵDomRendererFactory2, [i7.EventManager, i7.ɵDomSharedStylesHost]), i0.ɵmpd(6144, i0.RendererFactory2, null, [i7.ɵDomRendererFactory2]), i0.ɵmpd(6144, i7.ɵSharedStylesHost, null, [i7.ɵDomSharedStylesHost]), i0.ɵmpd(4608, i0.Testability, i0.Testability, [i0.NgZone]), i0.ɵmpd(4608, i7.Meta, i7.Meta, [i6.DOCUMENT]), i0.ɵmpd(4608, i7.Title, i7.Title, [i6.DOCUMENT]), i0.ɵmpd(4608, i8.ɵangular_packages_forms_forms_i, i8.ɵangular_packages_forms_forms_i, []), i0.ɵmpd(4608, i9.BrowserXhr, i9.BrowserXhr, []), i0.ɵmpd(4608, i9.ResponseOptions, i9.BaseResponseOptions, []), i0.ɵmpd(5120, i9.XSRFStrategy, i9.ɵangular_packages_http_http_a, []), i0.ɵmpd(4608, i9.XHRBackend, i9.XHRBackend, [i9.BrowserXhr, i9.ResponseOptions, i9.XSRFStrategy]), i0.ɵmpd(4608, i9.RequestOptions, i9.BaseRequestOptions, []), i0.ɵmpd(5120, i9.Http, i9.ɵangular_packages_http_http_b, [i9.XHRBackend, i9.RequestOptions]), i0.ɵmpd(4608, i10.PositioningService, i10.PositioningService, []), i0.ɵmpd(4608, i11.ComponentLoaderFactory, i11.ComponentLoaderFactory, [i0.ComponentFactoryResolver, i0.NgZone, i0.Injector, i10.PositioningService, i0.ApplicationRef]), i0.ɵmpd(4608, i12.BsModalService, i12.BsModalService, [i0.RendererFactory2, i11.ComponentLoaderFactory]), i0.ɵmpd(4608, i13.ZoneScheduler, i13.ZoneScheduler, [i0.NgZone]), i0.ɵmpd(135680, i14.SessionService, i14.SessionService, [i13.ZoneScheduler]), i0.ɵmpd(135680, i15.GameService, i15.GameService, [i13.ZoneScheduler, i14.SessionService]), i0.ɵmpd(4608, i16.RoomService, i16.RoomService, [i13.ZoneScheduler, i14.SessionService]), i0.ɵmpd(1073742336, i6.CommonModule, i6.CommonModule, []), i0.ɵmpd(1024, i0.ErrorHandler, i7.ɵangular_packages_platform_browser_platform_browser_a, []), i0.ɵmpd(1024, i0.APP_INITIALIZER, function (p0_0) {\n    return [i7.ɵangular_packages_platform_browser_platform_browser_h(p0_0)];\n  }, [[2, i0.NgProbeToken]]), i0.ɵmpd(512, i0.ApplicationInitStatus, i0.ApplicationInitStatus, [[2, i0.APP_INITIALIZER]]), i0.ɵmpd(131584, i0.ApplicationRef, i0.ApplicationRef, [i0.NgZone, i0.ɵConsole, i0.Injector, i0.ErrorHandler, i0.ComponentFactoryResolver, i0.ApplicationInitStatus]), i0.ɵmpd(1073742336, i0.ApplicationModule, i0.ApplicationModule, [i0.ApplicationRef]), i0.ɵmpd(1073742336, i7.BrowserModule, i7.BrowserModule, [[3, i7.BrowserModule]]), i0.ɵmpd(1073742336, i8.ɵangular_packages_forms_forms_bb, i8.ɵangular_packages_forms_forms_bb, []), i0.ɵmpd(1073742336, i8.FormsModule, i8.FormsModule, []), i0.ɵmpd(1073742336, i9.HttpModule, i9.HttpModule, []), i0.ɵmpd(1073742336, i17.ModalModule, i17.ModalModule, []), i0.ɵmpd(1073742336, i18.FontAwesomeModule, i18.FontAwesomeModule, []), i0.ɵmpd(1073742336, i19.ModalModule, i19.ModalModule, []), i0.ɵmpd(1073742336, i20.NgxAutoScrollModule, i20.NgxAutoScrollModule, []), i0.ɵmpd(1073742336, i21.ZoneSchedulerModule, i21.ZoneSchedulerModule, []), i0.ɵmpd(1073742336, i1.AppModule, i1.AppModule, []), i0.ɵmpd(256, i0.ɵAPP_ROOT, true, [])]);\n});\nexport { AppModuleNgFactory };","import './default.scss';\nimport './polyfills';\nimport './vendor';\n\nimport { enableProdMode } from '@angular/core';\n\nimport { platformBrowserDynamic } from '@angular/platform-browser-dynamic';\n\nimport { AppModule } from './app.module';\n\nif( location.hostname !== 'localhost' ) {\n\tenableProdMode();\n}\n\nplatformBrowserDynamic().bootstrapModule( AppModule );\n"],"sourceRoot":""}